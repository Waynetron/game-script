{"version":3,"sources":["Game/images sync /^/.//.*/.png$","Game/images/tiles/tile0.png","Game/images/tiles/tile1.png","Game/images/tiles/tile2.png","Game/images/tiles/tile3.png","Game/images/tiles sync /^/.//.*/.png$","icons/moon.svg","icons/sun.svg","icons/play.svg","icons/stop.svg","Game/images/Brick.png","Game/images/Goomba.png","Game/images/GoombaRed.png","Game/images/Player.png","Game/images/QuestionBrick.png","Game/images/Spike.png","Game/images/no-image.png","ExamplesModal/exampleCode.js","App/reducer.js","Game/constants.js","util/state.js","util/parse.js","Game/physics.js","Game/reducer.js","SpriteEditor/reducer.js","reducers.js","firebase.js","debug/DebugColliding.js","Image/LetterImage.js","Image/helper.js","Game/Sprite.js","Game/Effect.js","Game/Game.js","components/Button.js","Menu/Menu.js","Game/Loop.js","ImagePicker/ImagePicker.js","Code/Code.js","SpriteEditor/Tile.js","SpriteEditor/SpriteEditor.js","Persistor/Persistor.js","components/Modal.js","ExamplesModal/ExamplesModal.js","GamesModal/GamesModal.js","components/Input.js","components/IconButton.js","App/colors.js","Keyboard/Keyboard.js","App/actions.js","Game/actions.js","App/App.js","index.js"],"names":["map","./Brick.png","./Goomba.png","./GoombaRed.png","./Player.png","./QuestionBrick.png","./Spike.png","./no-image.png","./tiles/tile0.png","./tiles/tile1.png","./tiles/tile2.png","./tiles/tile3.png","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","./tile0.png","./tile1.png","./tile2.png","./tile3.png","p","examples","simple_movement","gravity_flip","sliding_puzzle","simple_platformer","four_way_movement","follow_player","initialGame","name","uniqid","Plain","deserialize","defaultState","games","theme","user","active","appReducer","state","arguments","length","undefined","action","type","objectSpread","currentGame","TOP","LEFT","RIGHT","createNewSprite","x","y","position","rotation","prevPosition","velocity","maxVelocity","acceleration","friction","colliding","top","bottom","left","right","positioning","static","inputs","trimBrackets","rawString","leftBracket","rightBracket","string","trim","isObject","isList","openIndex","indexOf","closeIndex","lastIndexOf","substr","states","UP","DOWN","FAST_UP","FAST_DOWN","FAST_LEFT","FAST_RIGHT","SLOW_UP","SLOW_DOWN","SLOW_LEFT","SLOW_RIGHT","JUMP","FLIP","flip","MIRROR","mirror","DEAD","dead","STATIC","STATIONARY","WIN","win","LOSE","lose","<UP>","<DOWN>","<LEFT>","<RIGHT>","<ACTION>","<ACTION1>","<ACTION2>","getCollidingForSide","side","traverseDirection","currentIndex","COLLIDING_OR_POSITIONING","nextIndex","collidesWith","console","error","nextColliding","defineProperty","getColliding","direction","leftStates","leftIndex","frontSide","down","up","directionToSide","backSide","forward","getOpposite","frontColliding","backColliding","wordsToState","words","names","statesArr","word","isOperator","_word$split","split","_word$split2","slicedToArray","newState","_arr","_i","key","negative","includes","_word$split3","_word$split4","number","Number","isNaN","rightState","resultState","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","Symbol","iterator","next","done","stateObj","value","merge","err","return","propertyRegex","wordRegex","objectRegex","listRegex","numberRegex","operatorRegex","isWord","Boolean","match","isProperty","isNumberString","splitOnFirstWordGroup","numOpenBrackets","i","char","charAt","slice","splitOnObject","_string$match","property","replace","remainder","concat","splitOnProperty","_string$match3","_string$match5","numberString","stringToWordGroups","_splitOnFirstWordGrou","_splitOnFirstWordGrou2","rest","toConsumableArray","stringToState","wordGroups","group","_property$split","_property$split2","trimmed","innerState","valueState","propertyToState","parseFloat","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","push","_i2","getStateTransitions","rules","sprites","transitions","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","sprite","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","rule","_rule","matches","isCreateNewState","createNew","flashDead","flash","flagDeadForRemoval","remove","isCollisionRule","line","isRule","isLevel","isVariable","isMultiVariable","standardExpansions","ALL","MOVE","SLOW_MOVE","HORIZONTAL","VERTICAL","replaceWord","newWord","newLine","isExpandable","expansions","_arr2","expandRules","lines","notExpandable","filter","expanded","flatten","entries","_ref3","_ref2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","expandRule","addImplicitKeywords","_line$split7","appendedLine","parseRules","variables","_ruleStrings2","_ref4","_ruleStrings4","customExpansions","regularRules","ruleStrings","ruleString","_ruleString$split","_ruleString$split2","ruleStringToState","collisionRules","separator","_ruleString$match","firstWord","toLowerCase","_ruleString$replace$s","_ruleString$replace$s2","leftWordGroupArrays","rightWordGroupArrays","rightStates","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","leftStatesWithColliding","index","rightIndex","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","matchingLeft","subState","newSprite","leftState","collisionRuleStringToState","collisionCreate","collisionModify","modify","create","roundToPixels","Math","round","getEdges","isOverlapping","spriteA","spriteB","a","b","overlapsPoint","point","padding","_getEdges","overlapsSide","points","getPointsForSide","getCollidedEdges","prevEdgesA","prevEdgesB","collidedEdges","getSeparatedState","edgeA","edgesB","applySpriteCollisions","newSpriteA","storePreviousPosition","applyAcceleration","max","min","applyVelocity","resetColliding","resetPositioning","snapNearZero","num","abs","applyFriction","currentView","effects","width_in_tiles","height_in_tiles","debug","imageMap","regular","stateTransitions","availableImages","freezeFrames","shake","getNextView","winners","losers","gameReducer","variableName","imageName","letter","_action$code","join","trimWhitespace","removeComments","serialize","level","parseLevel","forEach","_line$split$map","str","_line$split$map2","parseVariables","multiVariables","_line$split$map3","_line$split$map4","randIndex","floor","random","parseMultiVariables","newImageMap","_ref5","getName","legend","row","col","parseSprites","namesArr","_line$split","parseNames","reduce","obj","item","objects","results","_line$split3","_line$split4","expansion","parseObjects","lists","_line$split5","_line$split6","list","parseLists","_getLevelDimensions","getLevelDimensions","_getLevelDimensions2","width","height","_sprites3","spritesToKeep","effectsToKeep","effect","progress","duration","isAlive","newSprites","newEffects","deadSprite","stateToAdd","vectorA","vectorB","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","transition","_transition","getNewStateToAdd","updatedSprites","addNewState","edge","collidingSprite","updateSpriteCollidingState","removePositioningState","updateSpritePositioningState","newPosition","newVelocity","applyWallCollisions","newStates","result","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","mergeWith","applyStateTransitions","updatedEffects","input","newInputs","initialTileSets","tileImages","rasterise","tileSet","canvas","document","createElement","ctx","getContext","rowIndex","colIndex","tileImage","image","Image","onload","log","drawImage","src","toDataURL","tileSets","open","images","spriteEditorReducer","combineReducers","app","game","spriteEditor","firebaseInitialized","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","enablePersistence","catch","DebugColliding","_ref","react_default","className","seed","sin","LetterImageContainer","styled","div","withConfig","displayName","componentId","props","codePointAt","h","s","l","randomColor","LetterImage","assign","getImageFilename","spriteName","SpriteContainer","attrs","style","Inner","transform","Sprite","imageFilename","alt","require","Image_LetterImage","DebugColliding_DebugColliding","Container","Explosion","Effect","Stage","css","connect","Game_Sprite","Game_Effect","Button","button","colors","dark","primary","secondary","inverted","text","Menu","onPlay","components_Button","onClick","dispatch","onTimeChange","request","useEffect","requestAnimationFrame","advanceFrame","cancelAnimationFrame","PickerContainer","PickerBox","onSetImage","onSetLetterImage","_useState","useState","_useState2","setOpen","onMouseOver","onMouseLeave","grammar","comment","variableRandom","pattern","RegExp","variable","getContent","token","content","decorateNode","node","editor","others","texts","getTexts","toArray","t","tokens","Prism","tokenize","decorations","startText","shift","endText","startOffset","endOffset","start","newlines","end","available","remaining","anchor","offset","focus","mark","renderMark","children","attributes","_node$text$split$map","_node$text$split$map2","src_ImagePicker_ImagePicker","setCode","compile","slate_react_es","onChange","spellCheck","getPositionStyle","Tile","img","SpritePicker","selectedTileSet","onSelect","Preview","tiles","selectedTile","rowArr","tileIndex","src_SpriteEditor_Tile","TilePicker","updateTileSets","onClose","setSelectedTileSet","_useState3","_useState4","setSelectedTile","Dialog_default","SpriteEditor_SpritePicker","SpriteEditor_Preview","newTileIndex","newTileSets","SpriteEditor_TilePicker","firestore","saveGame","codeText","collection","uid","doc","set","then","loadGames","get","querySnapshot","_doc$data","data","clearGames","Blanket","Contents","Modal","stopPropagation","CodeExample","ColumnLayout","loadPreset","visible","setVisible","components_Modal","react","react_textarea_autosize_esm_browser","loadGame","Input","alpha","IconButton","darkColors","light","lightColors","keyMap","sequence","action1","action2","cancel_up","cancel_down","cancel_left","cancel_right","cancel_action1","cancel_action2","handlers","onSetInput","onCancelInput","onReset","onRun","onToggleDebug","isGameActive","r","d","space","setGameActive","setInput","cancelInput","onToggleTheme","onOpenCloseSpriteEditor","index_es","providers","google","firebaseApp","GoogleAuthProvider","AppContainer","updateName","signOut","auth","signInWithGoogle","signInWithPopup","react_custom_properties_default","properties","--primary-color","--secondary-color","--dark-color","--primary-transparent-color","primaryTransparent","--light-color","--hover-color","Persistor","components_Input","target","toUpperCase","onFocus","select","src_GamesModal_GamesModal","src_ExamplesModal_ExamplesModal","components_IconButton","sun","moon","src_Code_Code","src_Keyboard_Keyboard","stop","play","Game_Loop","src_SpriteEditor_SpriteEditor","src_Game_Game","Menu_Menu_Menu","store","createStore","rootReducers","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","es","src_App_App","getElementById"],"mappings":"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","file":"static/js/main.a5b0efe3.chunk.js","sourcesContent":["var map = {\n\t\"./Brick.png\": 418,\n\t\"./Goomba.png\": 419,\n\t\"./GoombaRed.png\": 420,\n\t\"./Player.png\": 421,\n\t\"./QuestionBrick.png\": 422,\n\t\"./Spike.png\": 423,\n\t\"./no-image.png\": 424,\n\t\"./tiles/tile0.png\": 180,\n\t\"./tiles/tile1.png\": 181,\n\t\"./tiles/tile2.png\": 182,\n\t\"./tiles/tile3.png\": 183\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 126;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAChJREFUWAnt0IEAAAAAw6D5Ux/khVBhwIABAwYMGDBgwIABAwYMvA8MECAAAc4qtccAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAADZJREFUWAnt0EENAEAIA8HjzOMGi5Bggs/UwDYT2dXvcP+wvWkHCBAgQIAAAQIECBAgQIAAgQGlEANzhaA9CAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAN1JREFUWAnF0EsOwyAQg2HUi7VH867H6RFT/4tIUZQHkBmwxHb8mVIm5rv8Pq+J/VRrGoD1pSzvaQDW+5UpgHX9NICLRTkZ/gPb9VMALhXFa4b+wH49iKEA94nSbYYBjtYDGQZwlyjcZwjgbD2YIQD3iLKjpAOu1gNKB7hDFJ0lFXC3HlQqwPdFyVXSADXrgaUBfFsU3CUFULseXArAd8XxmoQDWtYDDAf4pjhcm1BA63qQoQDfE0dbEgboWQ80DOBb4mBrQgC968GGAHxHHOvJY8CT9YAfA3xDHOrNH5CJQjHdlUHlAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAARJJREFUWAljZCASrPp/le0ew23H/wz//RgZGLT+MzBIMTD8B2IGHiKNwKoMaBZ+0PV/q8Q/hl91QAujgRby4VdNuixOB0z6v439K8PPaqCCIqCvuUk3mjgdWB0A8fXP9UBfWxBnDPmqMBzQ/X+j3l+Gv1uBlsuQbyzxOlEcAPX5aXpZDnImE8ytoDj/xwAOdrr4HGYvC4wBSnBANs3jHGYfjAZHATSr3aFlaodZiE6DowCSz2mX1dAtReYzgUo4SCGDLEw/NhOoeKVFCUesF5hAZTuximmhjgmYCrVoYTCxZgJDAFSrDRwA5gJwlTpgLgBlQ4rqc0pdDi+KKTWIXP2jDhgNgdEQGA2B0RAYDYHREAAA23dKamEoqhoAAAAASUVORK5CYII=\"","var map = {\n\t\"./tile0.png\": 180,\n\t\"./tile1.png\": 181,\n\t\"./tile2.png\": 182,\n\t\"./tile3.png\": 183\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 184;","module.exports = __webpack_public_path__ + \"static/media/moon.5a53c948.svg\";","module.exports = __webpack_public_path__ + \"static/media/sun.a78e8514.svg\";","module.exports = __webpack_public_path__ + \"static/media/play.e5a8524f.svg\";","module.exports = __webpack_public_path__ + \"static/media/stop.f437901f.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAD5JREFUWAnt10ERADAIA7Ax87iZRXao6CcYaMmv1fPmJC9ZYLNv8vnNVoAAAQIECBAgQIAAAQIECFRyHe84/XTlDQmQUCOUAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAYdJREFUWAntVz1LA0EQfbuEeAgi2EWsBCsL/0JqKytLf4KV+IGQIiDxxMqfYBOwECvr/AULK8FKSCeIzWlx6zzjQdibDRdwL80NhNy8zMx7O3N3YQzEUve4kePrCnBdcTvEItoYMCOLpeMTs/tmSO6QPTlgLSJpqbQB3g2Sndbk5PWSUw0P7KTr9q/tJYX1AK4rAqLPfNZZOhSwUGsENB1oOhDqwDdgTxMsr/PDa3lWBatslfNbeknbOzN76dRv6cA9iJtfTmEzLqvnqx1IkNz61TXMjyl8LVbDGK8KKArV8a0KyJAd+OQa5scUvharYYw3A3cv/4wl403UK9o2Sc77EtUuRepA5fyQAL1sBFQdQQSeYMlGQOBFJHcn7Pkmtq73zfY8b0C11Xfuuf2KlyOH/MIPCI5gBas3/0FOQtZhPZ+cflDAJz4OqVxLmhdjHdbT8prHMDgCrV0xMAqQXW1hNhYBZrQwei6p3FK5KNYtgpzktr8rsmyp0omhiKhjHMJhhtyMyf0DfCpzwbzHSMoAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAYxJREFUWAntV0FKw1AQnT82WRQqtDvFdbdewVN06RFciRUCLiwFI648QjdCT+EV3HYtuEvRgosEE+dFAk2Y3ybgTzcZKM1M3rw3mUk+/xsS+w7DsyRJHg3RRZZlJ4i5MmPMR0b06nneTX86fTe5eBy/ieDIlaiFN/J8/5zx5AcQR00jaDPaDu8QBm12PfNdDwZt3gVo415XQNeBrgNqB2SBiA3zbY/5FD9cI1b3s2yS31NJme+OgyDcuhd+zedEafqwFbNfNshXO3BEtKiya7EqpvA1rBYDXi2gIGrjXy3gh+iyKq7FqpjC17BaDHjzOZvJ/qBs+Qsncyzalien6b0A/TJS95rkqwXotG6i6gjcSOmsXQH6QiTdkt1rMBiPn8xkUnsF1JtMlC2X/ma1upYdkKxmZbOOYDAcPv+HOOTAA76y9J9nLWCzXl+hci2paSzvgPBped1naB2B1i4XMcZZzQVxHU5oMw6KdcAuMNBmnFKFPHIhsIczgjbjiIxTqqw8L22MI9cQLWhC+xfEpII8G45emQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAU5JREFUWAljZCAA2v+v+09ACU5pRgbG/xWMgUw4FQAl8Eri00gtuVEHjIbAaAgMeAgwUlLQUKMsGPAQGHXAaAjgDAFgVTodhClN6YTMwZkNKxmDGEGWU5JNkdsDuMzBGQKU+pxY/SyEFMJCgpA6cuUJhgAw6Cb+//8fHB2kWALS0/F/fSchPQQdADQgr5Nhw2yggcSoBdu3//9+FqCeeUBOKTUcwPCf4X9yJ8P6pSCDCRnY9/8Y50mGD8CW7P8EQmpB8gSDFi31buJm4AjLY/T6ic3w/v/rBX4wMGxiYPhvCzGc+q1iv68MP7fM/L+ZC90B/f93SP5g+H8QZjlIHhgKBD1IdLwiLPzv8p7hz87e/xtkYWLd/zfq/WT4fhTI14OJEUsTjFNsBgF9ZvOL4f8joBzYh38Y/l7Epo4YMTJCgBhjiVcz6oDREBjwEAAAwOJpSUqjPhYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAX5JREFUWAlj/Njc/J9hIMFAOgBkN9NAeh5k96gDRkNgNARYKMmGXzs7pf78/i3HxsDwnLOm5iE5ZpHlgM9tbaL//v1b9OfXLw+Qpb+A+FNLyz5eLq5QxqKid6Q4hKw0ALR8McP//2DLGRgZ7zEyMv79//+/0+evXyeSYjlILckO+N/fLwDUpwXEX4AWJ/DX1Cj/Z2QsBRkGpO1BNCmA5ChgLCz8ALRADmYJ0OeMn1ta7EA1GuP//49g4sTSJDsA2WCw5a2tM4CWB4CiAYhrkeWJYZMcBciGfm5tLQY6Ig1sOQNDOG919X5keWLYFDkA6HN3kCVAejZvTc1aYixEV0NRFDAyMTUBDZzKwMx8Hd1gYvmUhcD//4oMf/+mMv/7x0WshejqKAoBYFkwDRj83H///AGVRYHohhPDpygEGBkY9gATIDD7M+4lxjKsaihtE/6fOZPs4KdKm5AxPf0bVp8RKUhRFBBpB15low4YDYHREBjwEGCktCTEm8mJkAQABD53sd5+Ls8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAhVJREFUWAm9lulOwkAUhaf1WXCNStwIavzhGmOMxrihj+JSTFqsPgpv4Wv4Fmw/JHSuR5Lb2NJhpqWUhEw7c++Z75wuIMQEn9bnZ6nruo8TSAh7kmbr5+dVEjnUbM5k1ckM0G40ZoVl1UiIUvv7+6FwAAoCh4iGzi2iJxxnMpOpCe7nLSHu2TVSmOt5Xo3P04yZAIbuRfT+kUI8Z0khNUDn42MB7m/jLrH5PFK4i8/rzlMDyH6/jsgT+7KkkCikou74/hLcX6vWkcJi1/NuVOtJ86kAaDBwVO5ZHBAv+ILT7GMM0PX9ZUgq3fN2AFxCCto6rjcGkH/uDZ2lScEIAI5WQHzF1LoRKSyjx6jeCADv+7qpe4YzTUELACdliF6ysOmIFFY7nqft0wJkcc+QgHjlY9U4FgBvtjVEeaFq1s4TlduuO7Z/LECAa6/dRFOgS0EJ0Ht/X4f7c42+fploDSkodZQAQRC86dXNKsalkAgA95twf2Ymb1BFtNHyvES9RIA83Yd4RIlPxAhAq9GowP1p2JjXAdEWUhjRHQEQUuZ27ePslpROfC4CgP96VUF0Ei/K6xw3YwVv1oh+BICkrOe1mUpHxlIIAfCsbsP9saoxr3mkUEUKR6wXAmBhateeN+PxfwpDALjfhftDLpj2CLM7SOHgbx9OoDD3bI5TsDquu4ef3C9eKHK0bXvfLvLax83hqXN+AWhR9c/gEiSNAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAW5JREFUWAntlsFOwzAMhu1qrwMSnOAtYOLCk3SDM6IVD8IFTeMp2AleqJqxS5JtrsucCSlCai6J7dj/lyxWh8+0Iig5SgKIdlXy8KI9AUw38P9uoKH12W+dcyyuc7NuoKX1HQF9cv82upDY4pe47LPils8NIEW3QK8ANONCtYYIdi1x2eeFcAEo8XiQBLETjyE/hAuAT3QZTh4V4iwQH2zwyfWgGcH2Qnu17QJY4u0DJ7Y6OdhXI/52gfPHkVhyuwBk9xLnC57GIFLBsGjDfu0f2G4AyXRCuMWlZhaAJPz1yAIYvnYTJ3WHGVVON4BTPJZ3Q7gAGlo9cWWj1Xq9TVRVcx3ylPvQdAEgVF8A2B2m9pY8uGteGd2B3U+ekbXncgHUePNWAd4riPTah92BneyXvD0tc+kCkEwFkcRj1R2EX7zP5ceV9bf8hd7Po6g153yOe+1cAEv0VJ9ou3+CU0WO5U0A0w0UvwEs2YbSId8ezJqOYuBQ4gAAAABJRU5ErkJggg==\"","export const EMPTY_GAME =\n`#################\n#               #\n#               #\n#               #\n#               #\n#       P       #\n#################\n\n// Legend\nP = Player\n\n// Rules\n{ <HORIZONTAL> Player } -> { HORIZONTAL Player }\n`\n\nexport const examples = {\nsimple_movement:\n`\n##################\n#                #\n#                #\n#       P        #\n#       #        #\n#      ###       #\n#     #####      #\n#                #\n#                #\n##################\n  \nP = Player\n# = Brick\n  \n// Accelerate down, like gravity\n{ Player } -> { DOWN Player }\n\n// Move sideways with <LEFT> and <RIGHT> arrow keys\n{ <HORIZONTAL> Player } -> { HORIZONTAL Player }\n`,\n\ngravity_flip:\n`\n#################\n#               #\n#               #\n#               #\n#               #\n#  P    G    X  #\n#################\n\n// Legend\nP = Player\nG = Goomba\nX = Goal\n\n// Horizontal input move player horizontally\n{ <HORIZONTAL> Player } -> { HORIZONTAL Player }\n\n// Press Action1 (X) to flip\nDOWN { Player <ACTION> | Any } -> { Player FLIP | Any }\nUP { Player <ACTION> | Any } -> { Player !FLIP | Any }\n\n// Flipped Player falls up, unflipped Player falls down\n{ Player FLIP } -> { Player UP }\n{ Player !FLIP } -> { Player DOWN }\n\n// If Player touches Goomba, player dies\n{ Player | Goomba } -> { DEAD Player | Goomba }\n\n// Win state\n{ Player | Goal } -> { Player WIN | Goal }\n`,\n\nsliding_puzzle:\n`\n###################\n#    #      #     #\n#                 #\n#                 #\n#                 #\n#   P    G  # x   #\n###################\n\n// Legend\nP = Player\nG = Goomba\nx = Goal\n# = Brick\n\nFlippable = [ Player Goomba ]\n\n{ <UP> STATIONARY Flippable } -> { Flippable gravity: 1 }\n{ <DOWN> STATIONARY Flippable } -> { Flippable gravity: 2 }\n{ <LEFT> STATIONARY Flippable } -> { Flippable gravity: 3 }\n{ <RIGHT> STATIONARY Flippable } -> { Flippable gravity: 4 }\n\n{ Flippable gravity: 1 } -> { Flippable UP rotation:180 }\n{ Flippable gravity: 2 } -> { Flippable DOWN rotation:0 }\n{ Flippable gravity: 3 } -> { Flippable LEFT rotation:90 }\n{ Flippable gravity: 4 } -> { Flippable RIGHT rotation:-90 }\n\n{ Goomba | Any } -> { Goomba | Goomba }\n\n// Win state\n{ Player | Goal } -> { Player WIN | Goal }\n`,\n\nsimple_platformer:\n`\n##################\n#                #\n#                #\n#                #\n#                #\n#                #\n#     ###?#  G   #\n#                #\n#    P           #\n##################\n\nP = Player\n# = Brick\n? = QuestionBrick\nG = Goomba\n\n// List syntax\nThingsThatFall = [ Player Goomba ]\n\n// Accelerate down, like gravity. On everything in the list\n{ ThingsThatFall } -> { DOWN ThingsThatFall }\n\n// Move sideways with <LEFT> and <RIGHT> arrow keys\n{ <HORIZONTAL> Player } -> { HORIZONTAL Player }\n\n// Jump when <UP> is pressed and when the bottom of Player\n// is touching Wall (Wall = anything)\nDOWN { <UP> Player | Wall } -> { JUMP Player | Wall }\n\n// Player dies if touching Goomba on the side or from below\nHORIZONTAL { Player | Goomba } -> { DEAD Player | Goomba }\nUP { Player | Goomba } -> { DEAD Player | Goomba }\n\n// Jumping on top of Goomba kills the Goomba\nDOWN { Player | Goomba } -> { Player | DEAD Goomba }\n\n// Break bricks by head-butting\nUP { Player | Brick } -> { Player | DEAD Brick }\n\n// Head-butting QuestionBrick turns it into a Goomba\nUP { Player | QuestionBrick } -> { Player | JUMP Goomba }\n`,\n\nfour_way_movement:\n`\n###############\n#             #\n#             #\n#             #\n#      P      #\n#             #\n#             #\n###############\n\nP = Player\n\n// MOVE is shorthand for UP, DOWN, LEFT and RIGHT\n// You can also use HORIZONTAL or VERTICAL\n{ <MOVE> Player } -> { MOVE Player }\n`,\n\nfollow_player:\n`\n##################\n#                #\n#   G            #\n#                #\n#                #\n#                #\n#                #\n#           P    #\n#                #\n##################\n\nP = Player\nG = Goomba\n\n{ <MOVE> Player } -> { MOVE Player }\nUP { Bro > Player } -> { SLOW_UP Bro > Player }\nDOWN { Bro > Player } -> { SLOW_DOWN Bro > Player }\nLEFT { Bro > Player } -> { SLOW_LEFT Bro > Player }\nRIGHT { Bro > Player } -> { SLOW_RIGHT Bro > Player }\n\n`\n}","import uniqid from 'uniqid';\nimport {EMPTY_GAME, examples} from '../ExamplesModal/exampleCode'\nimport Plain from 'slate-plain-serializer'\n\n\nconst initialGame = {\n  name: 'UNTITILED GAME',\n  id: uniqid(),\n  code: Plain.deserialize(examples.gravity_flip)\n}\n\nconst defaultState = {\n  name: initialGame.name,\n  code: initialGame.code,\n  id: initialGame.id,\n  games: [initialGame],\n  theme: 'dark',\n  user: null,\n  active: false\n}\n\n\nconst appReducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'SET_ACTIVE':\n      return {\n        ...state,\n        active: action.active\n      }\n    case 'TOGGLE_THEME': {\n      return {\n        ...state,\n        theme: state.theme === 'light' ? 'dark' : 'light'\n      };\n    }\n    case 'SET_NAME':\n      return {\n        ...state,\n        name: action.name\n      }\n    case 'SET_USER':\n      return {\n        ...state,\n        user: action.user\n      }\n    case 'SIGN_OUT':\n      return {\n        ...state,\n        user: null\n      }\n    case 'SET_GAMES':\n      return {\n        ...state,\n        games: action.games\n      }\n    case 'SET_CURRENT_GAME':\n      return {\n        ...state,\n        currentGame: action.currentGame\n      }\n    case 'UPDATE_CODE':\n      return {...state, code: action.code}\n    case 'LOAD_SUCCESS':\n      return {\n        ...state,\n        code: action.code\n      }\n    case 'LOAD_CODE':\n      return {\n        ...state,\n        code: action.code\n      }\n    default:\n      return state\n  }\n}\n\nexport default appReducer","\nexport const TILE_SIZE = 32;\nexport const MAX_VELOCITY = 20;\nexport const TOP = 'top';\nexport const BOTTOM = 'bottom';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';","import uniqid from 'uniqid';\nimport {matches, mergeWith, merge} from 'lodash';\nimport {MAX_VELOCITY, TILE_SIZE} from '../Game/constants.js';\n\nexport const createNewSprite = (name, x, y)=> ({\n  name: name,\n  position: {x, y},\n  rotation: 0,\n  prevPosition: {x, y},\n  velocity: {x: 0, y: 0},\n  maxVelocity: {x: MAX_VELOCITY, y: MAX_VELOCITY},\n  acceleration: {x: 0, y: 0},\n  friction: 0.15,\n  colliding: {\n    top: [],\n    bottom: [],\n    left: [],\n    right: []\n  },\n  positioning: {\n    top: [],\n    bottom: [],\n    left: [],\n    right: []\n  },\n  static: false,\n  inputs: {}\n});\n\n// also removes a single space on the outside of the bracket (if one exists)\n// otherwise it's possible to end up with multiple spaces where brackets stack\n// eg: '{ velocity: { y: -150 } }'   *could become*   ' velocity: { y: -150  }'\nexport const trimBrackets = (rawString)=> {\n  const string = rawString.trim()\n  let leftBracket\n  let rightBracket\n\n  if (isObject(string)) {\n    leftBracket = '{'\n    rightBracket = '}'\n  }\n  else if (isList(string)) {\n    leftBracket = '['\n    rightBracket = ']'\n  }\n  else {\n    return rawString\n  }\n\n  const openIndex = string.indexOf(leftBracket);\n  const closeIndex = string.lastIndexOf(rightBracket);\n  \n  return string.substr(openIndex + 1, closeIndex - 1).trim();\n}\n\nconst states = {\n  UP: {acceleration: {y: -1}},\n  DOWN: {acceleration: {y: 1}},\n  LEFT: {acceleration: {x: -1}},\n  RIGHT: {acceleration: {x: 1}},\n  FAST_UP: {acceleration: {y: -6}},\n  FAST_DOWN: {acceleration: {y: 6}},\n  FAST_LEFT: {acceleration: {x: -6}},\n  FAST_RIGHT: {acceleration: {x: 6}},\n  SLOW_UP: {acceleration: {y: -0.5}},\n  SLOW_DOWN: {acceleration: {y: 0.5}},\n  SLOW_LEFT: {acceleration: {x: -0.5}},\n  SLOW_RIGHT: {acceleration: {x: 0.5}},\n  JUMP: {velocity: {y: -150}},\n  FLIP: {flip: true},\n  MIRROR: {mirror: true},\n  DEAD: {dead: true},\n  STATIC: {static: true},\n  STATIONARY: {velocity: {x: 0, y: 0}},\n  WIN: {win: true},\n  LOSE: {lose: true}\n};\n\nconst inputs = {\n  '<UP>': 'up',\n  '<DOWN>': 'down',\n  '<LEFT>': 'left',\n  '<RIGHT>': 'right',\n  '<ACTION>': 'action1',\n  '<ACTION1>': 'action1',\n  '<ACTION2>': 'action2'\n};\n\nconst getOpposite = (direction)=> {\n  const oppositeMappings = {\n    'left': 'right',\n    'right': 'left',\n    'top': 'bottom',\n    'bottom': 'top',\n    'up': 'down',\n    'down': 'up',\n    'forward': 'backward'\n  }\n\n  return oppositeMappings[direction];\n}\n\nconst directionToSide = (direction)=> {\n  const mappings = {\n    'left': 'left',\n    'right': 'right',\n    'down': 'bottom',\n    'up': 'top'\n  }\n\n  return mappings[direction];\n}\n\n// Recursively finds the colliding state\nconst getCollidingForSide = (\n  side, traverseDirection, states, currentIndex, COLLIDING_OR_POSITIONING\n)=> {\n  const nextIndex = traverseDirection === 'forward' ? currentIndex + 1 : currentIndex - 1;\n  // outside range\n  if (nextIndex < 0 || nextIndex === states.length) {\n    return;\n  }\n\n  const collidesWith = states[nextIndex];\n  if (!collidesWith) {\n    console.error('Expecting there to always be a state here');\n  }\n\n  let state = [{\n    ...collidesWith\n  }];\n\n  const nextColliding = getCollidingForSide(\n    side, traverseDirection, states, nextIndex, COLLIDING_OR_POSITIONING\n  );\n  if (nextColliding) {\n    state[COLLIDING_OR_POSITIONING] = {\n      [side]: nextColliding\n    }  \n  }\n\n  return state;\n}\n\nconst getColliding = (\n  direction, leftStates, leftIndex, COLLIDING_OR_POSITIONING\n)=> {\n  // direction refers to the direction the collision rule is applied in.\n  // getCollidingForSide('bottom', 'forward' ... refers to searching for the\n  // colliding state for the bottom side by traversing the ruleString to the\n  // right (forward)\n  let colliding = {};\n  const frontSide = directionToSide(direction);\n  const backSide = getOpposite(frontSide);\n  const frontColliding = getCollidingForSide(\n    frontSide, 'forward', leftStates, leftIndex, COLLIDING_OR_POSITIONING\n  );\n  const backColliding = getCollidingForSide(\n    backSide, 'backward', leftStates, leftIndex, COLLIDING_OR_POSITIONING\n  );\n\n  if (backColliding) {\n    colliding[backSide] = backColliding;\n  }\n\n  if (frontColliding) {\n    colliding[frontSide] = frontColliding;\n  }\n\n  if (frontColliding || backColliding) {\n    return colliding; \n  }\n  else {\n    return;\n  }\n}\n\n/*\nStarts withObject.keys( ).length > 0 ? colliding : undefined;\n  [ UP Player | Spike ] -> [ DEAD Player | Spike ]\nBreaks up into 2 rules\n  [ UP Player] -> [ DEAD Player]\n  [ Spike ] -> [ Spike ]\nEvaluate both rules into a pair of state transitions\n[\n  {name: \"Player\", acceleration: {x: 1, y: 0}},\n  {name: \"Player\", dead: true}\n]\n[\n  {name: \"Spike\"},\n  {name: \"Spike\"}\n]\n// Finally adds a colliding property to the left side each state transition\n[\n  {\n    name: \"Player\", acceleration: {x: 1, y: 0},\n    colliding: {\n      top: {name:'Spike'}, bottom: {name:'Spike'},\n      left: {name:'Spike'}, right: {name:'Spike'}\n    }\n  },\n  {name: \"Player\", dead: true}\n]\n[\n  {\n    name: \"Spike\",\n    colliding: {\n      top: {name:'Player'}, bottom: {name:'Player'},\n      left: {name:'Player'}, right: {name:'Player'}\n    }\n  }\n  {name: \"Spike\"}\n]\n*/\nexport const collisionRuleStringToState = (ruleString, names)=> {\n  // Get collision direction (first word at the start of the line)\n  const [firstWord] = ruleString.match(/^([A-Z]+)\\b/);\n  const direction = firstWord.toLowerCase();\n\n\n  // Get the left and right matches\n  const [left, right] = ruleString.replace(firstWord, '').split('->');\n\n  let separator;\n  if (left.includes(' > ')) {\n    separator = '>'\n  }\n  else if (left.includes(' < ')) {\n    separator = '<'\n  }\n  else {\n    separator = '|'\n  }\n\n  const COLLIDING_OR_POSITIONING = separator === '|' ? 'colliding' : 'positioning'\n\n  // <------- leftWordArrays ----->    <--- rightWordArrays -->\n  // <---words--> < ----words----->    <-words-> <---words---->\n  // [ UP Player | Goomba | Brick ] -> [ Player | DEAD Goomba ]\n\n  const leftWordGroupArrays = trimBrackets(left).split(separator)\n    .map((string)=> stringToWordGroups(string))\n\n  const rightWordGroupArrays = trimBrackets(right)\n    .split(separator)\n    .map((string)=> stringToWordGroups(string))\n\n  let leftStates = [];\n  let rightStates = [];\n\n  // Left\n  // The left side is what the rule is looking to match.\n  // The colliding state should recursively nest colliding states if the rule\n  // has multiple collisions\n  for (const words of leftWordGroupArrays) {\n    const state = {\n      ...wordsToState(words, names)\n    }\n\n    leftStates.push(state);\n  }\n\n  const leftStatesWithColliding = leftStates.map((state, index)=> {\n    const colliding = getColliding(\n      direction, leftStates, index, COLLIDING_OR_POSITIONING\n    );\n  \n\n    if (colliding) {\n      return {\n        ...state,\n        [COLLIDING_OR_POSITIONING]: getColliding(\n          direction, leftStates, index, COLLIDING_OR_POSITIONING\n        ),\n      }\n    }\n    else {\n      return state;\n    }\n  });\n\n  // Right\n  // The right state is any changes to the left state. And includes the creation\n  // of completely new state.\n  let rightIndex = 0;\n  for (const words of rightWordGroupArrays) {\n    const matchingLeft = leftWordGroupArrays[rightIndex]\n    let state = {};\n    if (matchingLeft) {\n      // If there's a matching left state, then this state is a transition of that\n      // state. It may be a small change like adding DEAD to a Player.\n      // Eg: [ Mario | Goomba ] -> [ DEAD Mario | Goomba ]\n      \n      // Flatten and merge all the states together into a single state object\n      const states = words.map((string)=> stringToState(string, names))\n      for (const subState of states) {\n        merge(state, subState);\n      }\n    }\n    else {\n      // If there is no matching let state, then this is a completely new state.\n      // Eg: the fireball in this rule: [ <ACTION> Mario ] -> [ Mario | Fireball ]\n      const newSprite = createNewSprite('TEMP_NAME', 0, 0);\n      state = {\n        ...newSprite,\n        // indicates to applyRules not to merge this but create new state\n        createNew: {direction},\n        ...wordsToState(words, names)\n        // I don't think the right side needs the colliding state calculated\n      }\n\n      // Duplicate the leftmost match state as the match for this new state\n      leftStatesWithColliding.push({...leftStates[0]});\n    }\n\n    rightStates.push(state);\n    rightIndex += 1;\n  }\n\n  // State pairs to state transitions\n  return leftStatesWithColliding.map((leftState, index)=> [leftState, rightStates[index]]);\n\n  // const leftStateA = wordsToState(leftWordsA, names);\n  // const leftStateB = leftWordsB\n  //   ? wordsToState(leftWordsB, names)\n  //   : newSprite()\n    \n  // const rightStateA = wordsToState(rightWordsA, names);\n\n  // // User may omit rightWordsB. In which case populate it with leftWordsB\n  // // Eg: [ <ACTION> Player | Ground ] -> [ JUMP Player ]\n  // // Becomes: [ <ACTION> Player | Ground ] -> [ JUMP Player ]\n  // const rightStateB = wordsToState(rightWordsB ? rightWordsB : leftWordsB, names);\n\n  // // Pay close attention to the flipping of A and B for certain variables.\n  // // collidingA is used as the colliding state for spriteB and vice-a-versa\n  // let collidingA = {};\n  // collidingA[getOpposite(directionToSide(direction))] = [{...leftStateA}]\n\n  // let collidingB = {};\n  // collidingB[directionToSide(direction)] = [{...leftStateB}]\n\n  // const pairA = [\n  //   {...leftStateA, colliding: collidingB},\n  //   rightStateA\n  // ];\n  // const pairB = [\n  //   {...leftStateB, colliding: {...collidingA}},\n  //   rightStateB\n  // ];\n\n  // return [pairA, pairB];\n}\n\nconst negative = (state)=> {\n  const newState = {...state}\n  for (const key of Object.keys(newState)) {\n    newState[key] = !newState[key]\n  }\n\n  return newState\n}\n\nconst wordsToState = (words, names)=> {\n  /* Turn those words into arrays of key value objects\n    [\n      [{name: \"Goomba\"}],\n      [{name: \"Goomba\"}, {acceleration: {x: 1}}]},\n      [{name: \"Goomba\"}, {acceleration: {y: 1}}]}\n    ]\n  */\n  const statesArr = words.map((word)=> {\n    if (names[word]) {\n      return ({\n        name: word\n      });\n    }\n    if (inputs[word]) {\n      return ({\n        inputs: {[inputs[word]]: true}\n      });\n    }\n    if (states[word]) {\n      return ({\n        ...states[word]\n      })\n    }\n\n\n    // remove ! operator\n    // run wordToState on remaining word\n    // apply negative to resulting state\n    // return negative state\n    if (isOperator(word)) {\n      const [operator, right] = word.split('!')\n      \n      return negative(\n        wordsToState([right.trim()], names)\n      )\n    }\n\n    if (word.includes(':')) {\n      const [left, right] = word.split(':')\n\n      // Number\n      const number = Number(right.trim())\n      if (typeof number === 'number' && !isNaN(number)) {\n        return {[left]: number}\n      }\n\n      // Object\n      const rightState = wordsToState([right.trim()], names)\n      return {[left]: {...rightState}}\n    }\n\n    return {};\n  });\n\n  /* Flatten and merge all the states together into a single state object:\n    {name: \"Goomba\", acceleration: {x: 1, y: 1}}\n  */\n  let resultState = {};\n  for (const stateObj of statesArr) {\n    merge(resultState, stateObj);\n  }\n\n  return resultState;\n};\n\nconst propertyRegex = /^\\b[a-z_]+\\b\\s{0,1}[:]/i // property can't have space before colon\n// word can still match on ':', so must come after property\nconst wordRegex = /^[<!]{0,1}[a-z_]+[0-9a-z_]*[>]{0,1}/i\nconst objectRegex = /^\\{/i // simply checks if string starts with '{'\nconst listRegex = /^\\[/i // simply checks if string starts with '{'\nconst numberRegex = /^[-]{0,1}[0-9]*[.]{0,1}[0-9]+/\nconst operatorRegex = /^[!]{1}/ // only supports ! currently\n\nconst isWord = (string)=> Boolean(string.match(wordRegex))\nconst isProperty = (string)=> Boolean(string.match(propertyRegex))\nconst isObject = (string)=> Boolean(string.match(objectRegex))\nconst isList = (string)=> Boolean(string.match(listRegex))\nconst isNumberString = (string)=> Boolean(string.match(numberRegex))\nconst isOperator = (string)=> Boolean(string.match(operatorRegex))\n\nconst splitOnProperty = (string)=> {\n  const [property] = string.match(propertyRegex)\n  const name = property.trim().replace(':', '')\n  const right = string.replace(property, '').trim()\n  \n  let numOpenBrackets = 0\n  for (var i = 0; i < right.length; i++) {\n    const char = right.charAt(i)\n\n    if (numOpenBrackets < 0) {\n      console.error('more closing brackets than opening brackets')\n    }\n\n    if (char === '{') {\n      numOpenBrackets++\n    }\n    else if (char === '}') {\n      numOpenBrackets--\n    }\n    else if (char === ' ' && numOpenBrackets === 0) {\n      const value = right.slice(0, i + 1).trim()\n      const remainder = right.slice(i + 1).trim()\n      \n      return [\n        `${name}: ${value}`,\n        remainder\n      ]\n    }\n  }\n\n  if (numOpenBrackets !== 0) {\n    console.error('unclosed brackets')\n  }\n  \n  // Made it to the end:\n  // value is entire string, no remainder\n  return  [`${name}: ${right}`, '']\n}\n\nconst splitOnObject = (string)=> {\n  let numOpenBrackets = 0\n  for (var i = 0; i < string.length; i++) {\n    const char = string.charAt(i)\n\n    if (numOpenBrackets < 0) {\n      console.error('more closing brackets than opening brackets')\n    }\n\n    if (char === '{') {\n      numOpenBrackets++\n    }\n    else if (char === '}') {\n      numOpenBrackets--\n    }\n    else if (char === ' ' && numOpenBrackets === 0) {\n      const objectString = string.slice(0, i + 1).trim()\n      const remainder = string.slice(i + 1).trim()\n\n      return [\n        objectString,\n        remainder\n      ]\n    }\n  }\n\n  if (numOpenBrackets !== 0) {\n    console.error('unclosed brackets')\n  }\n  \n  // Made it to the end:\n  // value is entire string, no remainder\n  return  [string, '']\n}\n\nconst splitOnFirstWordGroup = (rawString)=> {\n  const string = rawString.trim()\n\n  // if (isOperator(string)) {\n  //   return splitOnOperator(string)\n  // }\n\n  if (isObject(string)) {\n    return splitOnObject(string)\n  }\n\n  if (isProperty(string)) {\n    return splitOnProperty(string)\n  }\n\n  if (isWord(string)) {\n    const [word] = string.match(wordRegex)\n\n    return [word.trim(), string.replace(word, '')]\n  }\n\n  if (isNumberString(string)) {\n    const [numberString] = string.match(numberRegex)\n\n    return [numberString, string.replace(numberString, '')]\n  }\n\n  console.error('made it to the end without returning anything:', string)\n}\n\nconst stringToWordGroups = (string)=> {  \n  const [left, rest] = splitOnFirstWordGroup(string)\n\n  if (rest.length === 0) {\n    return [left]\n  }\n\n  return [left, ...stringToWordGroups(rest)]\n}\n\nconst propertyToState = (property, names)=> {\n  const firstColonRegex = /:(.+)/ \n  // the (.+) in the regex is to ensure the rest of the string is included in the 2nd arg\n  // without it, the string will split on every colon, not just the first\n  const [name, right] = property.split(firstColonRegex)\n  \n  if (isObject(right.trim())) {\n    const trimmed = trimBrackets(right.trim())\n    const innerState = stringToState(trimmed, names)\n    \n    return {\n      [name]: {...innerState},\n    }\n  }\n  else {\n    const valueState = stringToState(right.trim(), names)\n\n    return {\n      [name]: valueState,\n    }\n  }\n}\n\n// input: '{ Player carrying: Brick }'\n// output: { name: 'Player', carrying: {name: 'Brick'} }\nconst stringToState = (string, names)=> {\n  const wordGroups = stringToWordGroups(string)\n\n  if (wordGroups.length === 0) {\n    console.error('No word groups')\n  }\n  else if (wordGroups.length === 1) {\n    const [group] = wordGroups\n\n    // Property\n    if (isProperty(group)) {\n      return propertyToState(group, names)\n    }\n\n    // Expandable keyword\n    if (isWord(group)) {\n      return wordsToState([group], names)\n    }\n\n    if (isNumberString(group)) {\n      return parseFloat(group)\n    }\n\n    console.error('not dealing with:', wordGroups)\n    return {}\n  }\n\n  let states = []\n  for (const group of wordGroups) {\n    states.push(stringToState(group, names))\n  }\n\n  // Flatten and merge all the states together into a single state object\n  let resultState = {};\n  for (const state of states) {\n    merge(resultState, state);\n  }\n\n  return resultState\n}\n\n// { Player } -> { Player carrying: Brick }\nexport const ruleStringToState = (ruleString, names)=> {\n  const [left, right] = ruleString.split('->')\n\n  return [\n    stringToState(trimBrackets(left), names),\n    stringToState(trimBrackets(right), names)\n  ]\n}\n\nconst addVectors = (vectorA, vectorB)=> ({\n  x: vectorA.x + vectorB.x,\n  y: vectorA.y + vectorB.y\n});\n\nconst getDirectionOffset = (direction)=> {\n  const directionOffsetsMap = {\n    up: {x: 0, y: -TILE_SIZE},\n    down: {x: 0, y: TILE_SIZE},\n    left: {x: -TILE_SIZE, y: 0},\n    right: {x: TILE_SIZE, y: 0}\n  }\n\n  return directionOffsetsMap[direction];\n}\n\nexport const getNewStateToAdd = (sprites, transitions)=> {\n  const newState = [];\n\n  for (const sprite of sprites) {\n    for (const transition of transitions) {\n      const [left, right] = transition;\n\n      if (matches(left)(sprite)) {\n        // Add new sprite + give it a unique ID\n        newState.push({\n          ...right,\n          id: uniqid(),\n          position: addVectors(sprite.position, getDirectionOffset(right.createNew.direction)),\n          createNew: undefined\n        });\n      }\n    }\n  }\n\n  return newState;\n}\n\nexport const addNewState = (sprites, newState)=> {\n  return [\n    ...sprites,\n    ...newState\n  ]\n}\n\n// custom merge rules\n// const mergeCustomizer = (objValue, srcValue)=> {\n//   if (isNumber(objValue)) {\n//     return objValue + srcValue;\n//   }\n// }\n\nexport const getStateTransitions = (rules, sprites)=> {\n  if (rules.length === 0) {\n    return []\n  }\n\n  const transitions = {}\n  for (const sprite of sprites) {\n    for (const rule of rules) {\n      const [left, right] = rule;\n      if (matches(left)(sprite)) {\n        if (!transitions[sprite.id]) {\n          transitions[sprite.id] = []\n        }\n        \n        transitions[sprite.id].push(right)\n      }\n    }\n  }\n\n  return transitions\n};\n\nexport const applyStateTransitions = (transitions, sprites)=> {\n  return sprites.map((sprite)=> {\n    const newStates = transitions[sprite.id]\n    if (newStates) {\n      let result = {...sprite}\n      for (const state of newStates) {\n        result = mergeWith(sprite, state)\n      }\n\n      return result\n    }\n\n    return sprite\n  })\n};\n\nexport const isAlive = (sprite)=> !sprite.dead;\nexport const isCreateNewState = (rule)=> {\n  const [, right] = rule;\n  return right.createNew !== undefined;\n};\n\nexport const flashDead = (sprite)=> {\n  if (!sprite.dead) {\n    return sprite\n  }\n\n  return {\n    ...sprite,\n    // color: '#ffffff'\n    flash: true\n  }\n}\n\nexport const flagDeadForRemoval = (sprite)=> {\n  if (!sprite.dead) {\n    return sprite\n  }\n\n  return {\n    ...sprite,\n    remove: true\n  }\n}","import {createNewSprite, trimBrackets} from './state.js'\nimport {flatten} from 'lodash'\nimport {TILE_SIZE} from '../Game/constants.js'\nimport uniqid from 'uniqid'\nimport {ruleStringToState, collisionRuleStringToState, isCreateNewState} from '../util/state.js'\n\nexport const isCollisionRule = (line)=>\n  line.includes('|') || line.includes(' >') || line.includes(' <')\nexport const isRule = (line)=> line.includes('->') && !isCollisionRule(line)\nexport const isLevel = (line)=> line.match(/#.+#/g)\nexport const isVariable = (line)=> line.includes('=') && !line.includes(' or ')\nexport const isMultiVariable = (line)=> line.includes('=') && line.includes(' or ')\nexport const isObject = (line)=> line.match(/=[ ]{0,1}\\{/g)\nexport const isList = (line)=> line.match(/=[ ]{0,1}\\[/g)\nexport const isComment = (line)=> line.match(/\\/\\/.*/)\n\nexport const parseVariables = (code)=> {\n  let variables = {}\n\n  code.split('\\n')\n    .filter(isVariable)\n    .forEach((line)=> {\n      const [letter, name] = line.split('=').map((str)=> str.trim());\n      // this is a function simply to keep it the same as the multiVariable random getName function\n      // even though it always returns the same name\n      variables[letter] = ()=> {\n        return name\n      }\n    });\n\n  return variables\n};\n\nexport const parseMultiVariables = (code)=> {\n  let variables = {}\n\n  code.split('\\n')\n    .filter(isMultiVariable)\n    .forEach((line)=> {\n      const [letter, right] = line.split('=').map((str)=> str.trim());\n      const names = right.split(' or ')\n      // this is a function to allow returning a random name in the case of:\n      // G = Goomba or Tree or Brick\n      variables[letter] = ()=> {\n        const randIndex = Math.floor(Math.random() * names.length)\n        return names[randIndex]\n      }\n    });\n\n  return variables\n};\n\nconst removeLevelEdges = (lines)=> (\n  lines.slice(1, -1).map((line)=> line.slice(1, -1))\n);\n\nexport const parseLevel = (code)=> (\n  code.split('\\n').filter(isLevel) |> removeLevelEdges\n);\n\nexport const parseNames = (code)=> {\n  const lines = code.split('\\n').filter(isVariable);\n  const names = lines.map((line)=> {\n    const [, right] = line.split(' = ');\n    const words = right.split(' or ');\n    \n    return words;\n  });\n\n  return flatten(names);\n};\n\n/*\nTakes a variable declaration line as input\nReturns an object with key as variable name and value as list containing the states/s\nfor that variable\nVariable example:\n  'RIGHTIO: { velocity: { x: 1 } }'\n  {RIGHTIO: ['velocity: { x: 1 }']}\nList example:\n  'MY_LIST = [ Goomba Player Squid ]'\n  {MY_LIST: ['Goomba', 'Player', 'Squid']}\n\n*/\nexport const parseObjects = (code)=> {\n  const lines = code.split('\\n').filter(isObject)\n\n  let results = {}\n  for (const line of lines) {\n    const [name, expansion] = line.split(' = ')\n    \n    results[name] = [trimBrackets(expansion)]\n  }\n\n  return results\n}\n\nexport const parseLists = (code)=> {\n  const lines = code.split('\\n').filter(isList)\n\n  let results = {}\n  for (const line of lines) {\n    const [name, list] = line.split(' = ')\n    const expansions = trimBrackets(list).split(' ')\n    \n    results[name] = expansions\n  }\n\n  return results\n}\n\nexport const getLevelDimensions = (level)=> {\n  const width_in_tiles = level[0].length;\n  const height_in_tiles = level.length;\n  \n  return [width_in_tiles, height_in_tiles];\n}\n\nexport const parseSprites = (level, legend)=> {\n  const sprites = [];\n  level.map((line, row)=> line.split('').forEach((char, col)=> {\n    const getName = legend[char];\n    if (getName && getName() !== 'Empty') {\n      const name = getName()\n      const x = col * TILE_SIZE;\n      const y = row * TILE_SIZE;\n\n      sprites.push(\n        {\n          id: uniqid(),\n          ...createNewSprite(name, x, y)\n        }\n      );\n    }\n  }));\n\n  return sprites;\n};\n\nexport const standardExpansions = {\n  ALL: ['UP', 'DOWN', 'LEFT', 'RIGHT'],\n  MOVE: ['UP', 'DOWN', 'LEFT', 'RIGHT'],\n  SLOW_MOVE: ['SLOW_UP', 'SLOW_DOWN', 'SLOW_LEFT', 'SLOW_RIGHT'],\n  HORIZONTAL: ['LEFT', 'RIGHT'],\n  VERTICAL: ['UP', 'DOWN']\n}\n\n// replaces all occurrances of a word in a string with the given word\nconst replaceWord = (line, word, newWord)=> {\n  const newLine = line.replace(word, newWord)\n\n  // if more occurances of the word, then run replaceWord again\n  if (newLine.includes(word)) {\n    return replaceWord(newLine, word, newWord)\n  }\n\n  return newLine\n}\n\n/*\ntakes a single rule and expands it into several\nEg:\n  ALL [Player] -> [Player]\nBecomes:\n  UP [Player] -> [Player]\n  DOWN [Player] -> [Player]\n  LEFT [Player] -> [Player]\n  RIGHT [Player] -> [Player]\n */\nconst expandRule = (line, expansions)=> {\n  const lines = []\n  \n  for (const [key, words] of Object.entries(expansions)) {\n    if (line.includes(key)) {\n      for (const word of words) {\n        lines.push(\n          replaceWord(line, key, word)\n        );\n      }\n\n      // Return early once one keyword is dealt with\n      return lines;\n      /*\n      It's important to return early here once a keyword is found to prevent\n      this function from dealing with more than one keyword per execution\n      For example if a line contains both ALL and HORIZONTAL\n      Only one keyword can be dealt with per pass, else we end up with an output like:\n      UP [ _ ] -> [ HORIZONTAL ]\n      DOWN [ _ ] -> [ HORIZONTAL ]\n      LEFT [ _ ] -> [ HORIZONTAL ]\n      RIGHT [ _ ] -> [ HORIZONTAL ]\n      ALL [ _ ] -> [ LEFT ]\n      ALL [ _ ] -> [ RIGHT ]\n      Once the above expanded again, we would end up with a bunch of duplicate rules\n      */\n    }\n  }\n\n  return lines;\n}\n\nconst isExpandable = (line, expansions)=> {\n  for (const key of Object.keys(expansions)) {\n    if (line.includes(key)) {\n      return true\n    }\n  }\n\n  return false\n}\n\nexport const expandRules = (lines, expansions)=> {\n  const notExpandable = lines.filter((line)=> !isExpandable(line, expansions))\n  const expanded = flatten(\n    lines.filter((line)=> isExpandable(line, expansions))\n      .map((line)=> expandRule(line, expansions))\n  )\n\n  if (expanded.length === 0) {\n    // fully expanded, stop recursing\n    return lines\n  }\n  \n  return [\n    ...notExpandable,\n    ...expandRules(expanded, expansions)\n  ]\n}\n\n// If no direction given, then append 'ALL'. Otherwise use the given direction ('UP', 'DOWN', etc)\nexport const addImplicitKeywords = (line) => {\n  const [firstWord] = line.split('{');\n  \n  let appendedLine = line;\n  if (firstWord === '') {\n    appendedLine = line.replace('{', 'ALL {');\n  }\n\n  return appendedLine;\n}\n\nexport const parseRules = (code, names, variables)=> {\n  const customExpansions = variables\n  const expansions = {...customExpansions, ...standardExpansions}\n  \n  const regularRules = code\n    .split('\\n')\n    .filter(isRule)\n    |> ((ruleStrings)=> expandRules(ruleStrings, expansions))\n    |> ((ruleStrings)=> ruleStrings.map((string)=> ruleStringToState(string, names)))\n\n  const collisionRules = code\n    .split('\\n')\n    .filter(isCollisionRule)\n    .map(addImplicitKeywords)\n    |> ((ruleStrings)=> expandRules(ruleStrings, expansions))\n    |> ((ruleStrings)=> ruleStrings.map((string)=> collisionRuleStringToState(string, names)))\n    |> flatten\n  \n  // separate the collisionRules into 2 groups: \n  // those that will spawn new state\n  // and those that will modify existing state\n  const collisionCreate = collisionRules.filter(isCreateNewState);\n  const collisionModify = collisionRules.filter((rule)=> !isCreateNewState(rule));\n\n  return {\n    modify: [...regularRules, ...collisionModify],\n    create: collisionCreate\n  }\n}","import {\n  TILE_SIZE,\n  TOP, BOTTOM, LEFT, RIGHT\n} from './constants.js'\n\nexport const roundToPixels = (sprite)=> ({\n  ...sprite,\n  position: {\n    x: Math.round(sprite.position.x),\n    y: Math.round(sprite.position.y),\n  }\n});\n\nconst getEdges = (sprite)=> ({\n  top: sprite.position.y,\n  bottom: sprite.position.y + TILE_SIZE,\n  left: sprite.position.x,\n  right: sprite.position.x + TILE_SIZE\n});\n\nconst isOverlapping = (spriteA, spriteB)=> {\n  const a = getEdges(spriteA);\n  const b = getEdges(spriteB);\n  \n  return (\n    a.bottom > b.top &&\n    a.top < b.bottom &&\n    a.right > b.left &&\n    a.left < b.right\n  );\n};\n\nconst getPointsForSide = (side, sprite)=> {\n  // INSET is to prevent situations such as both TOP and LEFT/RIGHT colliding when 2 sprites are standing\n  // next to each other.\n  // It's not ideal because it means you do things like stand on a sprite just on the very outmost edge\n  // without triggering any UP DOWN collisions.\n  const INSET = 5;\n\n  if (side === LEFT) {\n    return [\n      {x: sprite.position.x, y: sprite.position.y + INSET},\n      {x: sprite.position.x, y: sprite.position.y + TILE_SIZE - INSET}\n    ]\n  }\n  if (side === RIGHT) {\n    return [\n      {x: sprite.position.x + TILE_SIZE, y: sprite.position.y + INSET},\n      {x: sprite.position.x + TILE_SIZE, y: sprite.position.y + TILE_SIZE - INSET}\n    ]\n  }\n  if (side === TOP) {\n    return [\n      {x: sprite.position.x + INSET, y: sprite.position.y},\n      {x: sprite.position.x + TILE_SIZE - INSET, y: sprite.position.y}\n    ]\n  }\n  if (side === BOTTOM) {\n    return [\n      {x: sprite.position.x + INSET, y: sprite.position.y + TILE_SIZE},\n      {x: sprite.position.x + TILE_SIZE - INSET, y: sprite.position.y + TILE_SIZE}\n    ]\n  }\n}\n\nconst overlapsPoint = (point, spriteB, padding = 0)=> {\n  const {x, y} = point;\n  const {top, bottom, left, right} = getEdges(spriteB);\n  return (\n    y > top - padding &&\n    y < bottom + padding &&\n    x > left - padding &&\n    x < right + padding\n  );\n}\n\nconst overlapsSide = (side, spriteA, spriteB)=> {\n  const points = getPointsForSide(side, spriteA);\n\n  for (const point of points) {\n    if (overlapsPoint(point, spriteB, 1)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nconst getCollidedEdges = (spriteA, spriteB)=> {\n  const prevEdgesA = getEdges({position: {...spriteA.prevPosition}});\n  const prevEdgesB = getEdges({position: {...spriteB.prevPosition}});\n  const collidedEdges = {top: false, bottom: false, left: false, right: false};\n\n  // by checking if an edge was not overlapping last frame but is this frame\n  // we can see which edge is colliding\n  if (prevEdgesA.top >= prevEdgesB.bottom) {\n    collidedEdges[TOP] = true;\n  }\n  else if (prevEdgesA.bottom <= prevEdgesB.top) {\n    collidedEdges[BOTTOM] = true;\n  }\n\n  if (prevEdgesA.left >= prevEdgesB.right) {\n    collidedEdges[LEFT] = true;\n  }\n  else if (prevEdgesA.right <= prevEdgesB.left) {\n    collidedEdges[RIGHT] = true;\n  }\n\n  return collidedEdges;\n}\n\nconst getAxisFromEdge = (edge)=> {\n  const edgeAxisMap = {\n    left: 'x',\n    right: 'x',\n    top: 'y',\n    bottom: 'y'\n  };\n\n  return edgeAxisMap[edge];\n}\n\nconst getSeparatedState = (edgeA, spriteA, spriteB)=> {\n  const edgesB = getEdges(spriteB);\n  const velocity = {...spriteA.velocity, [getAxisFromEdge(edgeA)]: 0};\n\n  let position = {...spriteA.position};\n  if (edgeA === TOP) {\n    position.y = edgesB[BOTTOM];\n  }\n  else if (edgeA === BOTTOM) {\n    position.y = edgesB[TOP] - TILE_SIZE;\n  }\n  else if (edgeA === LEFT) {\n    position.x = edgesB[RIGHT];\n  }\n  else if (edgeA === RIGHT) {\n    position.x = edgesB[LEFT] - TILE_SIZE;\n  }\n\n  return {position, velocity};\n}\n\nexport const updateSpriteCollidingState = (spriteA, sprites, width, height)=> {\n  if (spriteA.static) {\n    return spriteA;\n  }\n\n  let colliding = {...spriteA.colliding};\n\n  // sprites\n  for (const spriteB of sprites) {\n    if (spriteA.id === spriteB.id) {\n      continue;\n    }\n\n    for (const edge of [TOP, BOTTOM, LEFT, RIGHT]) {\n      if (overlapsSide(edge, spriteA, spriteB)) {\n        \n        const collidingSprite = {...spriteB}\n        // prevent recursion of colliding state by removing the colliding state from spriteB\n        // otherwise it can recurse forever: state.colliding.bottom.colliding.top.colliding.bottom...\n        collidingSprite.colliding = undefined\n\n        colliding[edge].push(collidingSprite)\n      }\n    }\n  }\n\n  // walls\n  const padding = 1;\n  if (spriteA.position.x < 0 + padding) {\n    colliding[LEFT].push({name: 'Wall'});\n  }\n  if (spriteA.position.x > width - TILE_SIZE - padding) {\n    colliding[RIGHT].push({name: 'Wall'});\n  }\n  if (spriteA.position.y < 0 + padding) {\n    colliding[TOP].push({name: 'Wall'});\n  }\n  if (spriteA.position.y > height - TILE_SIZE - padding) {\n    colliding[BOTTOM].push({name: 'Wall'});\n  }\n\n  return {...spriteA, colliding};\n};\n\nexport const updateSpritePositioningState = (spriteA, sprites)=> {\n  if (spriteA.static) {\n    return spriteA;\n  }\n\n  let positioning = {...spriteA.positioning};\n\n  // sprites\n  for (const spriteB of sprites) {\n    if (spriteA.id === spriteB.id) {\n      continue;\n    }\n\n    // prevent recursion of positioning state by removing the positioning state from spriteB\n    // otherwise it can recurse forever: state.positioning.bottom.positioning.top.positioning.bottom...\n    const removePositioningState = (spriteB)=> ({\n      ...spriteB, positioning: undefined\n    })\n\n    if (spriteA.position.x < spriteB.position.x) {\n      positioning.right.push(removePositioningState(spriteB))\n    }\n    else {\n      positioning.left.push(removePositioningState(spriteB))\n    }\n\n    if (spriteA.position.y < spriteB.position.y) {\n      positioning.bottom.push(removePositioningState(spriteB))\n    }\n    else {\n      positioning.top.push(removePositioningState(spriteB))\n    }\n  }\n\n  return {...spriteA, positioning};\n};\n\nexport const applySpriteCollisions = (spriteA, sprites)=> {\n  if (spriteA.static) {\n    return spriteA;\n  }\n\n  for (const spriteB of sprites) {\n    if (spriteA.id === spriteB.id) {\n      continue;\n    }\n\n    if (isOverlapping(spriteA, spriteB)) {    \n      const collidedEdges = getCollidedEdges(spriteA, spriteB);\n      let newSpriteA = {...spriteA};\n      \n      if (collidedEdges[TOP]) {\n        newSpriteA = {\n          ...newSpriteA,\n          ...getSeparatedState(TOP, spriteA, spriteB)\n        }\n      }\n      else if (collidedEdges[BOTTOM]) {\n        newSpriteA = {\n          ...newSpriteA,\n          ...getSeparatedState(BOTTOM, spriteA, spriteB)\n        }\n      }\n\n      // Check if overlap has been resolved before resolving horizontal collisions\n      // This is a cheap trick to prevent sprite from catching on the corners\n      // of adjacent tiles (vertical is resolved first & the horizontal is avoided)\n      if (isOverlapping(newSpriteA, spriteB)) {\n        if (collidedEdges[LEFT]) {\n          newSpriteA = {\n            ...newSpriteA,\n            ...getSeparatedState(LEFT, spriteA, spriteB)\n          }\n        }\n        else if (collidedEdges[RIGHT]) {\n          newSpriteA = {\n            ...newSpriteA,\n            ...getSeparatedState(RIGHT, spriteA, spriteB)\n          }\n        }\n      }\n      \n      return newSpriteA;\n    }\n  }\n\n  return spriteA;\n};\n\nexport const applyWallCollisions = (sprite, width, height)=> {\n  if (sprite.static) {\n    return sprite\n  }\n\n  const newPosition = {...sprite.position}\n  const newVelocity = {...sprite.velocity}\n\n  if (sprite.position.y > height - TILE_SIZE) {\n    newPosition.y = height - TILE_SIZE\n    newVelocity.y = 0\n  }\n\n  if (sprite.position.y < 0) {\n    newPosition.y = 0\n    newVelocity.y = 0\n  }\n\n  if (sprite.position.x > width - TILE_SIZE) {\n    newPosition.x = width - TILE_SIZE\n    newVelocity.x = 0\n  }\n\n  if (sprite.position.x < 0) {\n    newPosition.x = 0\n    newVelocity.x = 0\n  }\n  \n  return {\n    ...sprite,\n    position: newPosition,\n    velocity: newVelocity\n  }\n}\n\nexport const storePreviousPosition = (sprite)=> ({\n  ...sprite,\n  prevPosition: {...sprite.position}\n});\n\nexport const applyAcceleration = (sprite)=> {\n  const {velocity, maxVelocity, acceleration} = sprite;\n  return {\n    ...sprite,\n    velocity: {\n      x: Math.max(Math.min(velocity.x + acceleration.x, maxVelocity.x), -maxVelocity.x),\n      y: Math.max(Math.min(velocity.y + acceleration.y, maxVelocity.y), -maxVelocity.y)\n    },\n    acceleration: {x: 0, y: 0}\n  }\n};\n\nexport const applyVelocity = (sprite)=> ({\n  ...sprite,\n  position: {\n    x: sprite.position.x + sprite.velocity.x,\n    y: sprite.position.y + sprite.velocity.y\n  }\n});\n\nexport const resetColliding = (sprite)=> ({\n  ...sprite,\n  colliding: {top: [], bottom: [], left: [], right: []},\n\n});\n\nexport const resetPositioning = (sprite)=> ({\n  ...sprite,\n  positioning: {top: [], bottom: [], left: [], right: []},\n\n});\n\nconst snapNearZero = (num)=> Math.abs(num) > 0.0001 ? num : 0\n\nexport const applyFriction = (sprite)=> {\n  const x = sprite.velocity.x * (1 - sprite.friction)\n  const y = sprite.velocity.y * (1 - sprite.friction)\n  \n  // console.log(snapNearZero(x))\n  // console.log(snapNearZero(y))\n\n  return {\n    ...sprite,\n    velocity: {\n      x: snapNearZero(x),\n      y: snapNearZero(y),\n    }\n  }\n};","import {parseRules, parseSprites, parseVariables, parseMultiVariables, parseLevel, parseNames,\n  parseObjects, parseLists, getLevelDimensions} from '../util/parse.js'\nimport {getStateTransitions, isAlive, getNewStateToAdd, addNewState,\n  applyStateTransitions, flagDeadForRemoval, flashDead} from '../util/state.js'\nimport {storePreviousPosition, applyAcceleration, applyVelocity, applyFriction,\n  updateSpriteCollidingState, updateSpritePositioningState,\n  applySpriteCollisions, applyWallCollisions, roundToPixels,\n  resetColliding, resetPositioning\n} from './physics'\nimport {TILE_SIZE} from '../Game/constants.js'\nimport Plain from 'slate-plain-serializer'\nimport uniqid from 'uniqid'\n\nconst defaultState = {\n  currentView: 'game',\n  sprites: [],\n  effects: [],\n  names: {},\n  width_in_tiles: 0,\n  height_in_tiles: 0,\n  debug: false,\n  imageMap: {},\n  rules: {\n    regular: [],\n    create: [],\n    modify: []\n  },\n  stateTransitions: {\n    regular: {}\n  },\n  availableImages: ['Player', 'Brick', 'QuestionBrick', 'Spike', 'Goomba', 'GoombaRed'],\n  freezeFrames: 0,\n  shake: false\n}\n\nconst arrayToObject = (array) =>\n   array.reduce((obj, item) => {\n     obj[item] = true\n     return obj\n   }, {})\n\nconst removeComments = (code)=>\n  code.split('\\n').filter(\n    (line)=> !line.includes('//')\n  ).join('\\n')\n\nconst trimWhitespace = (code)=> {\n  return code.split('\\n')\n    .map((line)=> line.trim())\n    .join('\\n')\n}\n\nconst getNextView = (winners, losers)=> {\n  if (winners.length > 0 || losers.length > 0) {\n    return 'menu'\n  } \n\n  return null\n}\n\nconst gameReducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'TOGGLE_DEBUG': {\n      return {\n        ...state,\n        debug: !state.debug\n      }\n    }\n    \n    case 'SET_IMAGE': {\n      const imageMap = {...state.imageMap}\n      const {variableName, imageName} = action\n      imageMap[variableName] = {type: 'image', imageName}\n      \n      return {\n        ...state,\n        imageMap\n      }\n    }\n    \n    case 'SET_LETTER_IMAGE': {\n      const imageMap = {...state.imageMap}\n      const {variableName, letter} = action\n      imageMap[variableName] = {type: 'ascii', letter}\n      // null means the user intended to use ascii\n      // whereas undefined is a lack of choice - we do not know what the user wants\n      // So we can switch on undefined in places to show default images for some\n      // sprites: Player, Goomba etc\n      \n      return {\n        ...state,\n        imageMap\n      }\n    }\n    \n    case 'COMPILE': {\n      try {\n        const code = action.code |> Plain.serialize |> removeComments |> trimWhitespace\n        const level = code |> parseLevel\n        const variables = code |> parseVariables\n        const multiVariables = code |> parseMultiVariables\n\n        let newImageMap = {...state.imageMap}\n        for (const [letter, getName] of Object.entries(variables)) {\n          const name = getName()\n          // Reset ascii characters on compile, because user may have changed the Letter but kept the name\n          // We don't want to reset for images, because it's annoying to have that reset on compile\n          if (!newImageMap[name] || newImageMap[name].type === 'ascii') {\n            newImageMap[name] = {type: 'ascii', letter}\n          }\n        }\n        \n        const sprites = parseSprites(level, {...variables, ...multiVariables})\n    \n        // Names is the variables mapped to have the values as keys. Used for fast name lookup.\n        // this used to use the variables before the random features were added.\n        // For this to work though, names needs to include all possible names, including those that might\n        // not be rendered onto the map the first time it is loaded.\n        // I suppose later on this should also include things spawned within rules that may not also\n        // appear in the variables.\n        // Ideally, I could refactor out this names object entirely. It seems like that should be possible.\n        const namesArr = code |> parseNames\n        const names = arrayToObject(namesArr)\n        \n        const objects = code |> parseObjects\n        const lists = code |> parseLists\n\n        // A rule consists of a before and an after state\n        const rules = parseRules(\n          code,\n          names,\n          {...objects, ...lists}\n        )\n\n        const [width_in_tiles, height_in_tiles] = getLevelDimensions(level);\n\n        return {\n          ...defaultState,\n          sprites,\n          rules,\n          width: width_in_tiles * TILE_SIZE,\n          height: height_in_tiles * TILE_SIZE,\n          names,\n          imageMap: newImageMap\n        }\n      }\n      catch(err) {\n        console.error(err);\n        return {\n          ...defaultState,\n          error: 'Compilation error 😞'\n        }\n      }\n    }\n\n    case 'UPDATE': {\n      if (state.currentView !== 'game') {\n        return state;\n      }\n\n      // Decrement freezeFrames\n      if (state.freezeFrames > 0) {\n        return {\n          ...state,\n          freezeFrames: state.freezeFrames - 1\n        }\n      }\n\n      const spritesToKeep = state.sprites.filter((sprite)=> !sprite.remove)\n      const effectsToKeep = state.effects.filter((effect)=>\n          effect.progress < effect.duration\n        )\n    \n      // Freeze frames and add effects if something has died\n      const dead = spritesToKeep.filter((sprite)=> isAlive(sprite) === false)\n    \n      if (dead.length > 0) {\n        const newSprites = spritesToKeep\n          |> ((sprites)=> sprites.map(flashDead))\n          |> ((sprites)=> sprites.map(flagDeadForRemoval))\n\n        const newEffects = dead.map((deadSprite)=> ({\n          name: 'explosion',\n          duration: 10, // frames\n          progress: 0, // removed once progress reaches duration\n          id: uniqid(),\n          position: deadSprite.position\n        }))\n\n        return {\n          ...state,\n          sprites: newSprites,\n          freezeFrames: 5,\n          shake: true,\n          effects: [...newEffects, ...effectsToKeep]\n        }\n      }\n\n      const previousState = {...state};\n      const stateToAdd = getNewStateToAdd(spritesToKeep, state.rules.create)\n      \n      const stateTransitions = {\n        modify: getStateTransitions(state.rules.modify, spritesToKeep),\n        create: getStateTransitions(state.rules.create, spritesToKeep),\n      }\n\n      const winners = spritesToKeep.filter((sprite)=> Boolean(sprite.win))\n      const losers = spritesToKeep.filter((sprite)=> Boolean(sprite.lose))\n\n      // Dead sprites aren't removed right away, instead they are flashed\n      // white then flagged for removal.\n      // This allows for them to stay on screen in their flashed state for\n      // the duration of the freezeFrames\n\n      const updatedSprites = spritesToKeep\n        |> ((sprites)=> addNewState(sprites, stateToAdd))\n        |> ((sprites)=> sprites.map(resetColliding))\n        |> ((sprites)=> sprites.map(resetPositioning))\n        |> ((sprites)=> sprites.map((sprite)=> updateSpriteCollidingState(\n          sprite, spritesToKeep, state.width, state.height\n        )))\n        |> ((sprites)=> sprites.map((sprite)=> updateSpritePositioningState(\n          sprite, spritesToKeep\n        )))\n        |> ((sprites)=> sprites.map(storePreviousPosition))\n        |> ((sprites)=> sprites.map(applyFriction))\n        |> ((sprites)=> sprites.map(applyAcceleration))\n        |> ((sprites)=> sprites.map(applyVelocity))\n        |> ((sprites)=> sprites.map((sprite)=> applySpriteCollisions(sprite, spritesToKeep, previousState)))\n        |> ((sprites)=> sprites.map((sprite)=> applySpriteCollisions(sprite, spritesToKeep, previousState)))\n        |> ((sprites)=> sprites.map((sprite)=> applySpriteCollisions(sprite, spritesToKeep, previousState)))\n        |> ((sprites)=> sprites.map((sprite)=> applyWallCollisions(sprite, state.width, state.height)))\n        |> ((sprites)=> sprites.map(roundToPixels))\n        |> ((sprites)=> applyStateTransitions(stateTransitions.modify, sprites))\n        \n      const updatedEffects = effectsToKeep.map((effect)=> ({\n        ...effect,\n        progress: effect.progress + 1\n      }))\n\n      return {\n          ...state,\n          sprites: updatedSprites,\n          stateTransitions,\n          currentView: getNextView(winners, losers) || state.currentView,\n          shake: false,\n          effects: updatedEffects\n      }\n    }\n\n    case 'SET_INPUT': {\n      return {\n        ...state,\n        sprites: state.sprites.map(\n          (sprite)=> ({...sprite, inputs: {...sprite.inputs, [action.input]: true}})\n        )\n      };\n    }\n\n    case 'CANCEL_INPUT': {\n      return {\n        ...state,\n        sprites: state.sprites.map(\n          (sprite)=> {\n            const newInputs = {...sprite.inputs};\n            newInputs[action.input] = undefined;\n            return {...sprite, inputs: newInputs}\n          }\n        )\n      };\n    }\n\n    default: {\n      return state\n    }\n  }\n}\n\nexport default gameReducer","\nconst initialTileSets = [\n  [\n    [0, 1, 1, 0,],\n    [1, 1, 1, 1,],\n    [1, 1, 1, 1,],\n    [0, 1, 1, 0,]\n  ],\n  [\n    [0, 1, 1, 0,],\n    [1, 0, 0, 1,],\n    [1, 0, 0, 1,],\n    [0, 1, 1, 0,]\n  ]\n]\n\nconst tileImages = ['tile0', 'tile1', 'tile2', 'tile3']\n\nconst rasterise = (tileSet)=> {\n  const width = 128\n  const height = 128\n\n  const canvas = document.createElement('canvas')\n  canvas.width = width\n  canvas.height = height\n  \n  let ctx = canvas.getContext('2d')\n  tileSet.forEach((row, rowIndex)=> (\n    tileSet[rowIndex].forEach((col, colIndex)=> {\n      const tileImage = tileImages[tileSet[rowIndex][colIndex]]\n      const image = new Image(32, 32);\n      image.onload = function() {\n          console.log('loaded')\n          ctx.drawImage(image, col * 32, row * 32);\n      };\n      image.src = `../Game/images/tiles/${tileImage}.png`\n      // the src needs to be set after the onload because apparently\n      // sometimes the src can be loaded instantly (eg: if the image is cached)\n    })\n  ))\n\n  // produce png from canvas\n  var dataUri = canvas.toDataURL()\n\n  return dataUri\n}\n\nconst defaultState = {\n  tileSets: initialTileSets,\n  open: false,\n  images: initialTileSets.map((tileSet)=> rasterise(tileSet)),\n  tileImages\n}\n\nconst spriteEditorReducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'spriteEditor/SET_OPEN':\n      return {\n        ...state,\n        open: action.open\n      }\n    case 'spriteEditor/UPDATE_TILESETS':\n      return {\n        ...state,\n        tileSets: action.tileSets,\n        images: action.tileSets.map((tileSet)=> rasterise(tileSet))\n      }\n    default:\n      return state\n  }\n}\n\nexport default spriteEditorReducer","import {combineReducers} from 'redux';\nimport appReducer from './App/reducer.js';\nimport gameReducer from './Game/reducer.js';\nimport spriteEditorReducer from './SpriteEditor/reducer.js';\n\nexport default combineReducers({\n  app: appReducer,\n  game: gameReducer,\n  spriteEditor: spriteEditorReducer\n})\n","\nimport * as firebase from 'firebase';\nimport 'firebase/firestore' // Required for side-effects\n\nconst config = {\n  apiKey: \"AIzaSyBHLFHOl9TSm557CTNB0IARouvjID9eVmA\",\n  authDomain: \"micro-gg.firebaseapp.com\",\n  databaseURL: \"https://micro-gg.firebaseio.com\",\n  projectId: \"micro-gg\",\n  storageBucket: \"micro-gg.appspot.com\",\n  messagingSenderId: \"53073229739\"\n}\n\nconst firebaseInitialized = firebase.initializeApp(config)\n\nfirebase.firestore().enablePersistence()\n  .catch(function(err) {\n      if (err.code === 'failed-precondition') {\n          // Multiple tabs open, persistence can only be enabled\n          // in one tab at a a time.\n          // ...\n      } else if (err.code === 'unimplemented') {\n          // The current browser does not support all of the\n          // features required to enable persistence\n          // ...\n      }\n  });\n// Subsequent queries will use persistence, if it was enabled successfully\n\nexport default firebaseInitialized","import React from 'react';\nimport './debug.scss';\n\nexport const DebugColliding = ({sprite})=> (\n  <div className='debug-colliding'>\n    {Object.entries(sprite.colliding).map(([key, value], index)=> \n      <p className={`number ${key} ${value.length > 0 && 'active'}`}>\n        {value.length}\n      </p>\n    )}\n  </div>\n)","import React from 'react';\nimport styled from 'styled-components'\n\nconst random = (seed)=> {\n  var x = Math.sin(seed++) * 10000;\n  return x - Math.floor(x);\n}\n\nconst randomColor = (letter)=> {\n  const seed = letter.codePointAt(0)\n\n  const [h, s, l] = [\n    random(seed) * 255,           // 0 to 255\n    random(seed + 1) * 35 + 65,   // 65% to 100%\n    random(seed + 2) * 20 + 40    // 40% to 60%\n  ]\n\n  return `hsl(${h}, ${s}%, ${l}%)`\n}\n\nconst LetterImageContainer = styled.div`\n  display: inline-block;\n  text-align: center;\n  width: 32px;\n  height: 32px;\n  border-radius: 0.3rem;\n  color: black;\n  background-color: ${props => randomColor(props.letter)};\n  \n  p {\n    display: inline;\n    font-weight: 800;\n    font-size: 1.6rem;\n    user-select: none;\n  }\n`\n\nconst LetterImage = (props)=> {\n  const {letter} = props\n\n  return (\n    <LetterImageContainer letter={letter} {...props}>\n      <p>{letter}</p>\n    </LetterImageContainer>\n  );\n}\n\nexport default LetterImage","\nexport const getImageFilename = (spriteName, imageMap, availableImages)=> {\n  // User selected image\n  if (imageMap[spriteName] && imageMap[spriteName].type === 'image' ) {\n    return imageMap[spriteName].imageName\n  }\n\n  // User selected ascii\n  if (imageMap[spriteName] && imageMap[spriteName].type === 'ascii' ) {\n    return null\n  }\n  \n  // Fallback image for certain variable names (Player, Goomba etc)\n  // A null in the imageMap means the user intentionally selected ascii, so\n  // we check for undefined here specifically\n  if (availableImages.includes(spriteName)) {\n    return spriteName\n  }\n\n  // User has made no selected and no fallback image. So falls back to ascii.\n  return null\n}","import React from 'react';\nimport {DebugColliding} from '../debug/DebugColliding.js';\nimport LetterImage from '../Image/LetterImage'\nimport {getImageFilename} from '../Image/helper'\nimport styled from 'styled-components'\nimport {TILE_SIZE} from './constants'\n\nconst SpriteContainer = styled.div.attrs(({ position, flash }) => ({\n  style: {\n    left: position.x,\n    top: position.y,\n    filter: flash ? 'brightness(2)' : 'none'\n  }\n}))`\n  position: relative;\n  width: 0;\n  height: 0;\n`;\n\nconst Inner = styled.div.attrs(({ flip, mirror, rotation }) => ({\n  style: {\n    width: `${TILE_SIZE}px`,\n    height: `${TILE_SIZE}px`,\n    // transform: `${flip && 'transform: scaleY(-1)'} ${mirror && 'transform: scaleX(-1)'} ${rotation && `transform: rotation3d(0, 0, 1, ${rotation}deg)`}`\n  transform: `\n    ${flip ? 'scaleY(-1)' : ''}\n    ${mirror ? 'scaleX(-1)' : ''}\n    ${rotation ? `rotate3d(0, 0, 1, ${rotation}deg)` : ''}\n  `\n  }\n}))`\n  width: ${TILE_SIZE}px;\n  height: ${TILE_SIZE}px;\n`;\n\nconst Sprite = ({availableImages, imageMap, sprite, debug})=> {\n  const {position, name, flash, flip, mirror, rotation} = sprite\n  const imageFilename = getImageFilename(name, imageMap, availableImages)\n\n  return <SpriteContainer\n    position={position}\n    flash={flash}\n  >\n    <Inner\n      mirror={mirror}\n      flip={flip}\n      rotation={rotation}\n    >\n      {imageFilename\n        ? <img\n            alt=''\n            src={require(`../Game/images/${imageFilename}.png`)}\n          />\n        : <LetterImage\n            letter={imageMap[name].letter}\n          />\n      }\n      {debug && <DebugColliding sprite={sprite} />}\n    </Inner>\n  </SpriteContainer>\n};\n\nexport default Sprite;\n","import React from 'react';\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  position: relative;\n  width: 0;\n  height: 0;\n  left: ${props => props.x}px;\n  top: ${props => props.y}px;\n`\n\nconst Explosion = styled.div`\n  width: 32px;\n  height: 32px;\n  outline: var(--light-color);\n  outline-width: 20px;\n  outline-style: solid;\n\n  @keyframes expand {\n    0% {\n      transform: scale(0.8);\n    }\n    100% {\n      transform: scale(2);\n      outline-width: 0px;\n    }\n  }\n\n  animation-name: expand;\n  animation-duration: ${props => props.duration}s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease-out;\n`\n\nconst Effect = ({effect})=>\n  <Container\n    x={effect.position.x}\n    y={effect.position.y}\n  >\n    <Explosion duration={effect.duration / 60} />\n  </Container>\n\nexport default Effect;\n","import React from 'react';\nimport {connect} from 'react-redux'\nimport Sprite from './Sprite.js';\nimport Effect from './Effect.js';\nimport styled, {css} from 'styled-components'\n\nconst Stage = styled.div`\n  width: ${props => props.width}px;\n  height: ${props => props.height}px;\n  background-color: var(--dark-color);\n  overflow: hidden;\n\n  ${props => props.shake && css`\n      transform: translate3d(\n        ${Math.random() * 8 - 4}px,\n        ${Math.random() * 8 - 4}px,\n        0px\n      );\n  `}\n`\n\nconst Game = ({\n  width, height, sprites, effects, imageMap, availableImages, shake, error, debug\n})=> (\n  <Stage width={width} height={height} shake={shake}>\n    {error && <p className='error' >{error}</p>}\n    {sprites.map((sprite)=>\n      <Sprite\n        key={sprite.id}\n        imageMap={imageMap}\n        availableImages={availableImages}\n        \n        // debug visualisation\n        sprite={sprite}\n        debug={debug}\n      />\n    )}\n    {effects.map((effect)=>\n      <Effect key={effect.id} effect={effect} />\n    )}\n  </Stage>\n);\n\nconst mapStateToProps = ({game})=> ({\n  width: game.width,\n  height: game.height,\n  sprites: game.sprites,\n  effects: game.effects,\n  imageMap: game.imageMap,\n  availableImages: game.availableImages,\n  shake: game.shake,\n  debug: game.debug,\n  error: game.error,\n  currentView: game.currentView\n})\n\nexport default connect(\n  mapStateToProps,\n  null\n)(Game);\n","import styled, {css} from 'styled-components'\n\nconst alpha = '22' // hex\n\nconst Button = styled.button`\n  border: none;\n  border-radius: 0.4rem;\n  text-transform: uppercase;\n  font-weight: 800;\n  font-size: 0.8rem;\n  min-width: 6rem;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  background-color: ${props => props.colors.dark};\n  color: ${props => props.colors.primary};\n  \n  &:hover {\n    opacity: 0.8;\n  }\n  \n  &:active {\n    opacity: 1.0;\n    background-color: ${props => props.colors.primary}${alpha};\n  }\n\n  &:focus {\n    outline: 0;\n  }\n\n  ${props => props.secondary && css`\n    color: ${props.colors.dark};\n    background-color: transparent;\n    border: solid 2px ${props.colors.dark};\n\n    &:hover {\n      color: ${props => props.colors.primary};\n      background-color: ${props => props.colors.dark};\n    }\n  `}\n  \n  ${props => props.inverted && css`\n    color: ${props.colors.dark};\n    background-color: ${props => props.colors.primary};\n  `}\n`\n\nexport default Button\n","import React from 'react';\nimport Button from '../components/Button'\nimport './Menu.scss';\n\nconst text = {\n  win: 'Win.',\n  lose: 'Lose.',\n}\n\nexport const Menu = ({width, height, onPlay, colors, currentView})=> (\n  <div className='menu' style={{width, height}}>\n    <h1 className='title'>{text[currentView]}</h1>\n    <Button colors={colors} inverted onClick={onPlay}>\n      Play again\n    </Button>\n  </div>\n);","import React, {useEffect} from 'react';\nimport {connect} from 'react-redux'\n\nconst Loop = ({onTimeChange})=> {\n  // recursively calls itself once per frame\n  let request;\n  const advanceFrame = ()=> {\n    onTimeChange();\n    request = requestAnimationFrame(()=> advanceFrame());\n  }\n\n  useEffect(() => {\n    request = requestAnimationFrame(()=> advanceFrame());\n    return function cleanup() {\n      cancelAnimationFrame(request);\n    }\n  }, []);\n\n  return <p></p>;\n};\n\nconst mapDispatchToProps = (dispatch)=> ({\n  onTimeChange: ()=> {\n    dispatch({\n      type: 'UPDATE'\n    });\n  }\n});\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(Loop);\n","import React, {useState} from 'react'\nimport {connect} from 'react-redux'\nimport LetterImage from '../Image/LetterImage'\nimport {getImageFilename} from '../Image/helper'\n\nimport styled from 'styled-components'\n\nconst PickerContainer = styled.div`\n  position: absolute;\n  display: inline-flex;\n  cursor: pointer;\n  height: 0;\n`\n\nconst PickerBox = styled.div`\n  display: flex;\n  background-color: black;\n  border: solid 1px #555;\n  border-radius: .5rem;\n  padding: 0.5rem;\n  margin-top: -1rem;\n  z-index: 1;\n  height: 32px;\n\n  div, img {\n    margin-right: 0.5rem;\n\n    &:last-child {\n      margin-right: 0\n    }\n  }\n`\n\nconst ImagePicker = ({letter, variableName, imageMap, availableImages, onSetImage, onSetLetterImage})=> {\n  const imageFilename = getImageFilename(variableName, imageMap, availableImages)\n  \n  const [open, setOpen] = useState(false)\n\n  return (\n    <PickerContainer\n      onMouseOver={()=> setOpen(true)}\n      onMouseLeave={()=> setOpen(false)}\n    >\n      {!open\n        ?\n          <div className='code-sprite'>\n            {imageFilename\n              ? <img alt='' src={require(`../Game/images/${imageFilename}.png`)} />\n              : <LetterImage letter={letter} />\n            }\n          </div>\n        : \n          <PickerBox>\n            <LetterImage\n              letter={letter}\n              onClick={()=> onSetLetterImage(variableName, letter)}\n            />\n            {availableImages.map((imageName)=> (\n              <img\n                key={imageName}\n                alt=''\n                src={require(`../Game/images/${imageName}.png`)}\n                onClick={()=> onSetImage(variableName, imageName)}\n              />\n            ))}\n          </PickerBox>\n      }\n    </PickerContainer>\n  )\n};\n\nconst mapStateToProps = ({game})=> ({\n  imageMap: game.imageMap,\n  availableImages: game.availableImages\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  onSetImage: (variableName, imageName)=> {\n    dispatch({\n      type: 'SET_IMAGE',\n      variableName,\n      imageName\n    });\n  },\n  onSetLetterImage: (variableName, letter)=> {\n    dispatch({\n      type: 'SET_LETTER_IMAGE',\n      variableName,\n      letter\n    });\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ImagePicker);\n","import React, {useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport Prism from 'prismjs';\nimport {Editor} from 'slate-react';\nimport ImagePicker from '../ImagePicker/ImagePicker.js';\n\nconst grammar = {\n  comment: /\\/\\/.*/,\n  variableRandom: [\n    {pattern: new RegExp('[^ ]{1} = (.+)or', 'i')}\n  ],\n  list: [\n    {pattern: new RegExp('.+ = [[]{1}.+[]]{1}', 'i')}\n  ],\n  variable: [\n    {pattern: new RegExp('^[^ ]{1} = (.+)', 'i')}\n  ]\n}\n\nconst getContent = (token)=> {\n  if (typeof token == 'string') {\n    return token\n  } else if (typeof token.content == 'string') {\n    return token.content\n  } else {\n    return token.content.map(getContent).join('')\n  }\n}\n\nconst decorateNode = (node, editor, next)=> {\n  const others = next() || []\n  const texts = node.getTexts().toArray()\n  const string = texts.map(t => t.text).join('\\n')\n\n  // first node will contain the text for every line\n  // exit early for that one\n  if (texts.length !== 1) {\n    return others;\n  }\n\n  const tokens = Prism.tokenize(string, grammar)\n  let decorations = []\n  let startText = texts.shift()\n  let endText = startText\n  let startOffset = 0\n  let endOffset = 0\n  let start = 0\n\n  for (const token of tokens) {\n    startText = endText\n    startOffset = endOffset\n\n    const content = getContent(token)\n    const newlines = content.split('\\n').length - 1\n    const length = content.length - newlines\n    const end = start + length\n\n    let available = startText.text.length - startOffset\n    let remaining = length\n\n    endOffset = startOffset + remaining\n\n    while (available < remaining && texts.length > 0) {\n      endText = texts.shift()\n      remaining = length - available\n      available = endText.text.length\n      endOffset = remaining\n    }\n\n    if (typeof token == 'object') {\n      decorations.push ({\n        anchor: {\n          key: startText.key,\n          offset: startOffset,\n        },\n        focus: {\n          key: endText.key,\n          offset: endOffset,\n        },\n        mark: {\n          type: token.type,\n        }\n      })\n    }\n\n    start = end\n  }\n\n  return [...others, ...decorations]\n}\n\nconst renderMark = (props, editor, next) => {\n  const {children, attributes, node} = props\n\n  switch (props.mark.type) {\n    case 'variable':\n      const [key, right] = node.text.split('=').map((str)=> str.trim())\n\n      return <span {...attributes}>\n          {children}\n          <ImagePicker letter={key} variableName={right}/>\n        </span>\n\n    case 'comment': \n      return <span className='comment' {...attributes}>{children}</span>\n    default:\n      return next()\n  }\n}\n\nconst Code = ({code, setCode, compile})=> {\n  // manually trigger code change on first load\n  useEffect(() => {\n    compile(code);\n  }, [])\n\n  return (\n    <Editor\n      className={'code'}\n      value={code}\n      onChange={({value})=> {\n        setCode(value)\n      }}\n      decorateNode={decorateNode}\n      renderMark={renderMark}\n      spellCheck={false}\n    />\n  )\n};\n\nconst mapStateToProps = ({app, game})=> ({\n  code: app.code,\n  width: game.width, \n  height: game.height\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  setCode: (code)=> {\n    dispatch({\n      type: 'UPDATE_CODE',\n      code\n    })\n  },\n  compile: (code)=> {\n    dispatch({\n      type: 'COMPILE',\n      code\n    });\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Code);\n","import React from 'react';\nimport './Tile.scss';\n\nconst getPositionStyle = (x, y)=> ({\n  position: 'relative', left: x, top: y\n});\n\nconst Tile = ({x, y, img, onClick})=> (\n  <div className='tile' style={getPositionStyle(x, y)}>\n    <img\n      src={require(`../Game/images/tiles/${img}.png`)}\n      alt=''\n      onClick={()=> onClick()}\n    />\n  </div>\n);\n\nexport default Tile;\n","import React, {useState} from 'react'\nimport {connect} from 'react-redux'\nimport Dialog from '@material-ui/core/Dialog';\nimport Tile from './Tile.js'\nimport {TILE_SIZE} from '../Game/constants.js';\nimport './SpriteEditor.scss';\n\nconst SpritePicker = ({images, tileSets, selectedTileSet, onSelect})=> (\n  <div className='image-list'>\n    {images.map((src, index)=>{\n      return (\n        <img\n          src={src}\n          alt=''\n          className={`image ${index === selectedTileSet && 'selected'}`}\n          onClick={()=> onSelect(index)}\n        />\n      )\n    })}\n  </div>\n)\n\nconst Preview = ({tiles, selectedTile, tileImages, onSelect})=> (\n  <div className='preview'>\n    {tiles.map((rowArr, row)=> (\n      rowArr.map((tileIndex, col)=> (\n        <Tile\n          img={tileImages[tileIndex]}\n          x={col * TILE_SIZE}\n          y={row * TILE_SIZE}\n          onClick={()=> onSelect(row, col, selectedTile)}\n        />\n      ))\n    ))}\n  </div>\n)\n\nconst TilePicker = ({selectedTile, tileImages, onSelect})=> (\n  <div className='picker'>\n    {tileImages.map((name, index)=> (\n      <img\n        key={name}\n        alt=''\n        className={index === selectedTile ? 'selected' : ''}\n        src={require(`../Game/images/tiles/${name}.png`)}\n        onClick={()=> onSelect(index)}\n      />\n    ))}\n  </div>\n)\n\nconst SpriteEditor = ({tileSets, tileImages, images, open, updateTileSets, onClose})=> {  \n  const [selectedTileSet, setSelectedTileSet] = useState(0);\n  const [selectedTile, setSelectedTile] = useState(0);\n  const tiles = tileSets[selectedTileSet]\n\n  return (\n    <Dialog open={open} onClose={onClose}>\n      <div className='container'>\n        <div className='left'>\n          <SpritePicker\n            images={images}\n            tileSets={tileSets}\n            selectedTileSet={selectedTileSet}\n            onSelect={setSelectedTileSet}\n          />\n        </div>\n        <div className='right'>\n          <Preview\n            tiles={tiles}\n            tileImages={tileImages}\n            selectedTile={selectedTile}\n            onSelect={(row, col, newTileIndex)=> {\n              const newTileSets = [...tileSets]\n              newTileSets[selectedTileSet][row][col] = newTileIndex\n              updateTileSets(newTileSets)\n            }}\n          />\n          <TilePicker\n            tileImages={tileImages}\n            selectedTile={selectedTile}\n            onSelect={setSelectedTile}\n          />\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n\nconst mapStateToProps = ({game, spriteEditor})=> ({\n  open: spriteEditor.open,\n  tileImages: spriteEditor.tileImages,\n  images: spriteEditor.images,\n  tileSets: spriteEditor.tileSets\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  updateTileSets: (tileSets)=> {\n    dispatch({\n      type: 'spriteEditor/UPDATE_TILESETS',\n      tileSets,\n    })\n  }\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SpriteEditor)\n","import {useEffect} from 'react'\nimport {connect} from 'react-redux'\nimport firebase from '../firebase.js'\nimport 'firebase/auth'\nimport Plain from 'slate-plain-serializer'\n\n\nconst firestore = firebase.firestore()\n\nconst Persister = ({user, name, id, code, loadGames, clearGames, saveGame})=> {\n\n  // load games as soon as user is signed in and whenever user changes\n  useEffect(() => {\n    if (user) {\n      loadGames(user)\n    }\n    else {\n      clearGames()\n    }\n  }, [user])\n\n  // save games whenever a change is made\n  useEffect(() => {\n    saveGame(name, id, code, user)\n  }, [name, id , code])\n\n  return null\n}\n\nconst mapStateToProps = ({app})=> ({\n  user: app.user,\n  name: app.name,\n  id: app.id,\n  code: app.code\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  saveGame: (name, id, code, user)=> {\n    const codeText = Plain.serialize(code)\n    firestore.collection(user.uid).doc(id).set({\n      name,\n      id,\n      code: codeText\n    })\n    .then(function() {\n        console.log(\"Document successfully written!\");\n    })\n    .catch(function(error) {\n        console.error(\"Error writing document: \", error);\n    });\n  },\n  loadGames: (user)=> {\n    const gamesRef = firestore.collection(user.uid)\n      gamesRef.get().then(function(querySnapshot) {\n        let games = []\n        querySnapshot.forEach(function(doc) {\n          const {name, id, code} = doc.data()\n          games.push({name, id, code})\n        });\n        dispatch({\n          type: 'SET_GAMES',\n          games\n        });\n      })\n  },\n  clearGames: ()=> {\n    dispatch({\n      type: 'SET_GAMES',\n      games: []\n    });\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Persister);\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Blanket = styled.div`\n  height: 100%;\n  width: 100%;\n  position: fixed;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  background-color: ${props => props.colors.dark};\n  overflow-x: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nconst Contents = styled.div`\n  width: 80%;\n  color: ${props => props.colors.dark};\n  background-color: ${props => props.colors.primary};\n  border-radius: 0.5rem;\n  padding: 2rem;\n  top: 10%;\n  position: absolute;\n  margin-bottom: 10%;\n\n  h2 {\n    margin-top: 1.5rem;\n    line-height: 2rem;\n  }\n`\n\nconst Modal = ({colors, onClose, children})=> (\n  <Blanket colors={colors} onClick={onClose}>\n    <Contents colors={colors} onClick={(e)=> e.stopPropagation()}>\n      {children}\n    </Contents>\n  </Blanket>\n)\n\nexport default Modal\n","import React, {useState, Fragment} from 'react'\nimport {connect} from 'react-redux'\nimport Textarea from 'react-textarea-autosize'\nimport Plain from 'slate-plain-serializer'\nimport {examples} from './exampleCode'\nimport Button from '../components/Button'\nimport Modal from '../components/Modal'\nimport styled from 'styled-components'\n\nconst CodeExample = styled.div`\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n  background-color: ${props => props.colors.dark};\n  border-radius: 0.5rem;\n\n  textarea {\n    background-color: transparent;\n    color: var(--primary-color);\n    padding: 0rem;\n    border: none;\n    overflow: hidden;\n    resize: none;\n    outline: none;\n    line-height: 1rem;\n    font-family: 'Fira Code';\n    font-size: 1rem;\n    width: 100%;\n    padding: 0;\n  }\n`\n\nconst ColumnLayout = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  justify-content: space-between;\n`\n\nconst ExamplesModal = ({colors, loadPreset})=> {\n  const [visible, setVisible] = useState(false)\n\n  return visible \n  ?\n    <Modal colors={colors} onClose={()=> setVisible(false)}>\n      <h1>Examples</h1>\n      {Object.entries(examples).map(([key, code])=> {\n        \n        return <Fragment key={key}>\n          <ColumnLayout>\n            <h2>{key}</h2>\n            <Button colors={colors} secondary onClick={()=> {\n              loadPreset(code)\n              setVisible(false)\n            }}>\n              Load\n            </Button>\n          </ColumnLayout>\n          <CodeExample colors={colors}>\n            <Textarea value={code} />\n          </CodeExample>\n        </Fragment>\n      }\n      )}\n    </Modal>\n  :\n    <Button colors={colors} onClick={()=> setVisible(true)}>\n      Examples\n    </Button>\n}\n\nconst mapStateToProps = ()=> ({})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  loadPreset: (codeText)=> {\n    const code = Plain.deserialize(codeText)\n\n    dispatch({\n      type: 'LOAD_CODE',\n      code\n    })\n    dispatch({\n      type: 'COMPILE',\n      code\n    });\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ExamplesModal);\n","import React, {useState} from 'react'\nimport {connect} from 'react-redux'\nimport Plain from 'slate-plain-serializer'\nimport Button from '../components/Button'\nimport Modal from '../components/Modal'\n\nconst GamesModal = ({colors, games, loadGame})=> {\n  const [visible, setVisible] = useState(false)\n\n  return visible \n  ?\n    <Modal colors={colors} onClose={()=> setVisible(false)}>\n      <h1>Games</h1>\n      {games.map(({name, id, code})=>\n        <div className='item' key={id}>\n          <h2>{name}</h2>\n          <Button secondary colors={colors} onClick={()=> {\n            loadGame(code)\n            setVisible(false)\n          }}>\n            Load\n          </Button>\n        </div>\n      )}\n    </Modal>\n  :\n    <Button colors={colors} onClick={()=> setVisible(true)}>\n      Games\n    </Button>\n}\n\nconst mapStateToProps = ({app})=> ({\n  games: app.games\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  loadGame: (codeText)=> {\n    const code = Plain.deserialize(codeText)\n\n    dispatch({\n      type: 'LOAD_CODE',\n      code\n    })\n    dispatch({\n      type: 'COMPILE',\n      code\n    });\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(GamesModal);\n","import styled from 'styled-components'\n\n\nconst alpha = 30 // this is a number, but will end up a hex string\n\nconst Input = styled.input`\n  background-color: ${props => props.colors.primary}${alpha};\n  &:hover, &:focus{\n    background-color: ${props => props.colors.primary}${alpha * 1.5};\n  }\n  &:focus{\n    outline: none;\n  }\n  color: ${props => props.colors.primary};\n  font-size: 0.8rem;\n  font-weight: 800;\n  padding: 0.5rem;\n  border: none;\n  border-radius: 0.3rem;\n`\n\nexport default Input","import styled from 'styled-components'\nimport Button from './Button'\n\n\nconst IconButton = styled(Button)`\n  @keyframes grow {\n    0% {\n      transform: scale(1.0);\n      easing: 'ease-out'\n    }\n    30% {\n      transform: scale(1.3);\n      easing: 'ease-in-out'\n    }\n    100% {\n      transform: scale(1.2);\n    }\n  }\n\n  @keyframes shrink {\n    0% {\n      transform: scale(1.2);\n      easing: 'ease-out'\n    }\n    30% {\n      transform: scale(0.9);\n      easing: 'ease-in-out'\n    }\n    100% {\n      transform: scale(1.0);\n    }\n  }\n\n  min-width: auto;\n  padding: 0;\n  background-color: transparent;\n\n  animation-name: shrink;\n  animation-duration: 0.2s;\n  animation-fill-mode: forwards;\n\n  &:hover {\n    animation-name: grow;\n    animation-duration: 0.2s;\n    animation-fill-mode: forwards;\n  }\n`\n\nexport default IconButton\n","\nexport const darkColors = {\n  primary: '#F1A0A0',\n  secondary: '#70EFA6',\n  dark: '#000000',\n  light: '#FDF6E2'\n}\n\nexport const lightColors = {\n  primary: '#43153F',\n  secondary: '#70EFA6',\n  dark: '#FDF6E2',\n  light: '#FFFFFF'\n}","import React from 'react'\nimport {connect} from 'react-redux'\nimport {HotKeys} from 'react-hotkeys'\nimport {setInput, cancelInput, toggleTheme} from '../App/actions.js'\nimport {toggleDebug} from '../Game/actions.js'\n\n\nconst keyMap = {\n  'up': {sequence: 'up', action: 'keydown'},\n  'down': {sequence: 'down', action: 'keydown'},\n  'left': {sequence: 'left', action: 'keydown'},\n  'right': {sequence: 'right', action: 'keydown'},\n  'action1': {sequence: 'x', action: 'keydown'},\n  'action2': {sequence: 'z', action: 'keydown'},\n\n  'cancel_up': {sequence: 'up', action: 'keyup'},\n  'cancel_down': {sequence: 'down', action: 'keyup'},\n  'cancel_left': {sequence: 'left', action: 'keyup'},\n  'cancel_right': {sequence: 'right', action: 'keyup'},\n  'cancel_action1': {sequence: 'x', action: 'keyup'},\n  'cancel_action2': {sequence: 'z', action: 'keyup'},\n};\n\nconst handlers = (onSetInput, onCancelInput, onReset, onRun, onToggleDebug, isGameActive)=> ({\n  'up': ()=> onSetInput('up'),\n  'down': ()=> onSetInput('down'),\n  'left': ()=> onSetInput('left'),\n  'right': ()=> onSetInput('right'),\n  'action1': ()=> onSetInput('action1'),\n  'action2': ()=> onSetInput('action2'),\n  'r': ()=> onReset(),\n  'd': ()=> onToggleDebug(),\n  'space': ()=> onRun(!isGameActive),\n\n  'cancel_up': ()=> onCancelInput('up'),\n  'cancel_down': ()=> onCancelInput('down'),\n  'cancel_left': ()=> onCancelInput('left'),\n  'cancel_right': ()=> onCancelInput('right'),\n  'cancel_action1': ()=> onCancelInput('action1'),\n  'cancel_action2': ()=> onCancelInput('action2'),\n});\n\nconst Keyboard = ({\n    code, compile, isGameActive, setGameActive, onToggleDebug,\n    onSetInput, onCancelInput, children\n})=>\n  <HotKeys\n    handlers={handlers(\n      onSetInput,\n      onCancelInput,\n      ()=> compile(code),\n      (active)=> setGameActive(active),\n      ()=> onToggleDebug(),\n      isGameActive\n    )}\n    keyMap={keyMap}\n  >\n  {children}\n  </HotKeys>\n\nconst mapStateToProps = ({app, game})=> ({\n  user: app.user,\n  name: app.name,\n  id: app.id,\n  code: app.code,\n  theme: game.theme,\n  isGameActive: app.active,\n  width: game.width,\n  height: game.height,\n  debug: game.debug,\n  error: game.error,\n  currentView: game.currentView\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  compile: (code)=> {\n    dispatch({\n      type: 'COMPILE',\n      code\n    });\n  },\n  setGameActive: (active)=> {\n    dispatch({\n      type: 'SET_ACTIVE',\n      active\n    });\n  },\n  onSetInput: (input)=> {\n    dispatch(setInput(input));\n  },\n  onCancelInput: (input)=> {\n    dispatch(cancelInput(input));\n  },\n  onToggleDebug: ()=> {\n    dispatch(toggleDebug());\n  },\n  onToggleTheme: ()=> {\n    dispatch(toggleTheme());\n  },\n  onOpenCloseSpriteEditor: (open)=> {\n    dispatch({type: 'spriteEditor/SET_OPEN', open: open})\n  }\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Keyboard);\n","\nexport const setInput = (input)=> ({\n  type: 'SET_INPUT',\n  input\n})\n\nexport const cancelInput = (input)=> ({\n  type: 'CANCEL_INPUT',\n  input\n})\n\nexport const toggleTheme = ()=> ({\n  type: 'TOGGLE_THEME'\n})\n","\nexport const toggleDebug = (active)=> ({\n  type: 'TOGGLE_DEBUG',\n  active\n})\n\n","import React from 'react'\nimport {connect} from 'react-redux'\nimport firebase from '../firebase.js'\nimport * as firebaseApp from 'firebase/app'\nimport 'firebase/auth'\n\nimport Game from '../Game/Game.js'\nimport {Menu} from '../Menu/Menu.js'\nimport Loop from '../Game/Loop.js'\nimport Code from '../Code/Code.js'\nimport SpriteEditor from '../SpriteEditor/SpriteEditor'\nimport Persister from '../Persistor/Persistor'\nimport ExamplesModal from '../ExamplesModal/ExamplesModal'\nimport GamesModal from '../GamesModal/GamesModal'\nimport {toggleTheme} from './actions.js'\nimport CustomProperties from 'react-custom-properties'\nimport Input from '../components/Input'\nimport Button from '../components/Button'\nimport IconButton from '../components/IconButton'\n\nimport './App.scss'\nimport styled from 'styled-components'\nimport moon from '../icons/moon.svg'\nimport sun from '../icons/sun.svg'\nimport play from '../icons/play.svg'\nimport stop from '../icons/stop.svg'\nimport {darkColors, lightColors} from './colors'\nimport Keyboard from '../Keyboard/Keyboard'\n\n\nconst providers = {\n  google: new firebaseApp.auth.GoogleAuthProvider(),\n}\n\nconst AppContainer = styled.div`\n  display: flex;\n  height: 100%;\n  background-color: ${props => props.colors.primary};\n\n  @media only screen and (max-width: 900px) {\n    flex-direction: column-reverse;\n  }\n`\n\nconst App = ({\n    name, code, compile, theme, imageMap, width, height,\n    isGameActive, currentView, setGameActive, onOpenCloseSpriteEditor,\n    onToggleTheme, updateName, user, signOut, signInWithGoogle\n})=> {\n  const colors = theme === 'light' ? lightColors : darkColors;\n\n  return (\n    <CustomProperties className=\"custom-properties-container\" properties={{\n      '--primary-color': colors.primary,\n      '--secondary-color': colors.secondary,\n      '--dark-color': colors.dark,\n      '--primary-transparent-color': colors.primaryTransparent,\n      '--light-color': colors.light,\n      '--hover-color': `${colors.primary}22`  // 22 is is the alpha in hex\n    }}>\n      <AppContainer colors={colors}>\n        {user && <Persister />}\n        <div className=\"left\">\n          <header>\n            <h1 className='logo'>micro gg</h1>\n            <Input\n              type=\"text\"\n              value={name}\n              onChange={(e)=> updateName(e.target.value.toUpperCase())}\n              colors={colors}\n              onFocus={(e)=> e.target.select()}\n            />\n            <GamesModal colors={colors} />\n            <ExamplesModal colors={colors} />\n            {\n              user\n                ? <Button onClick={signOut} colors={colors}>\n                    Sign out\n                  </Button>\n                : <Button onClick={signInWithGoogle} colors={colors}>\n                    Sign in with Google to save\n                  </Button>\n            }\n          <IconButton colors={colors} className='icon' onClick={()=> onToggleTheme()}>\n            {theme === 'dark'\n              ? <img src={sun} alt=\"Light UI\" />\n              : <img src={moon} alt=\"Dark UI\" />\n            }\n          </IconButton>\n          </header>\n          <Code imageMap={imageMap} />\n        </div>\n        <Keyboard>\n          <div className=\"right\">\n            <header>\n              {isGameActive\n                ? <IconButton colors={colors} className='icon stop' onClick={()=> {\n                    compile(code)\n                    setGameActive(false)\n                  }}>\n                    <img src={stop} alt=\"Stop\" />\n                  </IconButton>\n                : <IconButton colors={colors} className='icon play' onClick={()=> {\n                    compile(code)\n                    setGameActive(true)\n                  }}>\n                    <img src={play} alt=\"Play\" />\n                  </IconButton>\n              }\n              {isGameActive && <Loop />}\n            </header>\n            <div className=\"game-container\">\n              <SpriteEditor\n                onClose={()=> onOpenCloseSpriteEditor(false)}\n              />\n              {currentView === 'game'\n                ? <Game />\n                : <Menu\n                    width={width}\n                    height={height}\n                    onPlay={()=> {\n                      compile(code)\n                      setGameActive(true)\n                    }}\n                    colors={colors}\n                    currentView={currentView}\n                  />\n              }\n            </div>\n          </div>\n        </Keyboard>\n      </AppContainer>\n    </CustomProperties>\n  );\n};\n\nconst mapStateToProps = ({app, game})=> ({\n  user: app.user,\n  name: app.name,\n  id: app.id,\n  code: app.code,\n  theme: app.theme,\n  isGameActive: app.active,\n  currentView: game.currentView,\n  width: game.width,\n  height: game.height\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  updateName: (name)=> {\n    dispatch({\n      type: 'SET_NAME',\n      name\n    });\n  },\n  signOut: ()=> {\n    firebase.auth().signOut().then(function() {\n      dispatch({\n        type: 'SIGN_OUT'\n      });\n    }).catch(function(error) {\n      console.error('could not sign out')\n    });\n  },\n  signInWithGoogle: ()=> {\n    firebase.auth().signInWithPopup(providers.google).then(function(result) {\n      // var token = result.credential.accessToken;\n      dispatch({\n        type: 'SET_USER',\n        user: result.user\n      });\n    }).catch(function(error) {\n      console.error(error)\n    });\n  },\n  compile: (code)=> {\n    dispatch({\n      type: 'COMPILE',\n      code\n    });\n  },\n  setGameActive: (active)=> {\n    dispatch({\n      type: 'SET_ACTIVE',\n      active\n    });\n  },\n  onToggleTheme: ()=> {\n    dispatch(toggleTheme());\n  },\n  onOpenCloseSpriteEditor: (open)=> {\n    dispatch({type: 'spriteEditor/SET_OPEN', open: open})\n  }\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {Provider} from 'react-redux'\nimport {createStore} from 'redux'\nimport rootReducers from './reducers'\nimport './index.css'\nimport './fonts/FiraCode/fira_code.css'\nimport App from './App/App.js'\nimport './firebase.js'  // initalise firebase singleton\n\n\nconst store = createStore(\n  rootReducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n )\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}