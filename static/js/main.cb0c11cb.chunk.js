(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(t,e,n){var r={"./brick.png":295,"./goomba.png":296,"./goombared.png":297,"./no-image.png":298,"./player.png":299,"./questionbrick.png":300,"./spike.png":301};function a(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}a.keys=function(){return Object.keys(r)},a.resolve=i,t.exports=a,a.id=116},179:function(t,e,n){t.exports=n(390)},285:function(t,e,n){},287:function(t,e,n){},291:function(t,e,n){},293:function(t,e,n){},295:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAD5JREFUWAnt10ERADAIA7Ax87iZRXao6CcYaMmv1fPmJC9ZYLNv8vnNVoAAAQIECBAgQIAAAQIECFRyHe84/XTlDQmQUCOUAAAAAElFTkSuQmCC"},296:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAYdJREFUWAntVz1LA0EQfbuEeAgi2EWsBCsL/0JqKytLf4KV+IGQIiDxxMqfYBOwECvr/AULK8FKSCeIzWlx6zzjQdibDRdwL80NhNy8zMx7O3N3YQzEUve4kePrCnBdcTvEItoYMCOLpeMTs/tmSO6QPTlgLSJpqbQB3g2Sndbk5PWSUw0P7KTr9q/tJYX1AK4rAqLPfNZZOhSwUGsENB1oOhDqwDdgTxMsr/PDa3lWBatslfNbeknbOzN76dRv6cA9iJtfTmEzLqvnqx1IkNz61TXMjyl8LVbDGK8KKArV8a0KyJAd+OQa5scUvharYYw3A3cv/4wl403UK9o2Sc77EtUuRepA5fyQAL1sBFQdQQSeYMlGQOBFJHcn7Pkmtq73zfY8b0C11Xfuuf2KlyOH/MIPCI5gBas3/0FOQtZhPZ+cflDAJz4OqVxLmhdjHdbT8prHMDgCrV0xMAqQXW1hNhYBZrQwei6p3FK5KNYtgpzktr8rsmyp0omhiKhjHMJhhtyMyf0DfCpzwbzHSMoAAAAASUVORK5CYII="},297:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAYxJREFUWAntV0FKw1AQnT82WRQqtDvFdbdewVN06RFciRUCLiwFI648QjdCT+EV3HYtuEvRgosEE+dFAk2Y3ybgTzcZKM1M3rw3mUk+/xsS+w7DsyRJHg3RRZZlJ4i5MmPMR0b06nneTX86fTe5eBy/ieDIlaiFN/J8/5zx5AcQR00jaDPaDu8QBm12PfNdDwZt3gVo415XQNeBrgNqB2SBiA3zbY/5FD9cI1b3s2yS31NJme+OgyDcuhd+zedEafqwFbNfNshXO3BEtKiya7EqpvA1rBYDXi2gIGrjXy3gh+iyKq7FqpjC17BaDHjzOZvJ/qBs+Qsncyzalien6b0A/TJS95rkqwXotG6i6gjcSOmsXQH6QiTdkt1rMBiPn8xkUnsF1JtMlC2X/ma1upYdkKxmZbOOYDAcPv+HOOTAA76y9J9nLWCzXl+hci2paSzvgPBped1naB2B1i4XMcZZzQVxHU5oMw6KdcAuMNBmnFKFPHIhsIczgjbjiIxTqqw8L22MI9cQLWhC+xfEpII8G45emQAAAABJRU5ErkJggg=="},298:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAW5JREFUWAntlsFOwzAMhu1qrwMSnOAtYOLCk3SDM6IVD8IFTeMp2AleqJqxS5JtrsucCSlCai6J7dj/lyxWh8+0Iig5SgKIdlXy8KI9AUw38P9uoKH12W+dcyyuc7NuoKX1HQF9cv82upDY4pe47LPils8NIEW3QK8ANONCtYYIdi1x2eeFcAEo8XiQBLETjyE/hAuAT3QZTh4V4iwQH2zwyfWgGcH2Qnu17QJY4u0DJ7Y6OdhXI/52gfPHkVhyuwBk9xLnC57GIFLBsGjDfu0f2G4AyXRCuMWlZhaAJPz1yAIYvnYTJ3WHGVVON4BTPJZ3Q7gAGlo9cWWj1Xq9TVRVcx3ylPvQdAEgVF8A2B2m9pY8uGteGd2B3U+ekbXncgHUePNWAd4riPTah92BneyXvD0tc+kCkEwFkcRj1R2EX7zP5ceV9bf8hd7Po6g153yOe+1cAEv0VJ9ou3+CU0WO5U0A0w0UvwEs2YbSId8ezJqOYuBQ4gAAAABJRU5ErkJggg=="},299:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAU5JREFUWAljZCAA2v+v+09ACU5pRgbG/xWMgUw4FQAl8Eri00gtuVEHjIbAaAgMeAgwUlLQUKMsGPAQGHXAaAjgDAFgVTodhClN6YTMwZkNKxmDGEGWU5JNkdsDuMzBGQKU+pxY/SyEFMJCgpA6cuUJhgAw6Cb+//8fHB2kWALS0/F/fSchPQQdADQgr5Nhw2yggcSoBdu3//9+FqCeeUBOKTUcwPCf4X9yJ8P6pSCDCRnY9/8Y50mGD8CW7P8EQmpB8gSDFi31buJm4AjLY/T6ic3w/v/rBX4wMGxiYPhvCzGc+q1iv68MP7fM/L+ZC90B/f93SP5g+H8QZjlIHhgKBD1IdLwiLPzv8p7hz87e/xtkYWLd/zfq/WT4fhTI14OJEUsTjFNsBgF9ZvOL4f8joBzYh38Y/l7Epo4YMTJCgBhjiVcz6oDREBjwEAAAwOJpSUqjPhYAAAAASUVORK5CYII="},300:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAX5JREFUWAlj/Njc/J9hIMFAOgBkN9NAeh5k96gDRkNgNARYKMmGXzs7pf78/i3HxsDwnLOm5iE5ZpHlgM9tbaL//v1b9OfXLw+Qpb+A+FNLyz5eLq5QxqKid6Q4hKw0ALR8McP//2DLGRgZ7zEyMv79//+/0+evXyeSYjlILckO+N/fLwDUpwXEX4AWJ/DX1Cj/Z2QsBRkGpO1BNCmA5ChgLCz8ALRADmYJ0OeMn1ta7EA1GuP//49g4sTSJDsA2WCw5a2tM4CWB4CiAYhrkeWJYZMcBciGfm5tLQY6Ig1sOQNDOG919X5keWLYFDkA6HN3kCVAejZvTc1aYixEV0NRFDAyMTUBDZzKwMx8Hd1gYvmUhcD//4oMf/+mMv/7x0WshejqKAoBYFkwDRj83H///AGVRYHohhPDpygEGBkY9gATIDD7M+4lxjKsaihtE/6fOZPs4KdKm5AxPf0bVp8RKUhRFBBpB15low4YDYHREBjwEGCktCTEm8mJkAQABD53sd5+Ls8AAAAASUVORK5CYII="},301:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAhVJREFUWAm9lulOwkAUhaf1WXCNStwIavzhGmOMxrihj+JSTFqsPgpv4Wv4Fmw/JHSuR5Lb2NJhpqWUhEw7c++Z75wuIMQEn9bnZ6nruo8TSAh7kmbr5+dVEjnUbM5k1ckM0G40ZoVl1UiIUvv7+6FwAAoCh4iGzi2iJxxnMpOpCe7nLSHu2TVSmOt5Xo3P04yZAIbuRfT+kUI8Z0khNUDn42MB7m/jLrH5PFK4i8/rzlMDyH6/jsgT+7KkkCikou74/hLcX6vWkcJi1/NuVOtJ86kAaDBwVO5ZHBAv+ILT7GMM0PX9ZUgq3fN2AFxCCto6rjcGkH/uDZ2lScEIAI5WQHzF1LoRKSyjx6jeCADv+7qpe4YzTUELACdliF6ysOmIFFY7nqft0wJkcc+QgHjlY9U4FgBvtjVEeaFq1s4TlduuO7Z/LECAa6/dRFOgS0EJ0Ht/X4f7c42+fploDSkodZQAQRC86dXNKsalkAgA95twf2Ymb1BFtNHyvES9RIA83Yd4RIlPxAhAq9GowP1p2JjXAdEWUhjRHQEQUuZ27ePslpROfC4CgP96VUF0Ei/K6xw3YwVv1oh+BICkrOe1mUpHxlIIAfCsbsP9saoxr3mkUEUKR6wXAmBhateeN+PxfwpDALjfhftDLpj2CLM7SOHgbx9OoDD3bI5TsDquu4ef3C9eKHK0bXvfLvLax83hqXN+AWhR9c/gEiSNAAAAAElFTkSuQmCC"},388:function(t,e,n){},390:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(22),o=n.n(i),c=n(28),u=n(25),l=n(125),s=n(166),A=n(167),f=n.n(A),p=n(3),m=n(51),g={code:"\n##################\n#                #\n#                #\n#                #\n#                #\n#                #\n#                #\n#    P           #\n#             G  #\n##################\n\nP = Player\n# = Brick\n? = QuestionBrick or Brick\nG = Goomba\nR = GoombaRed\n^ = Spike\n\n[ <HORIZONTAL> Player ] -> [ HORIZONTAL Player ]\n[ <UP> Player | Wall ] -> [ JUMP Player | Wall ]\n[ <ACTION> Player | Wall ] -> [ JUMP Player | Wall ]\n[ Player ] -> [ DOWN Player ]\n[ Goomba ] -> [ DOWN Goomba ]\n\nHORIZONTAL [ Player | Goomba ] -> [ DEAD Player | Goomba ]\nDOWN [ Player | Goomba ] -> [ Player | DEAD Goomba ]\n"},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_CODE":return Object(p.a)({},t,{code:e.code});default:return t}},d=n(31),h=n(41),b=n(8),v=n(395),O=n(85),E=n.n(O),j=n(391),w=n(394),x=n(392),C=n(393),N="top",T="left",k="right",M=function(t,e,n){return{name:t,position:{x:e,y:n},velocity:{x:0,y:0},maxVelocity:{x:20,y:20},acceleration:{x:0,y:0},colliding:{top:[],bottom:[],left:[],right:[]},static:!1,inputs:{}}},I=function(t){return t.map(function(t){return function(t){return t.replace("[","").replace("]","")}(t).trim().split(" ")})},S={UP:{acceleration:{y:-1}},DOWN:{acceleration:{y:1}},LEFT:{acceleration:{x:-1}},RIGHT:{acceleration:{x:1}},FAST_UP:{acceleration:{y:-6}},FAST_DOWN:{acceleration:{y:6}},FAST_LEFT:{acceleration:{x:-6}},FAST_RIGHT:{acceleration:{x:6}},SLOW_UP:{acceleration:{y:-.5}},SLOW_DOWN:{acceleration:{y:.5}},SLOW_LEFT:{acceleration:{x:-.5}},SLOW_RIGHT:{acceleration:{x:.5}},JUMP:{velocity:{y:-150}},DEAD:{dead:!0},STATIC:{static:!0}},U={"<UP>":"up","<DOWN>":"down","<LEFT>":"left","<RIGHT>":"right","<ACTION>":"action1","<ACTION1>":"action1","<ACTION2>":"action2"},D=function t(e,n,r,a){var i="forward"===n?a+1:a-1;if(!(i<0||i===r.length)){var o=r[i];o||console.error("Expecting there to always be a state here");var c=[Object(p.a)({},o)],u=t(e,n,r,i);return u&&(c.colliding=Object(d.a)({},e,u)),c}},L=function(t,e,n){var r={},a=function(t){return{left:"left",right:"right",down:"bottom",up:"top"}[t]}(t),i=function(t){return{left:"right",right:"left",top:"bottom",bottom:"top",up:"down",down:"up",forward:"backward"}[t]}(a),o=D(a,"forward",e,n),c=D(i,"backward",e,n);return c&&(r[i]=c),o&&(r[a]=o),o||c?r:void 0},F=function(t,e){var n=t.map(function(t){return e[t]?{name:t}:U[t]?{inputs:Object(d.a)({},U[t],!0)}:S[t]?Object(p.a)({},S[t]):{}}),r={},a=!0,i=!1,o=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;Object(j.a)(r,l)}}catch(s){i=!0,o=s}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}return r},P=function(t,e){return Object(h.a)(t).concat(Object(h.a)(e))},R=function(t,e){if(Object(x.a)(t))return t+e},B=function(t,e){if(0===e.length)return t;var n=Object(p.a)({},t),r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value,l=Object(b.a)(u,2),s=l[0],A=l[1];Object(w.a)(s)(t)&&(n=Object(C.a)(n,A,R))}}catch(f){a=!0,i=f}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n},G=function(t){return!t.dead},Q=function(t){return void 0!==Object(b.a)(t,2)[1].createNew},Y=function(t){return t.includes("|")},W=function(t){return t.includes("->")&&!Y(t)},J=function(t){return t.match(/#.+#/g)},H=function(t){return t.includes("=")},K={ALL:["LEFT","RIGHT","UP","DOWN"],HORIZONTAL:["LEFT","RIGHT"],VERTICAL:["UP","DOWN"]},q={HORIZONTAL:["LEFT","RIGHT"],VERTICAL:["UP","DOWN"]},z=function(t){var e=t.split("\n").filter(W),n=Object(v.a)(e.map(function(t){return function(t){for(var e=[],n=Object.entries(q),r=0;r<n.length;r++){var a=n[r],i=Object(b.a)(a,2),o=i[0],c=i[1];if(t.includes("<".concat(o,"> "))||t.includes("".concat(o," "))){var u=!0,l=!1,s=void 0;try{for(var A,f=c[Symbol.iterator]();!(u=(A=f.next()).done);u=!0){var p=A.value,m=t.replace("<".concat(o,"> "),"<".concat(p,"> ")).replace("".concat(o," "),"".concat(p," "));e.push(m)}}catch(g){l=!0,s=g}finally{try{u||null==f.return||f.return()}finally{if(l)throw s}}}}return e.length>0?e:[t]}(t)})),r=t.split("\n").filter(Y);return[n,Object(v.a)(r.map(function(t){return function(t){var e=[],n=t.split("["),r=t;""===Object(b.a)(n,1)[0]&&(r=t.replace("[","ALL ["));for(var a=Object.entries(K),i=0;i<a.length;i++){var o=a[i],c=Object(b.a)(o,2),u=c[0],l=c[1];if(r.includes("".concat(u," "))){var s=!0,A=!1,f=void 0;try{for(var p,m=l[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var g=p.value,y=r.replace("".concat(u," "),"".concat(g," "));e.push(y)}}catch(d){A=!0,f=d}finally{try{s||null==m.return||m.return()}finally{if(A)throw f}}}}return e.length>0?e:[t]}(t)}))]},V=function(t){return Object(p.a)({},t,{position:{x:Math.round(t.position.x),y:Math.round(t.position.y)}})},X=function(t){return{top:t.position.y,bottom:t.position.y+32,left:t.position.x,right:t.position.x+32}},_=function(t,e){var n=X(t),r=X(e);return n.bottom>r.top&&n.top<r.bottom&&n.right>r.left&&n.left<r.right},Z=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.x,a=t.y,i=X(e),o=i.top,c=i.bottom,u=i.left,l=i.right;return a>o-n&&a<c+n&&r>u-n&&r<l+n},$=function(t,e,n){var r=function(t,e){return t===T?[{x:e.position.x,y:e.position.y+5},{x:e.position.x,y:e.position.y+32-5}]:t===k?[{x:e.position.x+32,y:e.position.y+5},{x:e.position.x+32,y:e.position.y+32-5}]:t===N?[{x:e.position.x+5,y:e.position.y},{x:e.position.x+32-5,y:e.position.y}]:"bottom"===t?[{x:e.position.x+5,y:e.position.y+32},{x:e.position.x+32-5,y:e.position.y+32}]:void 0}(t,e),a=!0,i=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;if(Z(l,n,1))return!0}}catch(s){i=!0,o=s}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}return!1},tt=function(t,e){var n=X({position:Object(p.a)({},t.prevPosition)}),r=X({position:Object(p.a)({},e.prevPosition)}),a={top:!1,bottom:!1,left:!1,right:!1};return n.top>=r.bottom?a.top=!0:n.bottom<=r.top&&(a.bottom=!0),n.left>=r.right?a.left=!0:n.right<=r.left&&(a.right=!0),a},et=function(t,e,n){var r=X(n),a=Object(p.a)({},e.velocity,Object(d.a)({},{left:"x",right:"x",top:"y",bottom:"y"}[t],0)),i=Object(p.a)({},e.position);return t===N?i.y=r.bottom:"bottom"===t?i.y=r.top-32:t===T?i.x=r.right:t===k&&(i.x=r.left-32),{position:i,velocity:a}},nt=function(t,e){if(t.static)return t;var n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;if(t.id!==c.id&&_(t,c)){var u=tt(t,c),l=Object(p.a)({},t);return u.top?l=Object(p.a)({},l,et(N,t,c)):u.bottom&&(l=Object(p.a)({},l,et("bottom",t,c))),_(l,c)&&(u.left?l=Object(p.a)({},l,et(T,t,c)):u.right&&(l=Object(p.a)({},l,et(k,t,c)))),l}}}catch(s){r=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t},rt=function(t){return Object(p.a)({},t,{prevPosition:Object(p.a)({},t.position)})},at=function(t){var e=t.velocity,n=t.maxVelocity,r=t.acceleration;return Object(p.a)({},t,{velocity:{x:Math.max(Math.min(e.x+r.x,n.x),-n.x),y:Math.max(Math.min(e.y+r.y,n.y),-n.y)},acceleration:{x:0,y:0}})},it=function(t){return Object(p.a)({},t,{position:{x:t.position.x+t.velocity.x,y:t.position.y+t.velocity.y}})},ot=function(t){return Object(p.a)({},t,{colliding:{top:[],bottom:[],left:[],right:[]}})},ct=function(t){return Object(p.a)({},t,{velocity:{x:(t.colliding.top.length>0||t.colliding.bottom.length,.85*t.velocity.x),y:(t.colliding.left.length>0||t.colliding.right.length,.85*t.velocity.y)}})},ut={sprites:[],legend:{},names:{},rules:[],stateMutations:[],width_in_tiles:0,height_in_tiles:0,active:!1,theme:"dark",debug:!1,imageMap:{},images:["player","brick","questionbrick","spike","goomba","goombared"]},lt=function(){var t,e,n,r,a,i,o,c,u,l,s,A,f,m,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,y=arguments.length>1?arguments[1]:void 0;switch(y.type){case"SET_ACTIVE":return Object(p.a)({},g,{active:y.active});case"TOGGLE_DEBUG":return Object(p.a)({},g,{debug:!g.debug});case"SELECT_IMAGE":var O=Object(p.a)({},g.imageMap),j=y.variableName,x=y.imageName;return O[j]=x,Object(p.a)({},g,{imageMap:O});case"COMPILE":try{var C=function(t){return t.split("\n").filter(function(t){return!t.includes("//")}).join("\n")}(y.code),S=function(t){return t.split("\n").filter(J).slice(1,-1).map(function(t){return t.slice(1,-1)})}(C),U=function(t){var e={};return t.split("\n").filter(H).forEach(function(t){var n=t.split("=").map(function(t){return t.trim()}),r=Object(b.a)(n,2),a=r[0],i=r[1].split(" or ");e[a]=function(){var t=Math.floor(Math.random()*i.length);return i[t]}}),e}(C),D=function(t,e){var n=[];return t.map(function(t,r){return t.split("").forEach(function(t,a){var i=e[t];if(i&&"Empty"!==i()){var o=32*a,c=32*r;n.push(Object(p.a)({id:E()()},M(i(),o,c)))}})}),n}(S,U),R=function(t){var e=t.split("\n").filter(H).map(function(t){var e=t.split(" = ");return Object(b.a)(e,2)[1].split(" or ")});return Object(v.a)(e)}(C),Y=R.reduce(function(t,e){return t[e]=!0,t},{}),W=Object(p.a)({},g.imageMap),K=!0,q=!1,X=void 0;try{for(var _,Z=R[Symbol.iterator]();!(K=(_=Z.next()).done);K=!0){var tt=_.value;W[tt]||(W[tt]=g.images[tt]?tt.toLowerCase():"player")}}catch(Et){q=!0,X=Et}finally{try{K||null==Z.return||Z.return()}finally{if(q)throw X}}var et=z(C),lt=Object(b.a)(et,2),st=lt[0],At=lt[1],ft=st.map(function(t){return function(t,e){var n,r=(n=t.split("->"),I(n)),a=Object(b.a)(r,2),i=a[0],o=a[1];return[F(i,e),F(o,e)]}(t,Y)}),pt=At.map(function(t){return function(t,e){var n,r,a=t.match(/^([A-Z]+)\b/),i=Object(b.a)(a,1)[0].toLowerCase(),o=t.split("->"),c=Object(b.a)(o,2),u=c[0],l=c[1],s=u.match(/\[.+?\]/),A=Object(b.a)(s,1)[0],f=l.match(/\[.+?\]/),m=Object(b.a)(f,1)[0],g=(n=A.split("|"),I(n)),y=(r=m.split("|"),I(r)),d=[],h=[],v=!0,O=!1,E=void 0;try{for(var j,w=g[Symbol.iterator]();!(v=(j=w.next()).done);v=!0){var x=j.value,C=Object(p.a)({},F(x,e));d.push(C)}}catch(Et){O=!0,E=Et}finally{try{v||null==w.return||w.return()}finally{if(O)throw E}}var N=d.map(function(t,e){return L(i,d,e)?Object(p.a)({},t,{colliding:L(i,d,e)}):t}),T=0,k=!0,S=!1,U=void 0;try{for(var D,P=y[Symbol.iterator]();!(k=(D=P.next()).done);k=!0){var R=D.value,B=g[T],G=void 0;if(B)G=F(R,e);else{var Q=M("TEMP_NAME",0,0);G=Object(p.a)({},Q,{createNew:{direction:i}},F(R,e)),N.push(Object(p.a)({},d[0]))}h.push(G),T+=1}}catch(Et){S=!0,U=Et}finally{try{k||null==P.return||P.return()}finally{if(S)throw U}}return N.map(function(t,e){return[t,h[e]]})}(t,Y)}),mt=Object(v.a)(pt),gt=mt.filter(Q),yt=mt.filter(function(t){return!Q(t)}),dt=function(t){return[t[0].length,t.length]}(S),ht=Object(b.a)(dt,2),bt=ht[0],vt=ht[1];return Object(p.a)({},ut,{sprites:D,legend:U,rules:Object(h.a)(st).concat(Object(h.a)(At)),stateMutations:ft,collisionStateMutationsCreate:gt,collisionStateMutationsModify:yt,width:32*bt,height:32*vt,names:Y,imageMap:W})}catch(Et){return console.error(Et),Object(p.a)({},ut,{error:"Compilation error \ud83d\ude1e"})}case"UPDATE":Object(p.a)({},g);var Ot=function(t,e){var n,r,a,i=[],o=!0,c=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var A=l.value,f=!0,m=!1,g=void 0;try{for(var y,d=e[Symbol.iterator]();!(f=(y=d.next()).done);f=!0){var h=y.value,v=Object(b.a)(h,2),O=v[0],j=v[1];Object(w.a)(O)(A)&&i.push(Object(p.a)({},j,{id:E()(),position:(n=A.position,a=j.createNew.direction,r={up:{x:0,y:-32},down:{x:0,y:32},left:{x:-32,y:0},right:{x:32,y:0}}[a],{x:n.x+r.x,y:n.y+r.y}),createNew:void 0}))}}catch(Et){m=!0,g=Et}finally{try{f||null==d.return||d.return()}finally{if(m)throw g}}}}catch(Et){c=!0,u=Et}finally{try{o||null==s.return||s.return()}finally{if(c)throw u}}return i}(g.sprites,g.collisionStateMutationsCreate);return Object(p.a)({},g,{sprites:(m=g.sprites.filter(G),f=P(m,Ot),A=f.map(ot),s=A.map(function(t){return function(t,e,n,r){if(t.static)return t;var a=Object(p.a)({},t.colliding),i=!0,o=!1,c=void 0;try{for(var u,l=e[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;if(t.id!==s.id)for(var A=[N,"bottom",T,k],f=0;f<A.length;f++){var m=A[f];$(m,t,s)&&a[m].push({name:s.name})}}}catch(Et){o=!0,c=Et}finally{try{i||null==l.return||l.return()}finally{if(o)throw c}}return t.position.x<1&&a.left.push({name:"Wall"}),t.position.x>n-32-1&&a.right.push({name:"Wall"}),t.position.y<1&&a.top.push({name:"Wall"}),t.position.y>r-32-1&&a.bottom.push({name:"Wall"}),Object(p.a)({},t,{colliding:a})}(t,g.sprites,g.width,g.height)}),l=s.map(rt),u=l.map(function(t){return B(t,g.stateMutations)}),c=u.map(function(t){return B(t,g.collisionStateMutationsModify)}),o=c.map(ct),i=o.map(at),a=i.map(it),r=a.map(function(t){return nt(t,g.sprites)}),n=r.map(function(t){return nt(t,g.sprites)}),e=n.map(function(t){return nt(t,g.sprites)}),t=e.map(function(t){return function(t,e,n){if(t.static)return t;var r=Object(p.a)({},t.position);return t.position.y>n-32&&(r.y=n-32),t.position.y<0&&(r.y=0),t.position.x>e-32&&(r.x=e-32),t.position.x<0&&(r.x=0),Object(p.a)({},t,{position:r})}(t,g.width,g.height)}),t.map(V))});case"SET_INPUT":return Object(p.a)({},g,{sprites:g.sprites.map(function(t){return Object(p.a)({},t,{inputs:Object(p.a)({},t.inputs,Object(d.a)({},y.input,!0))})})});case"TOGGLE_THEME":return Object(p.a)({},g,{theme:"light"===g.theme?"dark":"light"});case"CANCEL_INPUT":return Object(p.a)({},g,{sprites:g.sprites.map(function(t){var e=Object(p.a)({},t.inputs);return e[y.input]=void 0,Object(p.a)({},t,{inputs:e})})});default:return g}},st=Object(u.b)({code:y,game:lt}),At=(n(285),n(287),n(170)),ft=(n(291),function(t){var e=t.sprite;return a.a.createElement("div",{className:"debug-colliding"},Object.entries(e.colliding).map(function(t,e){var n=Object(b.a)(t,2),r=n[0],i=n[1];return a.a.createElement("p",{className:"number ".concat(r," ").concat(i.length>0&&"active")},i.length)}))}),pt=(n(293),function(t,e){return{position:"relative",left:t,top:e}}),mt=function(t){var e=t.x,r=t.y,i=t.img,o=t.sprite,c=t.debug;return a.a.createElement("div",{className:"sprite",style:pt(e,r)},a.a.createElement("img",{src:n(116)("./".concat(i,".png")),alt:""}),c&&a.a.createElement(ft,{sprite:o}))},gt=function(t){var e=t.sprites,n=t.width,r=t.height,i=t.imageMap,o=t.error,c=t.debug;return a.a.createElement("div",{className:"stage",style:{width:n,height:r}},o&&a.a.createElement("p",{className:"error"},o),e.map(function(t){return a.a.createElement(mt,{key:t.id,x:t.position.x,y:t.position.y,img:i[t.name]||"player",sprite:t,debug:c})}))},yt=Object(c.b)(null,function(t){return{onTimeChange:function(){t({type:"UPDATE"})}}})(function(t){var e,n=t.onTimeChange;return Object(r.useEffect)(function(){return e=requestAnimationFrame(function(){return function t(){n(),e=requestAnimationFrame(function(){return t()})}()}),function(){cancelAnimationFrame(e)}},[]),a.a.createElement("p",null)}),dt=function(t){return{type:"COMPILE",code:t}},ht=n(173),bt=n.n(ht),vt=n(178),Ot=n(176),Et=n.n(Ot),jt=Object(c.b)(function(t){var e=t.game;return{imageMap:e.imageMap,images:e.images}},function(t){return{onSelect:function(e,n){t({type:"SELECT_IMAGE",variableName:e,imageName:n})}}})(function(t){var e=t.variableName,r=t.imageMap,i=t.images,o=t.onSelect;if(0===Object.keys(r).length)return null;var c=r[e]?r[e]:"player";return a.a.createElement(Et.a,{interactive:!0,title:a.a.createElement("div",{className:"tooltip-content"},i.map(function(t){return a.a.createElement("img",{key:t,alt:"",src:n(116)("./".concat(t,".png")),onClick:function(){return o(e,t)}})}))},a.a.createElement("img",{className:"code-sprite",alt:"",src:n(116)("./".concat(c,".png"))}))}),wt={comment:/\/\/.*/,variable:{pattern:new RegExp(" = ([A-Z]+)","i")}},xt=function(t,e,n){if(!t.ctrlKey||"b"!==t.key)return n();t.preventDefault(),console.log("add bold"),e.addMark("bold")},Ct=function t(e){return"string"==typeof e?e:"string"==typeof e.content?e.content:e.content.map(t).join("")},Nt=function(t,e,n){var r=n()||[],a=t.getTexts().toArray(),i=a.map(function(t){return t.text}).join("\n");if(1!==a.length)return r;var o=bt.a.tokenize(i,wt),c=[],u=a.shift(),l=u,s=0,A=0,f=0,p=!0,m=!1,g=void 0;try{for(var y,d=o[Symbol.iterator]();!(p=(y=d.next()).done);p=!0){var b=y.value;u=l,s=A;var v=Ct(b),O=v.split("\n").length-1,E=v.length-O,j=f+E,w=u.text.length-s,x=E;for(A=s+x;w<x&&a.length>0;)l=a.shift(),x=E-w,w=l.text.length,A=x;if("string"!=typeof b){var C={anchor:{key:u.key,offset:s},focus:{key:l.key,offset:A},mark:{type:b.type}};c.push(C)}f=j}}catch(N){m=!0,g=N}finally{try{p||null==d.return||d.return()}finally{if(m)throw g}}return Object(h.a)(r).concat(c)},Tt=Object(c.b)(function(t){var e=t.code,n=t.game;return{code:e.code,width:n.width,height:n.height,imageMap:n.imageMap}},function(t){return{onUpdateCode:function(e){var n=e.value;t({type:"UPDATE_CODE",code:m.a.serialize(n)})},onCompile:function(e){t(dt(e))}}})(function(t){var e=t.code,n=(t.imageMap,t.onUpdateCode),i=t.onCompile;return Object(r.useEffect)(function(){i(e)},[]),a.a.createElement(vt.a,{className:"code",defaultValue:m.a.deserialize(e),onChange:n,onKeyDown:xt,decorateNode:Nt,renderMark:function(t,e,n){return function(t,e,n,r){var i=t.children,o=t.attributes,c=t.node;switch(t.mark.type){case"variable":var u=c.text.split("=").map(function(t){return t.trim()}),l=Object(b.a)(u,2)[1].split(" or "),s=Object(b.a)(l,1)[0];return a.a.createElement("span",o,i,a.a.createElement(jt,{variableName:s}));case"comment":return a.a.createElement("span",Object.assign({},o,{style:{opacity:"0.33"}}),i);case"keyword":return a.a.createElement("span",Object.assign({},o,{style:{fontWeight:"bold"}}),i);default:return n()}}(t,0,n)}})}),kt=n(177),Mt=n.n(kt),It=(n(388),{primary:"#F1A0A0",secondary:"#87FFAE",dark:"#000000",light:"#FDF6E2"}),St={primary:"#43153F",secondary:"#87FFAE",dark:"#FDF6E2",light:"#FFFFFF"},Ut={up:{sequence:"up",action:"keydown"},down:{sequence:"down",action:"keydown"},left:{sequence:"left",action:"keydown"},right:{sequence:"right",action:"keydown"},action1:{sequence:"x",action:"keydown"},action2:{sequence:"z",action:"keydown"},cancel_up:{sequence:"up",action:"keyup"},cancel_down:{sequence:"down",action:"keyup"},cancel_left:{sequence:"left",action:"keyup"},cancel_right:{sequence:"right",action:"keyup"},cancel_action1:{sequence:"x",action:"keyup"},cancel_action2:{sequence:"z",action:"keyup"}},Dt=function(t,e,n,r,a,i){return{up:function(){return t("up")},down:function(){return t("down")},left:function(){return t("left")},right:function(){return t("right")},action1:function(){return t("action1")},action2:function(){return t("action2")},r:function(){return n()},d:function(){return a()},space:function(){return r(!i)},cancel_up:function(){return e("up")},cancel_down:function(){return e("down")},cancel_left:function(){return e("left")},cancel_right:function(){return e("right")},cancel_action1:function(){return e("action1")},cancel_action2:function(){return e("action2")}}},Lt=Object(c.b)(function(t){var e=t.code,n=t.game;return{code:e.code,theme:n.theme,isGameActive:n.active,sprites:n.sprites,imageMap:n.imageMap,width:n.width,height:n.height,debug:n.debug,error:n.error}},function(t){return{compile:function(e){t(dt(e))},setGameActive:function(e){t(function(t){return{type:"SET_ACTIVE",active:t}}(e))},onSetInput:function(e){t(function(t){return{type:"SET_INPUT",input:t}}(e))},onCancelInput:function(e){t(function(t){return{type:"CANCEL_INPUT",input:t}}(e))},onToggleDebug:function(){var e;t({type:"TOGGLE_DEBUG",active:e})},onToggleTheme:function(){t({type:"TOGGLE_THEME"})}}})(function(t){var e=t.code,n=t.compile,r=t.theme,i=t.sprites,o=t.imageMap,c=t.width,u=t.height,l=t.debug,s=t.error,A=t.isGameActive,f=t.setGameActive,p=t.onToggleDebug,m=t.onSetInput,g=t.onCancelInput,y=t.onToggleTheme,d="light"===r?St:It;return a.a.createElement(Mt.a,{className:"custom-properties-container",properties:{"--primary-color":d.primary,"--secondary-color":d.secondary,"--dark-color":d.dark,"--light-color":d.light,"--hover-color":"".concat(d.primary,"22")}},a.a.createElement("div",{className:"main"},a.a.createElement("div",{className:"left"},a.a.createElement("header",null,a.a.createElement("h1",null,"micro gg"),a.a.createElement("button",{className:"primary",onClick:function(){return y()}},"dark"===r?"light":"dark")),a.a.createElement(Tt,{imageMap:o})),a.a.createElement(At.HotKeys,{handlers:Dt(m,g,function(){return n(e)},function(t){return f(t)},function(){return p()},A),keyMap:Ut},a.a.createElement("div",{className:"right"},a.a.createElement("header",null,a.a.createElement("button",{className:"primary",onClick:function(){return n(e)}},"compile"),a.a.createElement("button",{className:"secondary",onClick:function(){return f(!A)}},A?"pause":"run"),A&&a.a.createElement(yt,null)),a.a.createElement("div",{className:"game-container"},a.a.createElement(gt,{sprites:i,imageMap:o,width:c,height:u,debug:l,error:s}))))))}),Ft={key:"root",storage:f.a},Pt=Object(l.a)(Ft,st),Rt=Object(u.c)(Pt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Bt=Object(l.b)(Rt);o.a.render(a.a.createElement(c.a,{store:Rt},a.a.createElement(s.a,{loading:null,persistor:Bt},a.a.createElement(Lt,null))),document.getElementById("root"))}},[[179,2,1]]]);
//# sourceMappingURL=main.cb0c11cb.chunk.js.map