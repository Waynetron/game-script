{"version":3,"sources":["Game/images sync /^/.//.*/.png$","Game/images/tiles/tile0.png","Game/images/tiles/tile1.png","Game/images/tiles/tile2.png","Game/images/tiles/tile3.png","Game/images/tiles sync /^/.//.*/.png$","icons/moon.svg","icons/sun.svg","icons/play.svg","icons/stop.svg","Game/images/brick.png","Game/images/goomba.png","Game/images/goombared.png","Game/images/no-image.png","Game/images/player.png","Game/images/questionbrick.png","Game/images/spike.png","icons/menu.svg","Code/reducer.js","Game/constants.js","util/state.js","util/parse.js","Game/physics.js","Game/reducer.js","SpriteEditor/reducer.js","reducers.js","firebase.js","debug/DebugColliding.js","Game/Sprite.js","Game/Game.js","Menu/Menu.js","Game/Loop.js","ImagePicker/ImagePicker.js","Code/Code.js","SpriteEditor/Tile.js","SpriteEditor/SpriteEditor.js","Examples/exampleCode.js","Examples/ExamplesModal.js","App/App.js","App/actions.js","Game/actions.js","index.js"],"names":["map","./brick.png","./goomba.png","./goombared.png","./no-image.png","./player.png","./questionbrick.png","./spike.png","./tiles/tile0.png","./tiles/tile1.png","./tiles/tile2.png","./tiles/tile3.png","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","./tile0.png","./tile1.png","./tile2.png","./tile3.png","p","initialCode","defaultState","level","Plain","deserialize","legend","rules","gameReducer","state","arguments","length","undefined","action","type","objectSpread","TOP","LEFT","RIGHT","createNewSprite","name","x","y","position","prevPosition","velocity","maxVelocity","acceleration","friction","colliding","top","bottom","left","right","static","inputs","trimBrackets","rawString","string","trim","isObject","openIndex","indexOf","closeIndex","lastIndexOf","substr","states","UP","DOWN","FAST_UP","FAST_DOWN","FAST_LEFT","FAST_RIGHT","SLOW_UP","SLOW_DOWN","SLOW_LEFT","SLOW_RIGHT","JUMP","DEAD","dead","STATIC","STATIONARY","WIN","win","<UP>","<DOWN>","<LEFT>","<RIGHT>","<ACTION>","<ACTION1>","<ACTION2>","getCollidingForSide","side","traverseDirection","currentIndex","nextIndex","collidesWith","console","error","nextColliding","defineProperty","getColliding","direction","leftStates","leftIndex","frontSide","down","up","directionToSide","backSide","forward","getOpposite","frontColliding","backColliding","wordsToState","words","names","statesArr","word","includes","_word$split","split","_word$split2","slicedToArray","number","Number","isNaN","rightState","resultState","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","Symbol","iterator","next","done","stateObj","value","merge","err","return","propertyRegex","wordRegex","objectRegex","numberRegex","isWord","Boolean","match","isProperty","isNumberString","splitOnFirstWordGroup","numOpenBrackets","i","char","charAt","slice","splitOnObject","_string$match","property","replace","remainder","concat","splitOnProperty","_string$match3","_string$match5","numberString","stringToWordGroups","_splitOnFirstWordGrou","_splitOnFirstWordGrou2","rest","toConsumableArray","stringToState","wordGroups","group","_property$split","_property$split2","trimmed","innerState","valueState","propertyToState","parseFloat","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","push","_i","getStateTransitions","sprites","transitions","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","sprite","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","rule","_rule","matches","isAlive","isCreateNewState","createNew","isCollisionRule","line","isRule","isLevel","isLegend","isVariable","standardExpansions","ALL","HORIZONTAL","VERTICAL","replaceWord","newWord","newLine","isExpandable","expansions","_arr2","_i2","key","expandRules","lines","notExpandable","filter","expanded","flatten","_arr","entries","_ref3","_ref2","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","expandRule","addImplicitKeywords","_line$split5","appendedLine","parseRules","variables","_ruleStrings2","_ref4","_ruleStrings4","customExpansions","regularRules","ruleStrings","ruleString","_ruleString$split","_ruleString$split2","ruleStringToState","collisionRules","_ruleString$match","firstWord","toLowerCase","_ruleString$replace$s","_ruleString$replace$s2","leftWordGroupArrays","rightWordGroupArrays","rightStates","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","leftStatesWithColliding","index","rightIndex","matchingLeft","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","subState","newSprite","leftState","collisionRuleStringToState","collisionCreate","collisionModify","modify","create","roundToPixels","Math","round","getEdges","isOverlapping","spriteA","spriteB","a","b","overlapsPoint","point","padding","_getEdges","overlapsSide","points","getPointsForSide","getCollidedEdges","prevEdgesA","prevEdgesB","collidedEdges","getSeparatedState","edgeA","edgesB","applySpriteCollisions","newSpriteA","storePreviousPosition","applyAcceleration","max","min","applyVelocity","resetColliding","snapNearZero","num","abs","applyFriction","currentView","width_in_tiles","height_in_tiles","active","theme","debug","imageMap","regular","stateTransitions","images","removeComments","join","_sprites9","variableName","imageName","_ref5","serialize","forEach","_line$split$map","str","_line$split$map2","symbol","randIndex","floor","random","parseLegend","row","col","getName","uniqid","parseSprites","namesArr","_line$split","parseNames","reduce","obj","item","results","_line$split3","_line$split4","expansion","parseVariables","imageAvailable","_getLevelDimensions","getLevelDimensions","_getLevelDimensions2","width","height","stateToAdd","vectorA","vectorB","newState","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","transition","_transition","getNewStateToAdd","winners","newSprites","addNewState","edge","collidingSprite","updateSpriteCollidingState","newStates","result","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","mergeWith","applyStateTransitions","newPosition","applyWallCollisions","input","newInputs","initialTileSets","tileImages","rasterise","tileSet","canvas","document","createElement","ctx","getContext","rowIndex","colIndex","tileImage","image","Image","onload","log","drawImage","src","toDataURL","tileSets","open","spriteEditorReducer","combineReducers","codeReducer","game","spriteEditor","firebaseInitialized","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","enablePersistence","catch","DebugColliding","_ref","react_default","className","getPositionStyle","Sprite","img","style","require","alt","DebugColliding_DebugColliding","Game","src_Game_Sprite","Menu","play","onClick","connect","dispatch","onTimeChange","request","useEffect","requestAnimationFrame","advanceFrame","cancelAnimationFrame","onSelect","Tooltip_default","interactive","title","grammar","comment","variable","pattern","RegExp","getContent","token","content","decorateNode","node","editor","others","texts","getTexts","toArray","t","text","tokens","Prism","tokenize","decorations","startText","shift","endText","startOffset","endOffset","start","newlines","end","available","remaining","dec","anchor","offset","focus","mark","renderMark","props","children","attributes","_node$text$split$map","_node$text$split$map2","src_ImagePicker_ImagePicker","assign","opacity","fontWeight","onUpdateRules","onUpdateLevel","onUpdateLegend","compile","_useState","useState","_useState2","setExpanded","toggleExpanded","section","react","slate_react_es","onChange","spellCheck","Tile","SpritePicker","selectedTileSet","Preview","tiles","selectedTile","rowArr","tileIndex","src_SpriteEditor_Tile","TilePicker","updateTileSets","onClose","setSelectedTileSet","_useState3","_useState4","setSelectedTile","Dialog_default","SpriteEditor_SpritePicker","SpriteEditor_Preview","newTileIndex","newTileSets","SpriteEditor_TilePicker","examples","simple_movement","simple_platformer","four_way_movement","loadPreset","levelText","legendText","rulesText","visible","setVisible","stopPropagation","react_textarea_autosize_esm_browser","firestore","firebaseAppAuth","auth","providers","googleProvider","firebaseApp","GoogleAuthProvider","darkColors","primary","secondary","dark","light","lightColors","keyMap","sequence","action1","action2","cancel_up","cancel_down","cancel_left","cancel_right","cancel_action1","cancel_action2","handlers","onSetInput","onCancelInput","onReset","onRun","onToggleDebug","isGameActive","r","d","space","appWithAuth","withFirebaseAuth","setGameActive","onToggleTheme","onOpenCloseSpriteEditor","user","signOut","save","load","signInWithGoogle","colors","react_custom_properties_default","properties","--primary-color","--secondary-color","--dark-color","--light-color","--hover-color","Examples_ExamplesModal","sun","moon","src_Code_Code","index_es","stop","Game_Loop","src_SpriteEditor_SpriteEditor","src_Game_Game","Menu_Menu_Menu","setInput","cancelInput","collection","doc","set","then","docRef","get","exists","_doc$data","data","store","createStore","rootReducers","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","es","src_App_App","getElementById"],"mappings":"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","file":"static/js/main.4a0dcf1d.chunk.js","sourcesContent":["var map = {\n\t\"./brick.png\": 422,\n\t\"./goomba.png\": 423,\n\t\"./goombared.png\": 424,\n\t\"./no-image.png\": 425,\n\t\"./player.png\": 426,\n\t\"./questionbrick.png\": 427,\n\t\"./spike.png\": 428,\n\t\"./tiles/tile0.png\": 177,\n\t\"./tiles/tile1.png\": 178,\n\t\"./tiles/tile2.png\": 179,\n\t\"./tiles/tile3.png\": 180\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 125;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAChJREFUWAnt0IEAAAAAw6D5Ux/khVBhwIABAwYMGDBgwIABAwYMvA8MECAAAc4qtccAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAADZJREFUWAnt0EENAEAIA8HjzOMGi5Bggs/UwDYT2dXvcP+wvWkHCBAgQIAAAQIECBAgQIAAgQGlEANzhaA9CAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAN1JREFUWAnF0EsOwyAQg2HUi7VH867H6RFT/4tIUZQHkBmwxHb8mVIm5rv8Pq+J/VRrGoD1pSzvaQDW+5UpgHX9NICLRTkZ/gPb9VMALhXFa4b+wH49iKEA94nSbYYBjtYDGQZwlyjcZwjgbD2YIQD3iLKjpAOu1gNKB7hDFJ0lFXC3HlQqwPdFyVXSADXrgaUBfFsU3CUFULseXArAd8XxmoQDWtYDDAf4pjhcm1BA63qQoQDfE0dbEgboWQ80DOBb4mBrQgC968GGAHxHHOvJY8CT9YAfA3xDHOrNH5CJQjHdlUHlAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAARJJREFUWAljZCASrPp/le0ew23H/wz//RgZGLT+MzBIMTD8B2IGHiKNwKoMaBZ+0PV/q8Q/hl91QAujgRby4VdNuixOB0z6v439K8PPaqCCIqCvuUk3mjgdWB0A8fXP9UBfWxBnDPmqMBzQ/X+j3l+Gv1uBlsuQbyzxOlEcAPX5aXpZDnImE8ytoDj/xwAOdrr4HGYvC4wBSnBANs3jHGYfjAZHATSr3aFlaodZiE6DowCSz2mX1dAtReYzgUo4SCGDLEw/NhOoeKVFCUesF5hAZTuximmhjgmYCrVoYTCxZgJDAFSrDRwA5gJwlTpgLgBlQ4rqc0pdDi+KKTWIXP2jDhgNgdEQGA2B0RAYDYHREAAA23dKamEoqhoAAAAASUVORK5CYII=\"","var map = {\n\t\"./tile0.png\": 177,\n\t\"./tile1.png\": 178,\n\t\"./tile2.png\": 179,\n\t\"./tile3.png\": 180\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 202;","module.exports = __webpack_public_path__ + \"static/media/moon.80d90aa7.svg\";","module.exports = __webpack_public_path__ + \"static/media/sun.8b9d1e17.svg\";","module.exports = __webpack_public_path__ + \"static/media/play.e5a8524f.svg\";","module.exports = __webpack_public_path__ + \"static/media/stop.f437901f.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAD5JREFUWAnt10ERADAIA7Ax87iZRXao6CcYaMmv1fPmJC9ZYLNv8vnNVoAAAQIECBAgQIAAAQIECFRyHe84/XTlDQmQUCOUAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAYdJREFUWAntVz1LA0EQfbuEeAgi2EWsBCsL/0JqKytLf4KV+IGQIiDxxMqfYBOwECvr/AULK8FKSCeIzWlx6zzjQdibDRdwL80NhNy8zMx7O3N3YQzEUve4kePrCnBdcTvEItoYMCOLpeMTs/tmSO6QPTlgLSJpqbQB3g2Sndbk5PWSUw0P7KTr9q/tJYX1AK4rAqLPfNZZOhSwUGsENB1oOhDqwDdgTxMsr/PDa3lWBatslfNbeknbOzN76dRv6cA9iJtfTmEzLqvnqx1IkNz61TXMjyl8LVbDGK8KKArV8a0KyJAd+OQa5scUvharYYw3A3cv/4wl403UK9o2Sc77EtUuRepA5fyQAL1sBFQdQQSeYMlGQOBFJHcn7Pkmtq73zfY8b0C11Xfuuf2KlyOH/MIPCI5gBas3/0FOQtZhPZ+cflDAJz4OqVxLmhdjHdbT8prHMDgCrV0xMAqQXW1hNhYBZrQwei6p3FK5KNYtgpzktr8rsmyp0omhiKhjHMJhhtyMyf0DfCpzwbzHSMoAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAYxJREFUWAntV0FKw1AQnT82WRQqtDvFdbdewVN06RFciRUCLiwFI648QjdCT+EV3HYtuEvRgosEE+dFAk2Y3ybgTzcZKM1M3rw3mUk+/xsS+w7DsyRJHg3RRZZlJ4i5MmPMR0b06nneTX86fTe5eBy/ieDIlaiFN/J8/5zx5AcQR00jaDPaDu8QBm12PfNdDwZt3gVo415XQNeBrgNqB2SBiA3zbY/5FD9cI1b3s2yS31NJme+OgyDcuhd+zedEafqwFbNfNshXO3BEtKiya7EqpvA1rBYDXi2gIGrjXy3gh+iyKq7FqpjC17BaDHjzOZvJ/qBs+Qsncyzalien6b0A/TJS95rkqwXotG6i6gjcSOmsXQH6QiTdkt1rMBiPn8xkUnsF1JtMlC2X/ma1upYdkKxmZbOOYDAcPv+HOOTAA76y9J9nLWCzXl+hci2paSzvgPBped1naB2B1i4XMcZZzQVxHU5oMw6KdcAuMNBmnFKFPHIhsIczgjbjiIxTqqw8L22MI9cQLWhC+xfEpII8G45emQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAW5JREFUWAntlsFOwzAMhu1qrwMSnOAtYOLCk3SDM6IVD8IFTeMp2AleqJqxS5JtrsucCSlCai6J7dj/lyxWh8+0Iig5SgKIdlXy8KI9AUw38P9uoKH12W+dcyyuc7NuoKX1HQF9cv82upDY4pe47LPils8NIEW3QK8ANONCtYYIdi1x2eeFcAEo8XiQBLETjyE/hAuAT3QZTh4V4iwQH2zwyfWgGcH2Qnu17QJY4u0DJ7Y6OdhXI/52gfPHkVhyuwBk9xLnC57GIFLBsGjDfu0f2G4AyXRCuMWlZhaAJPz1yAIYvnYTJ3WHGVVON4BTPJZ3Q7gAGlo9cWWj1Xq9TVRVcx3ylPvQdAEgVF8A2B2m9pY8uGteGd2B3U+ekbXncgHUePNWAd4riPTah92BneyXvD0tc+kCkEwFkcRj1R2EX7zP5ceV9bf8hd7Po6g153yOe+1cAEv0VJ9ou3+CU0WO5U0A0w0UvwEs2YbSId8ezJqOYuBQ4gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAU5JREFUWAljZCAA2v+v+09ACU5pRgbG/xWMgUw4FQAl8Eri00gtuVEHjIbAaAgMeAgwUlLQUKMsGPAQGHXAaAjgDAFgVTodhClN6YTMwZkNKxmDGEGWU5JNkdsDuMzBGQKU+pxY/SyEFMJCgpA6cuUJhgAw6Cb+//8fHB2kWALS0/F/fSchPQQdADQgr5Nhw2yggcSoBdu3//9+FqCeeUBOKTUcwPCf4X9yJ8P6pSCDCRnY9/8Y50mGD8CW7P8EQmpB8gSDFi31buJm4AjLY/T6ic3w/v/rBX4wMGxiYPhvCzGc+q1iv68MP7fM/L+ZC90B/f93SP5g+H8QZjlIHhgKBD1IdLwiLPzv8p7hz87e/xtkYWLd/zfq/WT4fhTI14OJEUsTjFNsBgF9ZvOL4f8joBzYh38Y/l7Epo4YMTJCgBhjiVcz6oDREBjwEAAAwOJpSUqjPhYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAX5JREFUWAlj/Njc/J9hIMFAOgBkN9NAeh5k96gDRkNgNARYKMmGXzs7pf78/i3HxsDwnLOm5iE5ZpHlgM9tbaL//v1b9OfXLw+Qpb+A+FNLyz5eLq5QxqKid6Q4hKw0ALR8McP//2DLGRgZ7zEyMv79//+/0+evXyeSYjlILckO+N/fLwDUpwXEX4AWJ/DX1Cj/Z2QsBRkGpO1BNCmA5ChgLCz8ALRADmYJ0OeMn1ta7EA1GuP//49g4sTSJDsA2WCw5a2tM4CWB4CiAYhrkeWJYZMcBciGfm5tLQY6Ig1sOQNDOG919X5keWLYFDkA6HN3kCVAejZvTc1aYixEV0NRFDAyMTUBDZzKwMx8Hd1gYvmUhcD//4oMf/+mMv/7x0WshejqKAoBYFkwDRj83H///AGVRYHohhPDpygEGBkY9gATIDD7M+4lxjKsaihtE/6fOZPs4KdKm5AxPf0bVp8RKUhRFBBpB15low4YDYHREBjwEGCktCTEm8mJkAQABD53sd5+Ls8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAhVJREFUWAm9lulOwkAUhaf1WXCNStwIavzhGmOMxrihj+JSTFqsPgpv4Wv4Fmw/JHSuR5Lb2NJhpqWUhEw7c++Z75wuIMQEn9bnZ6nruo8TSAh7kmbr5+dVEjnUbM5k1ckM0G40ZoVl1UiIUvv7+6FwAAoCh4iGzi2iJxxnMpOpCe7nLSHu2TVSmOt5Xo3P04yZAIbuRfT+kUI8Z0khNUDn42MB7m/jLrH5PFK4i8/rzlMDyH6/jsgT+7KkkCikou74/hLcX6vWkcJi1/NuVOtJ86kAaDBwVO5ZHBAv+ILT7GMM0PX9ZUgq3fN2AFxCCto6rjcGkH/uDZ2lScEIAI5WQHzF1LoRKSyjx6jeCADv+7qpe4YzTUELACdliF6ysOmIFFY7nqft0wJkcc+QgHjlY9U4FgBvtjVEeaFq1s4TlduuO7Z/LECAa6/dRFOgS0EJ0Ht/X4f7c42+fploDSkodZQAQRC86dXNKsalkAgA95twf2Ymb1BFtNHyvES9RIA83Yd4RIlPxAhAq9GowP1p2JjXAdEWUhjRHQEQUuZ27ePslpROfC4CgP96VUF0Ei/K6xw3YwVv1oh+BICkrOe1mUpHxlIIAfCsbsP9saoxr3mkUEUKR6wXAmBhateeN+PxfwpDALjfhftDLpj2CLM7SOHgbx9OoDD3bI5TsDquu4ef3C9eKHK0bXvfLvLax83hqXN+AWhR9c/gEiSNAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/menu.25a60c04.svg\";","import Plain from 'slate-plain-serializer';\n\nconst initialCode = {\n  level:\n`##################\n#                #\n#                #\n#                #\n#                #\n#                #\n#     ###?#      #\n#                #\n#    P       G   #\n##################`,\n  legend:\n`P = Player\n# = Brick\n? = QuestionBrick\nG = Goomba`,\n  rules:\n`// Accelerate down, like gravity\n{ Player } -> { DOWN Player }\n{ Goomba } -> { DOWN Goomba }\n\n// Move sideways with <LEFT> and <RIGHT> arrow keys\n{ <HORIZONTAL> Player } -> { HORIZONTAL Player }\n\n// Jump when <UP> is pressed and when the bottom of Player\n// is touching Wall (Wall = anything)\nDOWN { <UP> Player | Wall } -> { JUMP Player | Wall }\n\n// Player dies if touching Goomba on the side\nHORIZONTAL { Player | Goomba } -> { DEAD Player | Goomba }\n\n// Jumping on top of Goomba kills the Goomba\nDOWN { Player | Goomba } -> { Player | DEAD Goomba }\n\n// Break bricks by head-butting\nUP { Player | Brick } -> { Player | DEAD Brick }\n\n// Head-butting QuestionBrick turns it into another Player\nUP { Player | QuestionBrick } -> { Player | JUMP Player }`\n}\n\nconst defaultState = {\n  level: Plain.deserialize(initialCode.level),\n  legend: Plain.deserialize(initialCode.legend),\n  rules: Plain.deserialize(initialCode.rules)\n}\n\nconst gameReducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'UPDATE_LEVEL':\n      return {...state, level: action.level}\n    case 'UPDATE_LEGEND':\n      return {...state, legend: action.legend}\n    case 'UPDATE_RULES':\n      return {...state, rules: action.rules}\n    case 'LOAD_SUCCESS':\n      return {\n        ...state,\n        level: action.level,\n        legend: action.legend,\n        rules: action.rules\n      }\n    case 'LOAD_PRESET':\n      return {\n        ...state,\n        level: action.level,\n        legend: action.legend,\n        rules: action.rules\n      }\n    default:\n      return state\n  }\n}\n\nexport default gameReducer","\nexport const TILE_SIZE = 32;\nexport const MAX_VELOCITY = 20;\nexport const TOP = 'top';\nexport const BOTTOM = 'bottom';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';","import uniqid from 'uniqid';\nimport {matches, mergeWith, merge} from 'lodash';\nimport {MAX_VELOCITY, TILE_SIZE} from '../Game/constants.js';\n\nexport const createNewSprite = (name, x, y)=> ({\n  name: name,\n  position: {x, y},\n  prevPosition: {x, y},\n  velocity: {x: 0, y: 0},\n  maxVelocity: {x: MAX_VELOCITY, y: MAX_VELOCITY},\n  acceleration: {x: 0, y: 0},\n  friction: 0.15,\n  colliding: {\n    top: [],\n    bottom: [],\n    left: [],\n    right: []\n  },\n  static: false,\n  inputs: {}\n});\n\n// also removes a single space on the outside of the bracket (if one exists)\n// otherwise it's possible to end up with multiple spaces where brackets stack\n// eg: '{ velocity: { y: -150 } }'   *could become*   ' velocity: { y: -150  }'\nexport const trimBrackets = (rawString)=> {\n  const string = rawString.trim()\n    if (!isObject(string)) {\n      return rawString\n    }\n    const openIndex = string.indexOf('{');\n    const closeIndex = string.lastIndexOf('}');\n    \n    return string.substr(openIndex + 1, closeIndex - 1).trim();\n}\n\nconst states = {\n  UP: {acceleration: {y: -1}},\n  DOWN: {acceleration: {y: 1}},\n  LEFT: {acceleration: {x: -1}},\n  RIGHT: {acceleration: {x: 1}},\n  FAST_UP: {acceleration: {y: -6}},\n  FAST_DOWN: {acceleration: {y: 6}},\n  FAST_LEFT: {acceleration: {x: -6}},\n  FAST_RIGHT: {acceleration: {x: 6}},\n  SLOW_UP: {acceleration: {y: -0.5}},\n  SLOW_DOWN: {acceleration: {y: 0.5}},\n  SLOW_LEFT: {acceleration: {x: -0.5}},\n  SLOW_RIGHT: {acceleration: {x: 0.5}},\n  JUMP: {velocity: {y: -150}},\n  DEAD: {dead: true},\n  STATIC: {static: true},\n  STATIONARY: {velocity: {x: 0, y: 0}},\n  WIN: {win: true}\n};\n\nconst inputs = {\n  '<UP>': 'up',\n  '<DOWN>': 'down',\n  '<LEFT>': 'left',\n  '<RIGHT>': 'right',\n  '<ACTION>': 'action1',\n  '<ACTION1>': 'action1',\n  '<ACTION2>': 'action2'\n};\n\nconst getOpposite = (direction)=> {\n  const oppositeMappings = {\n    'left': 'right',\n    'right': 'left',\n    'top': 'bottom',\n    'bottom': 'top',\n    'up': 'down',\n    'down': 'up',\n    'forward': 'backward'\n  }\n\n  return oppositeMappings[direction];\n}\n\nconst directionToSide = (direction)=> {\n  const mappings = {\n    'left': 'left',\n    'right': 'right',\n    'down': 'bottom',\n    'up': 'top'\n  }\n\n  return mappings[direction];\n}\n\n// Recursively finds the colliding state\nconst getCollidingForSide = (side, traverseDirection, states, currentIndex)=> {\n  const nextIndex = traverseDirection === 'forward' ? currentIndex + 1 : currentIndex - 1;\n  // outside range\n  if (nextIndex < 0 || nextIndex === states.length) {\n    return;\n  }\n\n  const collidesWith = states[nextIndex];\n  if (!collidesWith) {\n    console.error('Expecting there to always be a state here');\n  }\n\n  let state = [{\n    ...collidesWith\n  }];\n\n  const nextColliding = getCollidingForSide(side, traverseDirection, states, nextIndex);\n  if (nextColliding) {\n    state.colliding = {\n      [side]: nextColliding\n    }  \n  }\n\n  return state;\n}\n\nconst getColliding = (direction, leftStates, leftIndex)=> {\n  // direction refers to the direction the collision rule is applied in.\n  // getCollidingForSide('bottom', 'forward' ... refers to searching for the\n  // colliding state for the bottom side by traversing the ruleString to the\n  // right (forward)\n  let colliding = {};\n  const frontSide = directionToSide(direction);\n  const backSide = getOpposite(frontSide);\n  const frontColliding = getCollidingForSide(frontSide, 'forward', leftStates, leftIndex);\n  const backColliding = getCollidingForSide(backSide, 'backward', leftStates, leftIndex);\n\n  if (backColliding) {\n    colliding[backSide] = backColliding;\n  }\n\n  if (frontColliding) {\n    colliding[frontSide] = frontColliding;\n  }\n\n  if (frontColliding || backColliding) {\n    return colliding; \n  }\n  else {\n    return;\n  }\n}\n\n/*\nStarts withObject.keys( ).length > 0 ? colliding : undefined;\n  [ UP Player | Spike ] -> [ DEAD Player | Spike ]\nBreaks up into 2 rules\n  [ UP Player] -> [ DEAD Player]\n  [ Spike ] -> [ Spike ]\nEvaluate both rules into a pair of state transitions\n[\n  {name: \"Player\", acceleration: {x: 1, y: 0}},\n  {name: \"Player\", dead: true}\n]\n[\n  {name: \"Spike\"},\n  {name: \"Spike\"}\n]\n// Finally adds a colliding property to the left side each state transition\n[\n  {\n    name: \"Player\", acceleration: {x: 1, y: 0},\n    colliding: {\n      top: {name:'Spike'}, bottom: {name:'Spike'},\n      left: {name:'Spike'}, right: {name:'Spike'}\n    }\n  },\n  {name: \"Player\", dead: true}\n]\n[\n  {\n    name: \"Spike\",\n    colliding: {\n      top: {name:'Player'}, bottom: {name:'Player'},\n      left: {name:'Player'}, right: {name:'Player'}\n    }\n  }\n  {name: \"Spike\"}\n]\n*/\nexport const collisionRuleStringToState = (ruleString, names)=> {\n  // Get collision direction (first word at the start of the line)\n  const [firstWord] = ruleString.match(/^([A-Z]+)\\b/);\n  const direction = firstWord.toLowerCase();\n\n\n  // Get the left and right matches\n  const [left, right] = ruleString.replace(firstWord, '').split('->');\n\n  // <------- leftWordArrays ----->    <--- rightWordArrays -->\n  // <---words--> < ----words----->    <-words-> <---words---->\n  // [ UP Player | Goomba | Brick ] -> [ Player | DEAD Goomba ]\n\n  const leftWordGroupArrays = trimBrackets(left).split('|')\n    .map((string)=> stringToWordGroups(string))\n\n  const rightWordGroupArrays = trimBrackets(right)\n    .split('|')\n    .map((string)=> stringToWordGroups(string))\n\n  let leftStates = [];\n  let rightStates = [];\n\n  // Left\n  // The left side is what the rule is looking to match.\n  // The colliding state should recursively nest colliding states if the rule\n  // has multiple collisions\n  for (const words of leftWordGroupArrays) {\n    const state = {\n      ...wordsToState(words, names)\n    }\n\n    leftStates.push(state);\n  }\n\n  const leftStatesWithColliding = leftStates.map((state, index)=> {\n    const colliding = getColliding(direction, leftStates, index);\n\n    if (colliding) {\n      return {\n        ...state,\n        colliding: getColliding(direction, leftStates, index),\n      }\n    }\n    else {\n      return state;\n    }\n  });\n\n  // Right\n  // The right state is any changes to the left state. And includes the creation\n  // of completely new state.\n  let rightIndex = 0;\n  for (const words of rightWordGroupArrays) {\n    const matchingLeft = leftWordGroupArrays[rightIndex]\n    let state = {};\n    if (matchingLeft) {\n      // If there's a matching left state, then this state is a transition of that\n      // state. It may be a small change like adding DEAD to a Player.\n      // Eg: [ Mario | Goomba ] -> [ DEAD Mario | Goomba ]\n      \n      // Flatten and merge all the states together into a single state object\n      const states = words.map((string)=> stringToState(string, names))\n      for (const subState of states) {\n        merge(state, subState);\n      }\n    }\n    else {\n      // If there is no matching let state, then this is a completely new state.\n      // Eg: the fireball in this rule: [ <ACTION> Mario ] -> [ Mario | Fireball ]\n      const newSprite = createNewSprite('TEMP_NAME', 0, 0);\n      state = {\n        ...newSprite,\n        // indicates to applyRules not to merge this but create new state\n        createNew: {direction},\n        ...wordsToState(words, names)\n        // I don't think the right side needs the colliding state calculated\n      }\n\n      // Duplicate the leftmost match state as the match for this new state\n      leftStatesWithColliding.push({...leftStates[0]});\n    }\n\n    rightStates.push(state);\n    rightIndex += 1;\n  }\n\n  // State pairs to state transitions\n  return leftStatesWithColliding.map((leftState, index)=> [leftState, rightStates[index]]);\n\n  // const leftStateA = wordsToState(leftWordsA, names);\n  // const leftStateB = leftWordsB\n  //   ? wordsToState(leftWordsB, names)\n  //   : newSprite()\n    \n  // const rightStateA = wordsToState(rightWordsA, names);\n\n  // // User may omit rightWordsB. In which case populate it with leftWordsB\n  // // Eg: [ <ACTION> Player | Ground ] -> [ JUMP Player ]\n  // // Becomes: [ <ACTION> Player | Ground ] -> [ JUMP Player ]\n  // const rightStateB = wordsToState(rightWordsB ? rightWordsB : leftWordsB, names);\n\n  // // Pay close attention to the flipping of A and B for certain variables.\n  // // collidingA is used as the colliding state for spriteB and vice-a-versa\n  // let collidingA = {};\n  // collidingA[getOpposite(directionToSide(direction))] = [{...leftStateA}]\n\n  // let collidingB = {};\n  // collidingB[directionToSide(direction)] = [{...leftStateB}]\n\n  // const pairA = [\n  //   {...leftStateA, colliding: collidingB},\n  //   rightStateA\n  // ];\n  // const pairB = [\n  //   {...leftStateB, colliding: {...collidingA}},\n  //   rightStateB\n  // ];\n\n  // return [pairA, pairB];\n}\n\nconst wordsToState = (words, names)=> {\n  /* Turn those words into arrays of key value objects\n    [\n      [{name: \"Goomba\"}],\n      [{name: \"Goomba\"}, {acceleration: {x: 1}}]},\n      [{name: \"Goomba\"}, {acceleration: {y: 1}}]}\n    ]\n  */\n  const statesArr = words.map((word)=> {\n    if (names[word]) {\n      return ({\n        name: word\n      });\n    }\n    if (inputs[word]) {\n      return ({\n        inputs: {[inputs[word]]: true}\n      });\n    }\n    if (states[word]) {\n      return ({\n        ...states[word]\n      })\n    }\n\n    if (word.includes(':')) {\n      const [left, right] = word.split(':')\n\n      // Number\n      const number = Number(right.trim())\n      if (typeof number === 'number' && !isNaN(number)) {\n        return {[left]: number}\n      }\n\n      // Object\n      const rightState = wordsToState([right.trim()], names)\n      return {[left]: {...rightState}}\n    }\n\n    return {};\n  });\n\n  /* Flatten and merge all the states together into a single state object:\n    {name: \"Goomba\", acceleration: {x: 1, y: 1}}\n  */\n  let resultState = {};\n  for (const stateObj of statesArr) {\n    merge(resultState, stateObj);\n  }\n\n  return resultState;\n};\n\nconst propertyRegex = /^\\b[a-z_]+\\b\\s{0,1}[:]/i // property can't have space before colon\n// word can still match on ':', so must come after property\nconst wordRegex = /^[<]{0,1}[a-z_]+[0-9a-z_]*[>]{0,1}/i\nconst objectRegex = /^\\{/i // simply checks if string starts with '{'\nconst numberRegex = /^[-]{0,1}[0-9]*[.]{0,1}[0-9]+/\n\nconst isWord = (string)=> Boolean(string.match(wordRegex))\nconst isProperty = (string)=> Boolean(string.match(propertyRegex))\nconst isObject = (string)=> Boolean(string.match(objectRegex))\nconst isNumberString = (string)=> Boolean(string.match(numberRegex))\n\nconst splitOnProperty = (string)=> {\n  const [property] = string.match(propertyRegex)\n  const name = property.trim().replace(':', '')\n  const right = string.replace(property, '').trim()\n  \n  let numOpenBrackets = 0\n  for (var i = 0; i < right.length; i++) {\n    const char = right.charAt(i)\n\n    if (numOpenBrackets < 0) {\n      console.error('more closing brackets than opening brackets')\n    }\n\n    if (char === '{') {\n      numOpenBrackets++\n    }\n    else if (char === '}') {\n      numOpenBrackets--\n    }\n    else if (char === ' ' && numOpenBrackets === 0) {\n      const value = right.slice(0, i + 1).trim()\n      const remainder = right.slice(i + 1).trim()\n      \n      return [\n        `${name}: ${value}`,\n        remainder\n      ]\n    }\n  }\n\n  if (numOpenBrackets !== 0) {\n    console.error('unclosed brackets')\n  }\n  \n  // Made it to the end:\n  // value is entire string, no remainder\n  return  [`${name}: ${right}`, '']\n}\n\nconst splitOnObject = (string)=> {\n  let numOpenBrackets = 0\n  for (var i = 0; i < string.length; i++) {\n    const char = string.charAt(i)\n\n    if (numOpenBrackets < 0) {\n      console.error('more closing brackets than opening brackets')\n    }\n\n    if (char === '{') {\n      numOpenBrackets++\n    }\n    else if (char === '}') {\n      numOpenBrackets--\n    }\n    else if (char === ' ' && numOpenBrackets === 0) {\n      const objectString = string.slice(0, i + 1).trim()\n      const remainder = string.slice(i + 1).trim()\n\n      return [\n        objectString,\n        remainder\n      ]\n    }\n  }\n\n  if (numOpenBrackets !== 0) {\n    console.error('unclosed brackets')\n  }\n  \n  // Made it to the end:\n  // value is entire string, no remainder\n  return  [string, '']\n}\n\nconst splitOnFirstWordGroup = (rawString)=> {\n  const string = rawString.trim()\n\n  if (isObject(string)) {\n    return splitOnObject(string)\n  }\n\n  if (isProperty(string)) {\n    return splitOnProperty(string)\n  }\n\n  if (isWord(string)) {\n    const [word] = string.match(wordRegex)\n\n    return [word.trim(), string.replace(word, '')]\n  }\n\n  if (isNumberString(string)) {\n    const [numberString] = string.match(numberRegex)\n\n    return [numberString, string.replace(numberString, '')]\n  }\n\n  console.error('made it to the end without returning anything:', string)\n}\n\nconst stringToWordGroups = (string)=> {  \n  const [left, rest] = splitOnFirstWordGroup(string)\n\n  if (rest.length === 0) {\n    return [left]\n  }\n\n  return [left, ...stringToWordGroups(rest)]\n}\n\nconst propertyToState = (property, names)=> {\n  const firstColonRegex = /:(.+)/ \n  // the (.+) in the regex is to ensure the rest of the string is included in the 2nd arg\n  // without it, the string will split on every colon, not just the first\n  const [name, right] = property.split(firstColonRegex)\n  \n  if (isObject(right.trim())) {\n    const trimmed = trimBrackets(right.trim())\n    const innerState = stringToState(trimmed, names)\n    \n    return {\n      [name]: {...innerState},\n    }\n  }\n  else {\n    const valueState = stringToState(right.trim(), names)\n\n    return {\n      [name]: valueState,\n    }\n  }\n}\n\n// input: '{ Player carrying: Brick }'\n// output: { name: 'Player', carrying: {name: 'Brick'} }\nconst stringToState = (string, names)=> {\n  const wordGroups = stringToWordGroups(string)\n\n  if (wordGroups.length === 0) {\n    console.error('No word groups')\n  }\n  else if (wordGroups.length === 1) {\n    const [group] = wordGroups\n\n    // Property\n    if (isProperty(group)) {\n      return propertyToState(group, names)\n    }\n\n    // Expandable keyword\n    if (isWord(group)) {\n      return wordsToState([group], names)\n    }\n\n    if (isNumberString(group)) {\n      return parseFloat(group)\n    }\n\n    console.error('not dealing with:', wordGroups)\n    return {}\n  }\n\n  let states = []\n  for (const group of wordGroups) {\n    states.push(stringToState(group, names))\n  }\n\n  // Flatten and merge all the states together into a single state object\n  let resultState = {};\n  for (const state of states) {\n    merge(resultState, state);\n  }\n\n  return resultState\n}\n\n// { Player } -> { Player carrying: Brick }\nexport const ruleStringToState = (ruleString, names)=> {\n  const [left, right] = ruleString.split('->')\n\n  return [\n    stringToState(trimBrackets(left), names),\n    stringToState(trimBrackets(right), names)\n  ]\n}\n\nconst addVectors = (vectorA, vectorB)=> ({\n  x: vectorA.x + vectorB.x,\n  y: vectorA.y + vectorB.y\n});\n\nconst getDirectionOffset = (direction)=> {\n  const directionOffsetsMap = {\n    up: {x: 0, y: -TILE_SIZE},\n    down: {x: 0, y: TILE_SIZE},\n    left: {x: -TILE_SIZE, y: 0},\n    right: {x: TILE_SIZE, y: 0}\n  }\n\n  return directionOffsetsMap[direction];\n}\n\nexport const getNewStateToAdd = (sprites, transitions)=> {\n  const newState = [];\n\n  for (const sprite of sprites) {\n    for (const transition of transitions) {\n      const [left, right] = transition;\n\n      if (matches(left)(sprite)) {\n        // Add new sprite + give it a unique ID\n        newState.push({\n          ...right,\n          id: uniqid(),\n          position: addVectors(sprite.position, getDirectionOffset(right.createNew.direction)),\n          createNew: undefined\n        });\n      }\n    }\n  }\n\n  return newState;\n}\n\nexport const addNewState = (sprites, newState)=> {\n  return [\n    ...sprites,\n    ...newState\n  ]\n}\n\n// custom merge rules\n// const mergeCustomizer = (objValue, srcValue)=> {\n//   if (isNumber(objValue)) {\n//     return objValue + srcValue;\n//   }\n// }\n\nexport const getStateTransitions = (rules, sprites)=> {\n  if (rules.length === 0) {\n    return []\n  }\n\n  const transitions = {}\n  for (const sprite of sprites) {\n    for (const rule of rules) {\n      const [left, right] = rule;\n      if (matches(left)(sprite)) {\n        if (!transitions[sprite.id]) {\n          transitions[sprite.id] = []\n        }\n        \n        transitions[sprite.id].push(right)\n      }\n    }\n  }\n\n  return transitions\n};\n\nexport const applyStateTransitions = (transitions, sprites)=> {\n  return sprites.map((sprite)=> {\n    const newStates = transitions[sprite.id]\n    if (newStates) {\n      let result = {...sprite}\n      for (const state of newStates) {\n        result = mergeWith(sprite, state)\n      }\n\n      return result\n    }\n\n    return sprite\n  })\n};\n\nexport const isAlive = (sprite)=> !sprite.dead;\nexport const isCreateNewState = (rule)=> {\n  const [, right] = rule;\n  return right.createNew !== undefined;\n};","import {createNewSprite, trimBrackets} from './state.js';\nimport {flatten} from 'lodash';\nimport {TILE_SIZE} from '../Game/constants.js';\nimport uniqid from 'uniqid';\nimport {ruleStringToState, collisionRuleStringToState, isCreateNewState} from '../util/state.js'\n\nconst isCollisionRule = (line)=> line.includes('|');\nconst isRule = (line)=> line.includes('->') && !isCollisionRule(line);\nconst isLevel = (line)=> line.match(/#.+#/g)\nexport const isLegend = (line)=> line.includes('=');\nconst isVariable = (line)=> line.match(/=[ ]{0,1}\\{/g)\n\nexport const parseLegend = (code)=> {\n  let legend = {};\n\n  code.split('\\n')\n    .filter(isLegend)\n    .forEach((line)=> {\n      const [symbol, right] = line.split('=').map((str)=> str.trim());\n      const names = right.split(' or ');\n      // this is a function to allow returning a random name in the case of:\n      // G = Goomba or Tree or Brick\n      legend[symbol] = ()=> {\n        const randIndex = Math.floor(Math.random() * names.length);\n        return names[randIndex];\n      }\n    });\n\n  return legend\n};\n\nconst removeEdges = (lines)=> (\n  lines.slice(1, -1).map((line)=> line.slice(1, -1))\n);\n\nexport const parseLevel = (code)=> (\n  code.split('\\n').filter(isLevel) |> removeEdges\n);\n\nexport const parseNames = (code)=> {\n  const lines = code.split('\\n').filter(isLegend);\n  const names = lines.map((line)=> {\n    const [, right] = line.split(' = ');\n    const words = right.split(' or ');\n    \n    return words;\n  });\n\n  return flatten(names);\n};\n\nexport const parseVariables = (code)=> {\n  const lines = code.split('\\n').filter(isVariable)\n\n  let results = {}\n  for (const line of lines) {\n    const [name, expansion] = line.split(' = ')\n    \n    // {CUSTOM_TEST: ['velocity: { y: 6 }']}\n    // expansion sits inside array because that is how it is done with the \n    // standardExpansions. Doesn't make a whole lot of sense here,\n    // but with the standardExpansions (DOWN, UP etc) they can have multiple expansions\n    // per name, so I just wanted to keep the implementation simple\n    results[name] = [trimBrackets(expansion)]\n  }\n\n  return results\n}\n\nexport const getLevelDimensions = (level)=> {\n  const width_in_tiles = level[0].length;\n  const height_in_tiles = level.length;\n  \n  return [width_in_tiles, height_in_tiles];\n}\n\nexport const parseSprites = (level, legend)=> {\n  const sprites = [];\n  level.map((line, row)=> line.split('').forEach((char, col)=> {\n    const getName = legend[char];\n    if (getName && getName() !== 'Empty') {\n      const x = col * TILE_SIZE;\n      const y = row * TILE_SIZE;\n      sprites.push(\n        {\n          id: uniqid(),\n          ...createNewSprite(getName(), x, y)\n        }\n      );\n    }\n  }));\n\n  return sprites;\n};\n\nexport const standardExpansions = {\n  ALL: ['UP', 'DOWN', 'LEFT', 'RIGHT'],\n  HORIZONTAL: ['LEFT', 'RIGHT'],\n  VERTICAL: ['UP', 'DOWN']\n}\n\n// replaces all occurrances of a word in a string with the given word\nconst replaceWord = (line, word, newWord)=> {\n  const newLine = line.replace(word, newWord)\n\n  // if more occurances of the word, then run replaceWord again\n  if (newLine.includes(word)) {\n    return replaceWord(newLine, word, newWord)\n  }\n\n  return newLine\n}\n\n/*\ntakes a single rule and expands it into several\nEg:\n  ALL [Player] -> [Player]\nBecomes:\n  UP [Player] -> [Player]\n  DOWN [Player] -> [Player]\n  LEFT [Player] -> [Player]\n  RIGHT [Player] -> [Player]\n */\nconst expandRule = (line, expansions)=> {\n  const lines = []\n  \n  for (const [key, words] of Object.entries(expansions)) {\n    if (line.includes(key)) {\n      for (const word of words) {\n        lines.push(\n          replaceWord(line, key, word)\n        );\n      }\n\n      // Return early once one keyword is dealt with\n      return lines;\n      /*\n      It's important to return early here once a keyword is found to prevent\n      this function from dealing with more than one keyword per execution\n      For example if a line contains both ALL and HORIZONTAL\n      Only one keyword can be dealt with per pass, else we end up with an output like:\n      UP [ _ ] -> [ HORIZONTAL ]\n      DOWN [ _ ] -> [ HORIZONTAL ]\n      LEFT [ _ ] -> [ HORIZONTAL ]\n      RIGHT [ _ ] -> [ HORIZONTAL ]\n      ALL [ _ ] -> [ LEFT ]\n      ALL [ _ ] -> [ RIGHT ]\n      Once the above expanded again, we would end up with a bunch of duplicate rules\n      */\n    }\n  }\n\n  return lines;\n}\n\nconst isExpandable = (line, expansions)=> {\n  for (const key of Object.keys(expansions)) {\n    if (line.includes(key)) {\n      return true\n    }\n  }\n\n  return false\n}\n\nexport const expandRules = (lines, expansions)=> {\n  const notExpandable = lines.filter((line)=> !isExpandable(line, expansions))\n  const expanded = flatten(\n    lines.filter((line)=> isExpandable(line, expansions))\n      .map((line)=> expandRule(line, expansions))\n  )\n\n  if (expanded.length === 0) {\n    // fully expanded, stop recursing\n    return lines\n  }\n  \n  return [\n    ...notExpandable,\n    ...expandRules(expanded, expansions)\n  ]\n}\n\n// If no direction given, then append 'ALL'. Otherwise use the given direction ('UP', 'DOWN', etc)\nexport const addImplicitKeywords = (line) => {\n  const [firstWord] = line.split('{');\n  \n  let appendedLine = line;\n  if (firstWord === '') {\n    appendedLine = line.replace('{', 'ALL {');\n  }\n\n  return appendedLine;\n}\n\nexport const parseRules = (code, names, variables)=> {\n  const customExpansions = variables\n  const expansions = {...customExpansions, ...standardExpansions}\n  \n  const regularRules = code\n    .split('\\n')\n    .filter(isRule)\n    |> ((ruleStrings)=> expandRules(ruleStrings, expansions))\n    |> ((ruleStrings)=> ruleStrings.map((string)=> ruleStringToState(string, names)))\n\n  const collisionRules = code\n    .split('\\n')\n    .filter(isCollisionRule)\n    .map(addImplicitKeywords)\n    |> ((ruleStrings)=> expandRules(ruleStrings, expansions))\n    |> ((ruleStrings)=> ruleStrings.map((string)=> collisionRuleStringToState(string, names)))\n    |> flatten\n  \n  // separate the collisionRules into 2 groups: \n  // those that will spawn new state\n  // and those that will modify existing state\n  const collisionCreate = collisionRules.filter(isCreateNewState);\n  const collisionModify = collisionRules.filter((rule)=> !isCreateNewState(rule));\n\n  return {\n    modify: [...regularRules, ...collisionModify],\n    create: collisionCreate\n  }\n}","import {\n  TILE_SIZE,\n  TOP, BOTTOM, LEFT, RIGHT\n} from './constants.js'\n\nexport const roundToPixels = (sprite)=> ({\n  ...sprite,\n  position: {\n    x: Math.round(sprite.position.x),\n    y: Math.round(sprite.position.y),\n  }\n});\n\nconst getEdges = (sprite)=> ({\n  top: sprite.position.y,\n  bottom: sprite.position.y + TILE_SIZE,\n  left: sprite.position.x,\n  right: sprite.position.x + TILE_SIZE\n});\n\nconst isOverlapping = (spriteA, spriteB)=> {\n  const a = getEdges(spriteA);\n  const b = getEdges(spriteB);\n  \n  return (\n    a.bottom > b.top &&\n    a.top < b.bottom &&\n    a.right > b.left &&\n    a.left < b.right\n  );\n};\n\nconst getPointsForSide = (side, sprite)=> {\n  // INSET is to prevent situations such as both TOP and LEFT/RIGHT colliding when 2 sprites are standing\n  // next to each other.\n  // It's not ideal because it means you do things like stand on a sprite just on the very outmost edge\n  // without triggering any UP DOWN collisions.\n  const INSET = 5;\n\n  if (side === LEFT) {\n    return [\n      {x: sprite.position.x, y: sprite.position.y + INSET},\n      {x: sprite.position.x, y: sprite.position.y + TILE_SIZE - INSET}\n    ]\n  }\n  if (side === RIGHT) {\n    return [\n      {x: sprite.position.x + TILE_SIZE, y: sprite.position.y + INSET},\n      {x: sprite.position.x + TILE_SIZE, y: sprite.position.y + TILE_SIZE - INSET}\n    ]\n  }\n  if (side === TOP) {\n    return [\n      {x: sprite.position.x + INSET, y: sprite.position.y},\n      {x: sprite.position.x + TILE_SIZE - INSET, y: sprite.position.y}\n    ]\n  }\n  if (side === BOTTOM) {\n    return [\n      {x: sprite.position.x + INSET, y: sprite.position.y + TILE_SIZE},\n      {x: sprite.position.x + TILE_SIZE - INSET, y: sprite.position.y + TILE_SIZE}\n    ]\n  }\n}\n\nconst overlapsPoint = (point, spriteB, padding = 0)=> {\n  const {x, y} = point;\n  const {top, bottom, left, right} = getEdges(spriteB);\n  return (\n    y > top - padding &&\n    y < bottom + padding &&\n    x > left - padding &&\n    x < right + padding\n  );\n}\n\nconst overlapsSide = (side, spriteA, spriteB)=> {\n  const points = getPointsForSide(side, spriteA);\n\n  for (const point of points) {\n    if (overlapsPoint(point, spriteB, 1)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nconst getCollidedEdges = (spriteA, spriteB)=> {\n  const prevEdgesA = getEdges({position: {...spriteA.prevPosition}});\n  const prevEdgesB = getEdges({position: {...spriteB.prevPosition}});\n  const collidedEdges = {top: false, bottom: false, left: false, right: false};\n\n  // by checking if an edge was not overlapping last frame but is this frame\n  // we can see which edge is colliding\n  if (prevEdgesA.top >= prevEdgesB.bottom) {\n    collidedEdges[TOP] = true;\n  }\n  else if (prevEdgesA.bottom <= prevEdgesB.top) {\n    collidedEdges[BOTTOM] = true;\n  }\n\n  if (prevEdgesA.left >= prevEdgesB.right) {\n    collidedEdges[LEFT] = true;\n  }\n  else if (prevEdgesA.right <= prevEdgesB.left) {\n    collidedEdges[RIGHT] = true;\n  }\n\n  return collidedEdges;\n}\n\nconst getAxisFromEdge = (edge)=> {\n  const edgeAxisMap = {\n    left: 'x',\n    right: 'x',\n    top: 'y',\n    bottom: 'y'\n  };\n\n  return edgeAxisMap[edge];\n}\n\nconst getSeparatedState = (edgeA, spriteA, spriteB)=> {\n  const edgesB = getEdges(spriteB);\n  const velocity = {...spriteA.velocity, [getAxisFromEdge(edgeA)]: 0};\n\n  let position = {...spriteA.position};\n  if (edgeA === TOP) {\n    position.y = edgesB[BOTTOM];\n  }\n  else if (edgeA === BOTTOM) {\n    position.y = edgesB[TOP] - TILE_SIZE;\n  }\n  else if (edgeA === LEFT) {\n    position.x = edgesB[RIGHT];\n  }\n  else if (edgeA === RIGHT) {\n    position.x = edgesB[LEFT] - TILE_SIZE;\n  }\n\n  return {position, velocity};\n}\n\nexport const updateSpriteCollidingState = (spriteA, sprites, width, height)=> {\n  if (spriteA.static) {\n    return spriteA;\n  }\n\n  let colliding = {...spriteA.colliding};\n\n  // sprites\n  for (const spriteB of sprites) {\n    if (spriteA.id === spriteB.id) {\n      continue;\n    }\n\n    for (const edge of [TOP, BOTTOM, LEFT, RIGHT]) {\n      if (overlapsSide(edge, spriteA, spriteB)) {\n        \n        const collidingSprite = {...spriteB}\n        // prevent recursion of colliding state by removing the colliding state from spriteB\n        // otherwise it can recurse forever: state.colliding.bottom.colliding.top.colliding.bottom...\n        collidingSprite.colliding = undefined\n\n        colliding[edge].push(collidingSprite)\n      }\n    }\n  }\n\n  // walls\n  const padding = 1;\n  if (spriteA.position.x < 0 + padding) {\n    colliding[LEFT].push({name: 'Wall'});\n  }\n  if (spriteA.position.x > width - TILE_SIZE - padding) {\n    colliding[RIGHT].push({name: 'Wall'});\n  }\n  if (spriteA.position.y < 0 + padding) {\n    colliding[TOP].push({name: 'Wall'});\n  }\n  if (spriteA.position.y > height - TILE_SIZE - padding) {\n    colliding[BOTTOM].push({name: 'Wall'});\n  }\n\n  return {...spriteA, colliding};\n};\n\nexport const applySpriteCollisions = (spriteA, sprites)=> {\n  if (spriteA.static) {\n    return spriteA;\n  }\n\n  for (const spriteB of sprites) {\n    if (spriteA.id === spriteB.id) {\n      continue;\n    }\n\n    if (isOverlapping(spriteA, spriteB)) {    \n      const collidedEdges = getCollidedEdges(spriteA, spriteB);\n      let newSpriteA = {...spriteA};\n      \n      if (collidedEdges[TOP]) {\n        newSpriteA = {\n          ...newSpriteA,\n          ...getSeparatedState(TOP, spriteA, spriteB)\n        }\n      }\n      else if (collidedEdges[BOTTOM]) {\n        newSpriteA = {\n          ...newSpriteA,\n          ...getSeparatedState(BOTTOM, spriteA, spriteB)\n        }\n      }\n\n      // Check if overlap has been resolved before resolving horizontal collisions\n      // This is a cheap trick to prevent sprite from catching on the corners\n      // of adjacent tiles (vertical is resolved first & the horizontal is avoided)\n      if (isOverlapping(newSpriteA, spriteB)) {\n        if (collidedEdges[LEFT]) {\n          newSpriteA = {\n            ...newSpriteA,\n            ...getSeparatedState(LEFT, spriteA, spriteB)\n          }\n        }\n        else if (collidedEdges[RIGHT]) {\n          newSpriteA = {\n            ...newSpriteA,\n            ...getSeparatedState(RIGHT, spriteA, spriteB)\n          }\n        }\n      }\n      \n      return newSpriteA;\n    }\n  }\n\n  return spriteA;\n};\n\nexport const applyWallCollisions = (sprite, width, height)=> {\n  if (sprite.static) {\n    return sprite;\n  }\n\n  const newPosition = {...sprite.position};\n\n  if (sprite.position.y > height - TILE_SIZE) {\n    newPosition.y = height - TILE_SIZE;\n  }\n\n  if (sprite.position.y < 0) {\n    newPosition.y = 0;\n  }\n\n  if (sprite.position.x > width - TILE_SIZE) {\n    newPosition.x = width - TILE_SIZE;\n  }\n\n  if (sprite.position.x < 0) {\n    newPosition.x = 0;\n  }\n  \n  return {\n    ...sprite,\n    position: newPosition\n  }\n};\n\nexport const storePreviousPosition = (sprite)=> ({\n  ...sprite,\n  prevPosition: {...sprite.position}\n});\n\nexport const applyAcceleration = (sprite)=> {\n  const {velocity, maxVelocity, acceleration} = sprite;\n  return {\n    ...sprite,\n    velocity: {\n      x: Math.max(Math.min(velocity.x + acceleration.x, maxVelocity.x), -maxVelocity.x),\n      y: Math.max(Math.min(velocity.y + acceleration.y, maxVelocity.y), -maxVelocity.y)\n    },\n    acceleration: {x: 0, y: 0}\n  }\n};\n\nexport const applyVelocity = (sprite)=> ({\n  ...sprite,\n  position: {\n    x: sprite.position.x + sprite.velocity.x,\n    y: sprite.position.y + sprite.velocity.y\n  }\n});\n\nexport const resetColliding = (sprite)=> ({\n  ...sprite,\n  colliding: {top: [], bottom: [], left: [], right: []},\n\n});\n\nconst snapNearZero = (num)=> Math.abs(num) > 0.0001 ? num : 0\n\nexport const applyFriction = (sprite)=> {\n  const x = sprite.velocity.x * (1 - sprite.friction)\n  const y = sprite.velocity.y * (1 - sprite.friction)\n  \n  return {\n    ...sprite,\n    velocity: {\n      x: snapNearZero(x),\n      y: snapNearZero(y),\n    }\n  }\n};","import {parseRules, parseSprites, parseLegend, parseLevel, parseNames,\n  parseVariables, getLevelDimensions} from '../util/parse.js'\nimport {getStateTransitions, isAlive, getNewStateToAdd, addNewState, applyStateTransitions} from '../util/state.js'\nimport {storePreviousPosition, applyAcceleration, applyVelocity, applyFriction,\n  updateSpriteCollidingState, applySpriteCollisions, roundToPixels,\n  applyWallCollisions, resetColliding\n} from './physics';\nimport {TILE_SIZE} from '../Game/constants.js'\nimport Plain from 'slate-plain-serializer';\n\nconst defaultState = {\n  currentView: 'game',\n  sprites: [],\n  legend: {},\n  names: {},\n  width_in_tiles: 0,\n  height_in_tiles: 0,\n  active: false,\n  theme: 'dark',\n  debug: false,\n  imageMap: {},\n  rules: {\n    regular: [],\n    collisionCreate: [],\n    collisionModify: []\n  },\n  stateTransitions: {\n    regular: {}\n  },\n  images: ['player', 'brick', 'questionbrick', 'spike', 'goomba', 'goombared']\n}\n\nconst arrayToObject = (array) =>\n   array.reduce((obj, item) => {\n     obj[item] = true\n     return obj\n   }, {})\n\nconst removeComments = (code)=>\n  code.split('\\n').filter(\n    (line)=> !line.includes('//')\n  ).join('\\n')\n\nconst gameReducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'SET_ACTIVE':\n      return {\n        ...state,\n        active: action.active\n      }\n\n    case 'TOGGLE_DEBUG':\n      return {\n        ...state,\n        debug: !state.debug\n      }\n    \n    case 'SELECT_IMAGE':\n      const imageMap = {...state.imageMap}\n      const {variableName, imageName} = action\n      imageMap[variableName] = imageName;\n      return {\n        ...state,\n        imageMap\n      }\n    \n    case 'COMPILE':\n      try {\n        const {serialize} = Plain\n        const level = action.level |> serialize |> removeComments |> parseLevel\n        const legend = action.legend |> serialize |> removeComments |> parseLegend\n        const sprites = parseSprites(level, legend)\n    \n      // Names is the legend mapped to have the values as keys. Used for fast name lookup.\n      // this used to use the legend before the random features were added.\n      // For this to work though, names needs to include all possible names, including those that might not be rendered onto\n      // the map the first time it is loaded. I suppose later on this should also include things spawned within rules that may\n      // not also appear in the legend.\n      // Ideally, I could refactor out this names object entirely. It seems like that should be possible.\n      const namesArr = parseNames(action.legend |> serialize);\n      const names = arrayToObject(namesArr);\n\n      const variables = parseVariables(action.rules |> serialize);\n      \n      const imageMap = {...state.imageMap};\n      for (const name of namesArr) {\n        if (!imageMap[name]) {\n          const imageAvailable = state.images.includes(name.toLowerCase())\n          imageMap[name] = imageAvailable ? name.toLowerCase() : 'player';\n        }\n      }\n\n        // A rule consists of a before and an after state\n        const rules = parseRules(\n          action.rules |> serialize |> removeComments,\n          names,\n          variables\n        )\n\n        const [width_in_tiles, height_in_tiles] = getLevelDimensions(level);\n\n        return {\n          ...defaultState,\n          sprites,\n          legend,\n          rules,\n          width: width_in_tiles * TILE_SIZE,\n          height: height_in_tiles * TILE_SIZE,\n          names,\n          imageMap\n        }\n      }\n      catch(err) {\n        console.error(err);\n        return {\n          ...defaultState,\n          error: 'Compilation error 😞'\n        }\n      }\n\n    case 'UPDATE':\n      if (state.currentView !== 'game') {\n        return state;\n      }\n      const previousState = {...state};\n      const stateToAdd = getNewStateToAdd(state.sprites, state.rules.create)\n      \n      const stateTransitions = {\n        modify: getStateTransitions(state.rules.modify, state.sprites),\n        create: getStateTransitions(state.rules.create, state.sprites),\n      }\n\n      const winners = state.sprites.filter((sprite)=> Boolean(sprite.win))\n\n      const newSprites = state.sprites.filter(isAlive)\n        |> ((sprites)=> addNewState(sprites, stateToAdd))\n        |> ((sprites)=> sprites.map(resetColliding))\n        |> ((sprites)=> sprites.map((sprite)=> updateSpriteCollidingState(\n          sprite, state.sprites, state.width, state.height\n        )))\n        |> ((sprites)=> sprites.map(storePreviousPosition))\n        |> ((sprites)=> applyStateTransitions(stateTransitions.modify, sprites))\n        |> ((sprites)=> sprites.map(applyFriction))\n        |> ((sprites)=> sprites.map(applyAcceleration))\n        |> ((sprites)=> sprites.map(applyVelocity))\n        |> ((sprites)=> sprites.map((sprite)=> applySpriteCollisions(sprite, state.sprites, previousState)))\n        |> ((sprites)=> sprites.map((sprite)=> applySpriteCollisions(sprite, state.sprites, previousState)))\n        |> ((sprites)=> sprites.map((sprite)=> applySpriteCollisions(sprite, state.sprites, previousState)))\n        |> ((sprites)=> sprites.map((sprite)=> applyWallCollisions(sprite, state.width, state.height)))\n        |> ((sprites)=> sprites.map(roundToPixels))\n        \n      return {\n          ...state,\n          sprites: newSprites,\n          stateTransitions,\n          currentView: winners.length > 0 ? 'menu' : state.currentView\n      }\n    case 'SET_INPUT':\n    return {\n      ...state,\n      sprites: state.sprites.map(\n        (sprite)=> ({...sprite, inputs: {...sprite.inputs, [action.input]: true}})\n      )\n    };\n\n    case 'TOGGLE_THEME':\n      return {\n        ...state,\n        theme: state.theme === 'light' ? 'dark' : 'light'\n      };\n\n    case 'CANCEL_INPUT':\n      return {\n        ...state,\n        sprites: state.sprites.map(\n          (sprite)=> {\n            const newInputs = {...sprite.inputs};\n            newInputs[action.input] = undefined;\n            return {...sprite, inputs: newInputs}\n          }\n        )\n      };\n\n    default:\n      return state\n  }\n}\n\nexport default gameReducer","\nconst initialTileSets = [\n  [\n    [0, 1, 1, 0,],\n    [1, 1, 1, 1,],\n    [1, 1, 1, 1,],\n    [0, 1, 1, 0,]\n  ],\n  [\n    [0, 1, 1, 0,],\n    [1, 0, 0, 1,],\n    [1, 0, 0, 1,],\n    [0, 1, 1, 0,]\n  ]\n]\n\nconst tileImages = ['tile0', 'tile1', 'tile2', 'tile3']\n\nconst rasterise = (tileSet)=> {\n  const width = 128\n  const height = 128\n\n  const canvas = document.createElement('canvas')\n  canvas.width = width\n  canvas.height = height\n  \n  let ctx = canvas.getContext('2d')\n  tileSet.forEach((row, rowIndex)=> (\n    tileSet[rowIndex].forEach((col, colIndex)=> {\n      const tileImage = tileImages[tileSet[rowIndex][colIndex]]\n      const image = new Image(32, 32);\n      image.onload = function() {\n          console.log('loaded')\n          ctx.drawImage(image, col * 32, row * 32);\n      };\n      image.src = `../Game/images/tiles/${tileImage}.png`\n      // the src needs to be set after the onload because apparently\n      // sometimes the src can be loaded instantly (eg: if the image is cached)\n    })\n  ))\n\n  // produce png from canvas\n  var dataUri = canvas.toDataURL()\n\n  return dataUri\n}\n\nconst defaultState = {\n  tileSets: initialTileSets,\n  open: false,\n  images: initialTileSets.map((tileSet)=> rasterise(tileSet)),\n  tileImages\n}\n\nconst spriteEditorReducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'spriteEditor/SET_OPEN':\n      return {\n        ...state,\n        open: action.open\n      }\n    case 'spriteEditor/UPDATE_TILESETS':\n      return {\n        ...state,\n        tileSets: action.tileSets,\n        images: action.tileSets.map((tileSet)=> rasterise(tileSet))\n      }\n    default:\n      return state\n  }\n}\n\nexport default spriteEditorReducer","import {combineReducers} from 'redux';\nimport codeReducer from './Code/reducer.js';\nimport gameReducer from './Game/reducer.js';\nimport spriteEditorReducer from './SpriteEditor/reducer.js';\n\nexport default combineReducers({\n  code: codeReducer,\n  game: gameReducer,\n  spriteEditor: spriteEditorReducer\n})\n","\nimport * as firebase from 'firebase';\nimport 'firebase/firestore' // Required for side-effects\n\nconst config = {\n  apiKey: \"AIzaSyBHLFHOl9TSm557CTNB0IARouvjID9eVmA\",\n  authDomain: \"micro-gg.firebaseapp.com\",\n  databaseURL: \"https://micro-gg.firebaseio.com\",\n  projectId: \"micro-gg\",\n  storageBucket: \"micro-gg.appspot.com\",\n  messagingSenderId: \"53073229739\"\n}\n\nconst firebaseInitialized = firebase.initializeApp(config)\n\nfirebase.firestore().enablePersistence()\n  .catch(function(err) {\n      if (err.code === 'failed-precondition') {\n          // Multiple tabs open, persistence can only be enabled\n          // in one tab at a a time.\n          // ...\n      } else if (err.code === 'unimplemented') {\n          // The current browser does not support all of the\n          // features required to enable persistence\n          // ...\n      }\n  });\n// Subsequent queries will use persistence, if it was enabled successfully\n\nexport default firebaseInitialized","import React from 'react';\nimport './debug.scss';\n\nexport const DebugColliding = ({sprite})=> (\n  <div className='debug-colliding'>\n    {Object.entries(sprite.colliding).map(([key, value], index)=> \n      <p className={`number ${key} ${value.length > 0 && 'active'}`}>\n        {value.length}\n      </p>\n    )}\n  </div>\n)","import React from 'react';\nimport {DebugColliding} from '../debug/DebugColliding.js';\nimport './Sprite.css';\n\nconst getPositionStyle = (x, y)=> ({\n  position: 'relative', left: x, top: y\n});\n\nconst Sprite = ({x, y, img, sprite, debug})=> (\n  <div className=\"sprite\" style={getPositionStyle(x, y)}>\n    <img src={require(`./images/${img}.png`)} alt='' />\n    {debug && <DebugColliding sprite={sprite} />}\n  </div>\n);\n\nexport default Sprite;\n","import React from 'react';\nimport Sprite from './Sprite.js';\n\nconst Game = ({sprites, width, height, imageMap, error, debug})=> (\n  <div className='stage' style={{width, height}}>\n    {error && <p className='error' >{error}</p>}\n    {sprites.map((sprite)=>\n      <Sprite\n        key={sprite.id}\n        x={sprite.position.x}\n        y={sprite.position.y}\n        img={imageMap[sprite.name] || 'player'}\n        sprite={sprite} // used for debug visualisation\n        debug={debug}\n      />\n    )}\n  </div>\n);\n\nexport default Game","import React from 'react';\nimport './Menu.scss';\n\nexport const Menu = ({width, height, play})=> (\n  <div className='menu' style={{width, height}}>\n    <h1 className='title'>Tiny game</h1>\n    <button className='inverted' onClick={play}>\n      Play again\n    </button>\n  </div>\n);\n","import React, {useEffect} from 'react';\nimport {connect} from 'react-redux'\n\nconst Loop = ({onTimeChange})=> {\n  // recursively calls itself once per frame\n  let request;\n  const advanceFrame = ()=> {\n    onTimeChange();\n    request = requestAnimationFrame(()=> advanceFrame());\n  }\n\n  useEffect(() => {\n    request = requestAnimationFrame(()=> advanceFrame());\n    return function cleanup() {\n      cancelAnimationFrame(request);\n    }\n  }, []);\n\n  return <p></p>;\n};\n\nconst mapDispatchToProps = (dispatch)=> ({\n  onTimeChange: ()=> {\n    dispatch({\n      type: 'UPDATE'\n    });\n  }\n});\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(Loop);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst ImagePicker = ({variableName, imageMap, images, onSelect})=> {  \n  // imageMap will be an empty object before <Code /> has been loaded\n  // this protects against that case\n  if (Object.keys(imageMap).length === 0) {\n    return null;\n  }\n\n  const image = imageMap[variableName] ? imageMap[variableName] : 'player';\n\n  return (\n    <Tooltip\n      interactive\n      className='tooltip'\n      title={\n        <div className='tooltip-content'>\n          {images.map((name)=> (\n            <img\n              key={name}\n              alt=''\n              src={require(`../Game/images/${name}.png`)}\n              onClick={()=> onSelect(variableName, name)}\n            />\n          ))}\n        </div>\n      }\n    >\n      <img className='code-sprite'\n        alt=''\n        src={require(`../Game/images/${image}.png`)}\n      />\n    </Tooltip>\n  )\n};\n\nconst mapStateToProps = ({game})=> ({\n  imageMap: game.imageMap,\n  images: game.images\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  onSelect: (variableName, imageName)=> {\n    dispatch({\n      type: 'SELECT_IMAGE',\n      variableName,\n      imageName\n    });\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ImagePicker);\n","import React, {Fragment, useEffect, useState} from 'react';\nimport {connect} from 'react-redux';\nimport Prism from 'prismjs';\nimport {Editor} from 'slate-react';\nimport ImagePicker from '../ImagePicker/ImagePicker.js';\n\nconst makeGrammar = ()=> {\n  return {\n    comment: /\\/\\/.*/,\n    variable: [\n      {\n        pattern: new RegExp('[^ ]{1} = ([A-Z]+) ', 'i')\n      },\n      // {\n      //   pattern: new RegExp('or (.+)\\\\b', 'i'),\n      // }\n    ]\n  }\n}\n\nconst grammar = makeGrammar();\n\nconst getContent = (token)=> {\n  if (typeof token == 'string') {\n    return token\n  } else if (typeof token.content == 'string') {\n    return token.content\n  } else {\n    return token.content.map(getContent).join('')\n  }\n}\n\nconst decorateNode = (node, editor, next)=> {\n  const others = next() || []\n  const texts = node.getTexts().toArray()\n  const string = texts.map(t => t.text).join('\\n')\n\n  if (texts.length !== 1) {\n    return others;\n  }\n\n  const tokens = Prism.tokenize(string, grammar)\n  const decorations = []\n  let startText = texts.shift()\n  let endText = startText\n  let startOffset = 0\n  let endOffset = 0\n  let start = 0\n\n  for (const token of tokens) {\n    startText = endText\n    startOffset = endOffset\n\n    const content = getContent(token)\n    const newlines = content.split('\\n').length - 1\n    const length = content.length - newlines\n    const end = start + length\n\n    let available = startText.text.length - startOffset\n    let remaining = length\n\n    endOffset = startOffset + remaining\n\n    while (available < remaining && texts.length > 0) {\n      endText = texts.shift()\n      remaining = length - available\n      available = endText.text.length\n      endOffset = remaining\n    }\n\n    if (typeof token != 'string') {\n      const dec = {\n        anchor: {\n          key: startText.key,\n          offset: startOffset,\n        },\n        focus: {\n          key: endText.key,\n          offset: endOffset,\n        },\n        mark: {\n          type: token.type,\n        },\n      }\n\n      decorations.push(dec)\n    }\n\n    start = end\n  }\n\n  return [...others, ...decorations]\n}\n\nconst renderMark = (props, editor, next) => {\n  const { children, attributes, node } = props\n\n  switch (props.mark.type) {\n    case 'variable':\n      const [left, right] = node.text.split('=').map((str)=> str.trim())\n      const names = right.split(' or ')\n\n      return <span {...attributes}>\n          {children}\n          <ImagePicker variableName={names[0]} />\n        </span>\n\n    case 'comment': \n      return (\n        <span {...attributes} style={{ opacity: '0.33' }}>\n          {children}\n        </span>\n      )\n    case 'keyword':\n      return (\n        <span {...attributes} style={{ fontWeight: 'bold' }}>\n          {children}\n        </span>\n      )\n    default:\n      return next()\n  }\n}\n\nconst Code = ({level, legend, rules, imageMap,\n  onUpdateRules, onUpdateLevel, onUpdateLegend, compile}\n)=> {\n  // manually trigger code change on first load\n  useEffect(() => {\n    compile(level, legend, rules);\n  }, [])\n\n  const [expanded, setExpanded] = useState({\n    level: true,\n    legend: true,\n    rules: true\n  })\n\n  const toggleExpanded = (section)=> {\n    setExpanded({...expanded, [section]: !expanded[section]})\n  }\n\n  return (\n    <Fragment>\n      <button className='primary collapsible' onClick={()=> toggleExpanded('level')}>\n        Level\n      </button>\n      {expanded.level && <Editor\n        className={'code level'}\n        value={level}\n        onChange={onUpdateLevel}\n        decorateNode={decorateNode}\n        renderMark={(props, editor, next)=>\n          renderMark(props, editor, next, imageMap)\n        }\n        spellCheck={false}\n      />}\n      <button className='primary collapsible' onClick={()=> toggleExpanded('legend')}>\n        Legend\n      </button>\n      {expanded.legend && <Editor\n        className={'code legend'}\n        value={legend}\n        onChange={onUpdateLegend}\n        decorateNode={decorateNode}\n        renderMark={(props, editor, next)=> renderMark(props, editor, next, imageMap)}\n        spellCheck={false}\n      />}\n      <button className='primary collapsible' onClick={()=> toggleExpanded('rules')}>\n        Rules\n      </button>\n      {expanded.rules && <Editor\n        className={'code rules'}\n        value={rules}\n        onChange={onUpdateRules}\n        decorateNode={decorateNode}\n        renderMark={(props, editor, next)=> renderMark(props, editor, next, imageMap)}\n        spellCheck={false}\n      />}\n    </Fragment>\n  )\n};\n\nconst mapStateToProps = ({code, game})=> ({\n  level: code.level,\n  legend: code.legend,\n  rules: code.rules,\n  width: game.width, \n  height: game.height,\n  imageMap: game.imageMap\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  onUpdateRules: ({value})=> {\n    dispatch({\n      type: 'UPDATE_RULES',\n      rules: value\n    })\n  },\n  onUpdateLevel: ({value})=> {\n    dispatch({\n      type: 'UPDATE_LEVEL',\n      level: value\n    })\n  },\n  onUpdateLegend: ({value})=> {\n    dispatch({\n      type: 'UPDATE_LEGEND',\n      legend: value\n    })\n  },\n  compile: (level, legend, rules)=> {\n    dispatch({\n      type: 'COMPILE',\n      level, legend, rules\n    });\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Code);\n","import React from 'react';\nimport './Tile.scss';\n\nconst getPositionStyle = (x, y)=> ({\n  position: 'relative', left: x, top: y\n});\n\nconst Tile = ({x, y, img, onClick})=> (\n  <div className='tile' style={getPositionStyle(x, y)}>\n    <img\n      src={require(`../Game/images/tiles/${img}.png`)}\n      alt=''\n      onClick={()=> onClick()}\n    />\n  </div>\n);\n\nexport default Tile;\n","import React, {useState} from 'react'\nimport {connect} from 'react-redux'\nimport Dialog from '@material-ui/core/Dialog';\nimport Tile from './Tile.js'\nimport {TILE_SIZE} from '../Game/constants.js';\nimport './SpriteEditor.scss';\n\nconst SpritePicker = ({images, tileSets, selectedTileSet, onSelect})=> (\n  <div className='image-list'>\n    {images.map((src, index)=>{\n      return (\n        <img\n          src={src}\n          alt=''\n          className={`image ${index === selectedTileSet && 'selected'}`}\n          onClick={()=> onSelect(index)}\n        />\n      )\n    })}\n  </div>\n)\n\nconst Preview = ({tiles, selectedTile, tileImages, onSelect})=> (\n  <div className='preview'>\n    {tiles.map((rowArr, row)=> (\n      rowArr.map((tileIndex, col)=> (\n        <Tile\n          img={tileImages[tileIndex]}\n          x={col * TILE_SIZE}\n          y={row * TILE_SIZE}\n          onClick={()=> onSelect(row, col, selectedTile)}\n        />\n      ))\n    ))}\n  </div>\n)\n\nconst TilePicker = ({selectedTile, tileImages, onSelect})=> (\n  <div className='picker'>\n    {tileImages.map((name, index)=> (\n      <img\n        key={name}\n        alt=''\n        className={index === selectedTile ? 'selected' : ''}\n        src={require(`../Game/images/tiles/${name}.png`)}\n        onClick={()=> onSelect(index)}\n      />\n    ))}\n  </div>\n)\n\nconst SpriteEditor = ({tileSets, tileImages, images, open, updateTileSets, onClose})=> {  \n  const [selectedTileSet, setSelectedTileSet] = useState(0);\n  const [selectedTile, setSelectedTile] = useState(0);\n  const tiles = tileSets[selectedTileSet]\n\n  return (\n    <Dialog open={open} onClose={onClose}>\n      <div className='container'>\n        <div className='left'>\n          <SpritePicker\n            images={images}\n            tileSets={tileSets}\n            selectedTileSet={selectedTileSet}\n            onSelect={setSelectedTileSet}\n          />\n        </div>\n        <div className='right'>\n          <Preview\n            tiles={tiles}\n            tileImages={tileImages}\n            selectedTile={selectedTile}\n            onSelect={(row, col, newTileIndex)=> {\n              const newTileSets = [...tileSets]\n              newTileSets[selectedTileSet][row][col] = newTileIndex\n              updateTileSets(newTileSets)\n            }}\n          />\n          <TilePicker\n            tileImages={tileImages}\n            selectedTile={selectedTile}\n            onSelect={setSelectedTile}\n          />\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n\nconst mapStateToProps = ({game, spriteEditor})=> ({\n  open: spriteEditor.open,\n  tileImages: spriteEditor.tileImages,\n  images: spriteEditor.images,\n  tileSets: spriteEditor.tileSets\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  updateTileSets: (tileSets)=> {\n    dispatch({\n      type: 'spriteEditor/UPDATE_TILESETS',\n      tileSets,\n    })\n  }\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SpriteEditor)\n","export const examples = {\nsimple_movement: {\n  level: `\n##################\n#                #\n#                #\n#       P        #\n#       #        #\n#      ###       #\n#     #####      #\n#                #\n#                #\n##################`,\n  \n  legend: `\nP = Player\n# = Brick`,\n  \n  rules: `\n// Accelerate down, like gravity\n{ Player } -> { DOWN Player }\n\n// Move sideways with <LEFT> and <RIGHT> arrow keys\n{ <HORIZONTAL> Player } -> { HORIZONTAL Player }\n`},\n\nsimple_platformer: {\n  level: `\n##################\n#                #\n#                #\n#                #\n#                #\n#                #\n#     ###?#      #\n#                #\n#    P       G   #\n##################`,\n\n  legend: `\nP = Player\n# = Brick\n? = QuestionBrick\nG = Goomba`,\n\n  rules: `\n// Accelerate down, like gravity\n{ Player } -> { DOWN Player }\n{ Goomba } -> { DOWN Goomba }\n\n// Move sideways with <LEFT> and <RIGHT> arrow keys\n{ <HORIZONTAL> Player } -> { HORIZONTAL Player }\n\n// Jump when <UP> is pressed and when the bottom of Player\n// is touching Wall (Wall = anything)\nDOWN { <UP> Player | Wall } -> { JUMP Player | Wall }\n\n// Player dies if touching Goomba on the side\nHORIZONTAL { Player | Goomba } -> { DEAD Player | Goomba }\n\n// Jumping on top of Goomba kills the Goomba\nDOWN { Player | Goomba } -> { Player | DEAD Goomba }\n\n// Break bricks by head-butting\nUP { Player | Brick } -> { Player | DEAD Brick }\n\n// Head-butting QuestionBrick turns it into another Player\nUP { Player | QuestionBrick } -> { Player | JUMP Player }\n`},\n\nfour_way_movement: {\n  level: `\n###############\n#             #\n#             #\n#             #\n#      P      #\n#             #\n#             #\n###############`,\n\n  legend: `\nP = Player\n# = Brick`,\n\n  rules: `\n{ <HORIZONTAL> Player } -> { HORIZONTAL Player }\n{ <VERTICAL> Player } -> { VERTICAL Player }`\n}\n}","import React, {useState, Fragment} from 'react'\nimport {connect} from 'react-redux'\nimport Textarea from 'react-textarea-autosize'\nimport Plain from 'slate-plain-serializer'\nimport {examples} from './exampleCode'\n\nconst ExamplesModal = ({loadPreset})=> {\n  const [visible, setVisible] = useState(false)\n\n  return visible \n  ?\n    <div className='blanket' onClick={()=> setVisible(false)}>\n      <div className='modal' onClick={(e)=> e.stopPropagation()}>\n        <h1>Examples</h1>\n        {Object.entries(examples).map(([key, code])=> {\n          const level = code.level.trim()\n          const legend = code.legend.trim()\n          const rules = code.rules.trim()\n          \n          return <Fragment key={key}>\n            <div className='columns'>\n              <h2>{key}</h2>\n              <button className='secondary' onClick={()=> {\n                loadPreset(level, legend, rules)\n                setVisible(false)\n              }}>\n                Load\n              </button>\n            </div>\n            <div className='example'>\n              <Textarea value={level + '\\n' + legend + '\\n' + rules} />\n            </div>\n          </Fragment>\n        }\n        )}\n      </div>\n    </div>\n  :\n    <button className='primary' onClick={()=> setVisible(true)}>\n      Examples\n    </button>\n}\n\nconst mapStateToProps = ()=> ({})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  loadPreset: (levelText, legendText, rulesText)=> {\n    const level = Plain.deserialize(levelText)\n    const legend = Plain.deserialize(legendText)\n    const rules = Plain.deserialize(rulesText)\n\n    dispatch({\n      type: 'LOAD_PRESET',\n      level, legend, rules\n    })\n    dispatch({\n      type: 'COMPILE',\n      level, legend, rules\n    });\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ExamplesModal);\n","import React, {Fragment, useEffect} from 'react'\nimport {connect} from 'react-redux'\nimport {HotKeys} from 'react-hotkeys'\nimport firebase from '../firebase.js'\nimport withFirebaseAuth from 'react-with-firebase-auth'\nimport * as firebaseApp from 'firebase/app'\nimport 'firebase/auth'\n\nimport Game from '../Game/Game.js'\nimport {Menu} from '../Menu/Menu.js'\nimport Loop from '../Game/Loop.js'\nimport Code from '../Code/Code.js'\nimport SpriteEditor from '../SpriteEditor/SpriteEditor'\nimport ExamplesModal from '../Examples/ExamplesModal'\nimport {toggleDebug} from '../Game/actions.js'\nimport {setInput, cancelInput, toggleTheme} from './actions.js'\nimport CustomProperties from 'react-custom-properties'\nimport Plain from 'slate-plain-serializer'\nimport IconButton from '@material-ui/core/IconButton'\n\nimport './App.scss'\nimport moon from '../icons/moon.svg'\nimport sun from '../icons/sun.svg'\nimport play from '../icons/play.svg'\nimport stop from '../icons/stop.svg'\nimport menu from '../icons/menu.svg'\n\n\n\nconst firestore = firebase.firestore()\n\nconst firebaseAppAuth = firebase.auth()\nconst providers = {\n  googleProvider: new firebaseApp.auth.GoogleAuthProvider(),\n}\n\n\nconst darkColors = {\n  primary: '#F1A0A0',\n  secondary: '#70EFA6',\n  dark: '#000000',\n  light: '#FDF6E2'\n}\n\nconst lightColors = {\n  primary: '#43153F',\n  secondary: '#70EFA6',\n  dark: '#FDF6E2',\n  light: '#FFFFFF'\n}\n\nconst keyMap = {\n  'up': {sequence: 'up', action: 'keydown'},\n  'down': {sequence: 'down', action: 'keydown'},\n  'left': {sequence: 'left', action: 'keydown'},\n  'right': {sequence: 'right', action: 'keydown'},\n  'action1': {sequence: 'x', action: 'keydown'},\n  'action2': {sequence: 'z', action: 'keydown'},\n\n  'cancel_up': {sequence: 'up', action: 'keyup'},\n  'cancel_down': {sequence: 'down', action: 'keyup'},\n  'cancel_left': {sequence: 'left', action: 'keyup'},\n  'cancel_right': {sequence: 'right', action: 'keyup'},\n  'cancel_action1': {sequence: 'x', action: 'keyup'},\n  'cancel_action2': {sequence: 'z', action: 'keyup'},\n};\n\nconst handlers = (onSetInput, onCancelInput, onReset, onRun, onToggleDebug, isGameActive)=> ({\n  'up': ()=> onSetInput('up'),\n  'down': ()=> onSetInput('down'),\n  'left': ()=> onSetInput('left'),\n  'right': ()=> onSetInput('right'),\n  'action1': ()=> onSetInput('action1'),\n  'action2': ()=> onSetInput('action2'),\n  'r': ()=> onReset(),\n  'd': ()=> onToggleDebug(),\n  'space': ()=> onRun(!isGameActive),\n\n  'cancel_up': ()=> onCancelInput('up'),\n  'cancel_down': ()=> onCancelInput('down'),\n  'cancel_left': ()=> onCancelInput('left'),\n  'cancel_right': ()=> onCancelInput('right'),\n  'cancel_action1': ()=> onCancelInput('action1'),\n  'cancel_action2': ()=> onCancelInput('action2'),\n});\n\nconst App = ({\n    legend, level, rules, compile, theme, sprites, imageMap, width, height, debug,\n    error, isGameActive, currentView, setGameActive, onToggleDebug, onSetInput,\n    onCancelInput, onToggleTheme, onOpenCloseSpriteEditor,\n    user, signOut, save, load, signInWithGoogle, // Firebase auth\n})=> {\n  // load data once user is authenticated\n  useEffect(() => {\n    console.log('loading')\n    load()\n  }, [user])\n\n  const colors = theme === 'light' ? lightColors : darkColors;\n  \n  return (\n    <CustomProperties className=\"custom-properties-container\" properties={{\n      '--primary-color': colors.primary,\n      '--secondary-color': colors.secondary,\n      '--dark-color': colors.dark,\n      '--light-color': colors.light,\n      '--hover-color': `${colors.primary}22`  // 22 is is the alpha in hex\n    }}>\n      <div className=\"main\">\n        <div className=\"left\">\n          <header>\n            <h1 className='logo'>micro gg</h1>\n            <ExamplesModal />\n            {\n              user\n                ? <Fragment>\n                    <button onClick={()=> save(level, legend, rules)}>Save</button>\n                    <button onClick={()=> load()}>Load</button>\n                    <button onClick={signOut}>Sign out</button>\n                  </Fragment>\n                : <Fragment>\n                    <button onClick={signInWithGoogle}>Sign in with Google to save</button>\n                  </Fragment>\n            }\n          <button className='icon' onClick={()=> onToggleTheme()}>\n            {theme === 'dark'\n              ? <img src={sun} alt=\"Light UI\" />\n              : <img src={moon} alt=\"Dark UI\" />\n            }\n          </button>\n          </header>\n          <Code imageMap={imageMap} />\n        </div>\n        <HotKeys\n          handlers={handlers(\n            onSetInput,\n            onCancelInput,\n            ()=> compile(level, legend, rules),\n            (active)=> setGameActive(active),\n            ()=> onToggleDebug(),\n            isGameActive\n          )}\n          keyMap={keyMap}\n        >\n          <div className=\"right\">\n            <header>\n              {isGameActive\n                ? <button className='icon stop' onClick={()=> {\n                    compile(level, legend, rules)\n                    setGameActive(false)\n                  }}>\n                    <img src={stop} alt=\"Stop\" />\n                  </button>\n                : <button className='icon' onClick={()=> {\n                    compile(level, legend, rules)\n                    setGameActive(true)\n                  }}>\n                    <img src={play} alt=\"Play\" />\n                  </button>\n              }\n              {isGameActive && <Loop />}\n            </header>\n            <div className=\"game-container\">\n              <SpriteEditor\n                onClose={()=> onOpenCloseSpriteEditor(false)}\n              />\n              {currentView === 'game'\n                ? <Game\n                    sprites={sprites}\n                    imageMap={imageMap}\n                    width={width}\n                    height={height}\n                    debug={debug}\n                    error={error}\n                  />\n                : <Menu\n                    width={width}\n                    height={height}\n                  />\n              }\n            </div>\n          </div>\n        </HotKeys>\n      </div>\n    </CustomProperties>\n  );\n};\n\nconst mapStateToProps = ({code, game})=> ({\n  level: code.level,\n  legend: code.legend,\n  rules: code.rules,\n  theme: game.theme,\n  isGameActive: game.active,\n  sprites: game.sprites,\n  imageMap: game.imageMap,\n  width: game.width,\n  height: game.height,\n  debug: game.debug,\n  error: game.error,\n  currentView: game.currentView\n})\n\nconst mapDispatchToProps = (dispatch)=> ({\n  compile: (level, legend, rules)=> {\n    dispatch({\n      type: 'COMPILE',\n      level, legend, rules\n    });\n  },\n  setGameActive: (active)=> {\n    dispatch({\n      type: 'SET_ACTIVE',\n      active\n    });\n  },\n  onSetInput: (input)=> {\n    dispatch(setInput(input));\n  },\n  onCancelInput: (input)=> {\n    dispatch(cancelInput(input));\n  },\n  onToggleDebug: ()=> {\n    dispatch(toggleDebug());\n  },\n  onToggleTheme: ()=> {\n    dispatch(toggleTheme());\n  },\n  onOpenCloseSpriteEditor: (open)=> {\n    dispatch({type: 'spriteEditor/SET_OPEN', open: open})\n  },\n  save: (level, legend, rules)=> {\n    dispatch({type: 'SAVE_START'});\n\n    firestore.collection('games-v0.1').doc('default')\n      .set({\n        level: Plain.serialize(level),\n        legend: Plain.serialize(legend),\n        rules: Plain.serialize(rules)\n      })\n      .then(function(docRef) {\n        console.log(\"Document written with ID: \", docRef.id)\n        dispatch({type: 'SAVE_SUCCESS'});\n      })\n      .catch(function(error) {\n        console.error(\"Error adding document: \", error)\n        dispatch({type: 'SAVE_ERROR'});\n      })\n  \n    console.log('saving...')\n  },\n  load: ()=> {\n    dispatch({type: 'LOAD_START'});\n\n    firestore.collection('games-v0.1').doc('default').get().then((doc) => {\n      if (!doc.exists) {\n        console.error('No doc found')\n        return\n      }\n      \n      const {level, legend, rules} = doc.data()\n\n      dispatch({\n        type: 'LOAD_SUCCESS',\n        level: Plain.deserialize(level),\n        legend: Plain.deserialize(legend),\n        rules: Plain.deserialize(rules)\n      })      \n    })\n  }\n});\n\n// magically injects 'user' prop once user logs in\nconst appWithAuth = withFirebaseAuth({\n  providers,\n  firebaseAppAuth,\n})(App);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(appWithAuth);\n","\nexport const setInput = (input)=> ({\n  type: 'SET_INPUT',\n  input\n})\n\nexport const cancelInput = (input)=> ({\n  type: 'CANCEL_INPUT',\n  input\n})\n\nexport const toggleTheme = ()=> ({\n  type: 'TOGGLE_THEME'\n})\n","\nexport const toggleDebug = (active)=> ({\n  type: 'TOGGLE_DEBUG',\n  active\n})\n\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {Provider} from 'react-redux'\nimport {createStore} from 'redux'\nimport rootReducers from './reducers'\nimport './index.css'\nimport './fonts/FiraCode/fira_code.css'\nimport App from './App/App.js'\nimport './firebase.js'  // initalise firebase singleton\n\n\nconst store = createStore(\n  rootReducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n )\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}